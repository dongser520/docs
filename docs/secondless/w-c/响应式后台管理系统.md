---
navbar: true
sidebar: auto
title: 响应式后台管理系统：egg.js + bootstrap
---

## 一、搭建界面引入模版html文件
### ① 控制器新建文件夹处理后台界面和路由
新建： `app/controller/admin/manager.js`
```js
'use strict';

const Controller = require('egg').Controller;

class ManagerController extends Controller {

  async create() {
      const {ctx} = this;
      await ctx.render('admin/manager/create.html');
  }
}

module.exports = ManagerController;
```

### ② 新建后台模板文件夹
新建文件夹： `app/view/admin/manager` <br/>
新建文件： `app/view/admin/manager/create.html`
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>create页面</title>
</head>
<body>
    create
</body>
</html>
```

### ③ 路由配置
> 新建： `app/router/admin.js`
> ```js
> module.exports = app => {
>     const { router, controller } = app;
>     router.get('/admin/manager/create', controller.admin.manager.create);
> }
> ```
>> `app/router/router.js`
> ```js
> module.exports = app => {
>   const { router, controller } = app;
>   //控制器分组
>   //...
>   require('./router/admin')(app);
> };
> ```

访问：<http://127.0.0.1:7001/admin/manager/create> 看效果


### ④ 模版代码替换create.html页面代码，并引入静态资源
> 发现页面排版有问题，是由于css等静态资源路径不对

将静态资源 `assets`文件夹放进`app/public`文件夹下，并替换页面的引入路径即可，路径替换方式：<br/>
`"assets/` 换成 `"/public/assets/` <br/>
1. 修改网页标题： `<title>后台管理-创建管理员</title>`
2. 修改栏目路径名称：`创建管理员`

### ⑤ 分离模版
> 大家发现后台页面的顶部，左边菜单栏每个页面都是一样的，因此我们可以抽离出来管理，让整个后台页面更加简洁。<br/><span style="text-decoration:underline;color:green;">另外，希望通过这个案例，同学们可以自己尝试抽离一下我们开发的企业网站。</span>

那么如何分离呢，此时就可以使用egg.js项目的模版引擎中的模版继承功能了。
#### 1. 创建模版文件夹
新建文件夹： `app/view/admin/layout` 一般取名layout <br/>
新建文件： `app/view/admin/layout/main_app.html` 把所有页面的相同部分抽离放到这个网页里面来 <br/>

<a href="/secondless/w-c/响应式后台界面示例代码" target="_blank">main_app.html实例代码（一）：初步抽离公共部分</a>

#### 2.使用模版引擎语法
如果语法提示不好，可以安装一下另外一个扩展：`Better Nunjucks` <br/>

1. `app/view/admin/layout/main_app.html`非公共部分代码如下：
```js
{% block main %}{% endblock %}
```

2. 此时，在 `app/view/admin/manager/create.html`文件，就可以继承`main_app.html`公共模版的内容：
```html
{# 申明继承一下主布局 #}
{% extends "admin/layout/main_app.html" %}

{# 对某个区块进行重新编写代码 #}
{% block main %}
123456
{% endblock %}
```
