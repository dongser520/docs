---
navbar: true
sidebar: auto
title: 章节6.数据处理
---

前言
> 我们在前面几个章节，将我们的微信小程序、支付宝小程序、App、H5界面全部做出来了，只是各个界面数据都是直接写在组件里面，我们知道数据应该由服务器api接口提供，因此本章节，我们先将数据做一个统一处理，方便我们后面请求数据。 <br/><br/>
> 学习过我们`第二学期第三季`的同学，应该都知道，我们最后一章`章节5.企业网站前端部分`，是对我们企业网站做的一个数据渲染，用的是模版引擎做的渲染，我们可以参考一下，在渲染前，服务器api接口提供的数据的格式，这种格式非常有代表性，因为它可以根据服务器提供的数据，动态显示或者隐藏页面的栏目。

## 一、首页数据 [index.vue页面]
### ① swiper广告图
```vue
<template>
	<view>
    ...
        <view v-for="(item,index) in pagedata" :key="index">
            <!-- swiper广告图 -->
            <view v-if="item.type=='swiper' && item.data.length">
                <!-- #ifdef APP-PLUS || MP-ALIPAY -->
                    <!-- 轮播图：有标题 -->
                    <view style="background-image: linear-gradient(to bottom,#1989fa 0%,#70d6f2 80%);border-bottom-left-radius: 60px;border-bottom-right-radius: 60px;" 
                    class="px-2">
                        <u-swiper :list="item.data" autoplay circular :height="180" keyName="src" showTitle :radius="20"></u-swiper>
                    </view>
                <!-- #endif -->
                <!-- #ifdef MP-WEIXIN -->
                    <!-- 轮播图：卡片式 -->
                    <view class="pt-2">
                        <u-swiper :list="item.data" keyName="src" autoplay circular :height="180" 
                        showTitle :radius="5" previousMargin="50" nextMargin="50" bgColor="#ffffff"></u-swiper>
                    </view>
                <!-- #endif -->
                <!-- #ifdef H5 -->
                    <!-- 基础轮播图 -->
                    <view>
                        <u-swiper :list="item.data" indicator indicatorMode="dot" autoplay circular 
                        :height="180" :radius="0" keyName="src"></u-swiper>
                    </view>
                <!-- #endif --> 
            </view>		
        </view>
    ...
    </view>
</template>
<script>
	
	let pagedata = [
		// swiper广告图
		{
			type:'swiper',
			data:[
				// {
				// 	src: 'https://cdn.uviewui.com/uview/resources/video.mp4',
				// 	title: '昨夜星辰昨夜风，画楼西畔桂堂东',
				// 	poster: 'https://cdn.uviewui.com/uview/swiper/swiper1.png',
				// 	type: 'video'
				// },
				{
					src: 'http://lesson06.51yrc.com/public/uploads/Diy/adminImg/20240522/1716347846723_46195408.png',
					title: '规划设计',
					type: 'image'
				},
				{
					src: 'http://lesson06.51yrc.com/public/uploads/Diy/adminImg/20240522/1716347904014_12078316.png',
					title: '施工建设',
					type: 'image'
				},
				{
					src: 'http://lesson06.51yrc.com/public/uploads/Diy/adminImg/20240522/1716347930629_87275382.png',
					title: '电力设备销售',
					type: 'image'
				},
			]
		},
	];
    export default {
		data() {
			return {
				pagedata:pagedata,
            }
        }
    }
</script>
```

### ② 首页消息滚动数据处理
```vue
<template>
	<view>
    ...
        <view v-for="(item,index) in pagedata" :key="index">
            <!-- swiper广告图 -->
            ...
            <!-- 消息滚动组件 -->
		    <view v-if="item.type == 'notices' && item.data.length"
			class="my-2 px-2">
		    	<u-notice-bar :text="noticetext" direction="column" color="#1989fa" bgColor="#ecf5ff"
		    	fontSize="14" duration="4000" @click="openNotice"></u-notice-bar>
		    </view>
        </view>
    ...
    </view>
</template>
<script>
	
	let pagedata = [
		// swiper广告图
		//消息滚动
		{
			type:'notices',
			data:[
				{
					titles:"我司顺利通过“质量、安全及职业健康安全管理体系",
					url:'xxx1'
				},
				{
					titles:"2022年8月2日到3日中电联（北京）认证中心委派2位审核专家对我司质量、安全及职业健康安全管理体系进行审",
					url:'xxx2'
				},
			], 
		}
	];
    export default {
		data() {
			return {
				pagedata:pagedata,
            }
        },
        computed:{
			// 滚动消息内容
			noticetext(){
				let text = [];
				// let res = this.pagedata.find(item=>item.type == 'notices');
				// console.log('res',res);
				// res.data.forEach(e=> text.push(e.titles));
				this.pagedata.find(item=>item.type == 'notices')
				.data.forEach(e=> text.push(e.titles));
				// this.notices.forEach(e=> text.push(e.titles));
				return text;
			}
		},
        methods: {
            //点击滚动消息	
			openNotice(index){
				console.log('点击滚动消息',this.noticetext[index]);
			},
        }
    }
</script>
```

### ③ 首页主要栏目数据处理
```vue
<template>
	<view>
    ...
        <view v-for="(item,index) in pagedata" :key="index">
            <!-- swiper广告图 -->
            ...
            <!-- 消息滚动组件 -->
		    ...
			<!-- 主要栏目展示 -->
		    <view v-if="item.type == 'items' && item.data.length"
			class="px-2 mt-2">
			    <u-row customStyle="margin-bottom:20rpx"
				v-for="(row,rowIndex) in rows" :key="rowIndex">
			    	<u-col span="6" v-for="(itemData,colIndex) in row" :key="colIndex">
			    		<view class="py-3 pl-2 flex rounded-lg" 
						style="background-color: #eef7fe;"
						:class="[colIndex==0?'mr-1':'ml-1']">
			    			<view class="flex flex-1 flex-column">
			    				<view>
			    					<u--text size="16" :text="itemData.name"></u--text>
			    				</view>
			    				<view class="mt-2">
			    					<text class="font-small u-line-1" style="color:#5c97e1;">
									{{itemData.en_name}}</text>
			    				</view>
			    			</view>
			    			<view class="flex align-center" style="width: 45px;height: 45px;">
			    				<u-icon :name="itemData.icon_name" color="#5c97e1" size="42">
								</u-icon>
			    			</view>
			    		</view>
			    	</u-col>
			    </u-row>
			</view>
        </view>
    ...
    </view>
</template>
<script>
	
	let pagedata = [
		// swiper广告图
		...
		//消息滚动
		...,
		// 主要栏目展示
		{
			type:'items',
			data:[
				{
					name:'关于我们',
					en_name:'ABOUT US',
					icon_name:'tags-fill'
				},
				{
					name:'资讯中心',
					en_name:'NEWS CNETER',
					icon_name:'grid-fill'
				},
				{
					name:'主营业务',
					en_name:'MAIN BUSINESS',
					icon_name:'level'
				},
				{
					name:'工程案例',
					en_name:'ENGINEERING CASE',
					icon_name:'share-fill'
				},
				{
					name:'合作单位',
					en_name:'COOPERATION UNIT',
					icon_name:'thumb-up-fill'
				},
				{
					name:'联系我们',
					en_name:'CONTACT US',
					icon_name:'server-fill'
				},
			],
		}
	];
    export default {
		data() {
			return {
				pagedata:pagedata,
            }
        },
        computed:{
			//获取当前的 items 数据
			item() {
			    return this.pagedata.find(item => item.type === 'items') || {};
			},
			// 计算每一行的项目
			rows() {
				// const items = (this.item && this.item.data) || [];	
				// 可选链操作符 (?.)
				// ?. 是可选链操作符，它会在 this.item 为 undefined 或 null 时自动短路，
				// 返回 undefined，然后通过 || [] 确保最终结果为一个空数组。
				const items = this.item?.data || [];
				const rows = [];
				for(let i=0;i<items.length;i+=2){
					rows.push(items.slice(i, i + 2))
				}
				console.log('看一下rows',rows);
				return rows;
			}
		},
    }
</script>
```

### ④ 首页滚动列表、卡片列表、底部导航栏数据处理
```vue
<template>
	<view>
    ...
        <view v-for="(item,index) in pagedata" :key="index">
            <!-- swiper广告图 -->
            ...
            <!-- 消息滚动组件 -->
		    ...
			<!-- 主要栏目展示 -->
		    ...
			<!-- 横向滚动【主营业务】展示 -->
			<view v-if="item.type == 'uScrollList' && item.data.length">
				<u-gap height="10" bgColor="#f8f8f8" marginBottom="10"></u-gap>
				<view class="px-2">
					<view class="mb-2">
						<u--text :text="item.name" type="info"></u--text>
					</view>
					<view>
						<u-scroll-list @right="right" @left="left">
							<view class="scroll-list" style="flex-direction: row;">
								<view
										class="scroll-list__goods-item"
										v-for="(item1, index1) in item.data"
										:key="index1"
										:class="[(index1 === 9) && 'scroll-list__goods-item--no-margin-right']"
								@click.stop="openlistscroll(item1)">
									<!-- <image class="scroll-list__goods-item__image" :src="item1.src"></image> -->
									<u--image :src="item1.src" width="180px" height="110px" showLoading
									radius="5px" mode="widthFix"></u--image>
									<text class="scroll-list__goods-item__text">{{ item1.title }}</text>
								</view>
								<view class="scroll-list__show-more" @click="listscrollMore">
									<text class="scroll-list__show-more__text">查看更多</text>
									<u-icon name="arrow-leftward" color="#1989fa" size="12"></u-icon>
								</view>
							</view>
						</u-scroll-list>
					</view> 
				</view>
			</view>
			<!-- 资讯中心-卡片信息 -->
			<view v-if="item.type == 'uniCard' && item.data.length">
				 <u-gap height="10" bgColor="#f8f8f8" marginBottom="10"></u-gap>
			     <view class="px-2">
					 <view class="mb-2">
					 	<u--text :text="item.name" type="info"></u--text>
					 </view>
					 <!-- 卡片 -->
					 <view class="mb-3" v-for="(d,i) in item.data" :key="i">
						 <uni-card padding="0" spacing="0" margin="0" 
						 :title="d.cardTitle" :extra="d.cardExtra">
						    <template v-slot:cover>
								<view class="custom-cover">
									<u--image :src="d.imgSrc" 
									width="100%" height="160px" showLoading
									radius="0px" mode="widthFix">
									    <template v-slot:loading>
									       <u-loading-icon color="red"></u-loading-icon>
									    </template>
										<view slot="error" style="font-size: 24rpx;">加载失败</view>
									</u--image>
									<view class="cover-content">
										<text class="uni-subtitle uni-white u-line-1">{{d.title}}</text>
									</view>
								</view>
							</template>
							<view class="p-2">
								<text class="u-line-3 text-light-muted font-sm" style="text-align: justify;">{{d.desc}}</text>
							</view>
						 </uni-card>
					 </view>
				 </view>
			</view>  
			<!-- 底部tabbar -->
			<view v-if="item.type == 'uTabbar' && item.data.length">
				<u-tabbar :value="tabbarValue" :safeAreaInsetBottom="true" :border="true"
				:zIndex="1" activeColor="#1989fa" inactiveColor="#7d7e80"
				:fixed="true" :placeholder="true"
				@change="changeTabbar">
					<u-tabbar-item v-for="(d,i) in item.data" :key="i"
					:text="d.text" :icon="d.icon"  :badge="d.badge" 
					@click="openurl(`${d.openurl}`)" :dot="d.dot"></u-tabbar-item>
				</u-tabbar>
			</view>
        </view>
    ...
    </view>
</template>
<script>
	
	let pagedata = [
		// swiper广告图
		...
		//消息滚动
		...,
		// 主要栏目展示
		...,
		//横向滚动
		{
			type:'uScrollList',
			name:'主营业务',
			data:[
				{
					src: 'http://lesson06.51yrc.com/public/uploads/Diy/adminImg/20240522/1716347846723_46195408.png',
					title: '规划设计',
					type: 'image'
				},
				{
					src: 'http://lesson06.51yrc.com/public/uploads/Diy/adminImg/20240522/1716347904014_12078316.png',
					title: '施工建设',
					type: 'image'
				},
				{
					src: 'http://lesson06.51yrc.com/public/uploads/Diy/adminImg/20240522/1716347930629_87275382.png',
					title: '电力设备销售',
					type: 'image'
				},
			]
		},
		//卡片信息
		{
			type:'uniCard',
			name:'资讯中心',
			data:[
				{
					cardTitle:'1个小时前发布',
					cardExtra:'浏览:2万+',
					imgSrc:'http://lesson06.51yrc.com/public/uploads/Diy/adminImg/20240522/1716347930629_87275382.png',
					title:'2022年8月2日到3日中电联（北京）认证中心委派2位审核专家对我司质量、安全及职业健康安全管理体系进行审',
					desc:'中心委派2位审核专家对我司质量、安全及职中心委派2位审核专家对我司质量、安全及职中心委派2位审核专家对我司质量、安全及职中心委派2位审核专家对我司质量、安全及职中心委派2位审核专家对我司质量、安全及职中心委派2位审核专家对我司质量、安全及职',
				},
				{
					cardTitle:'1个小时前发布',
					cardExtra:'浏览:4万+',
					imgSrc:'http://lesson06.51yrc.com/public/uploads/Diy/adminImg/20240522/1716347904014_12078316.png',
					title:'我司顺利通过“质量、安全及职业健康安全管理体系',
					desc:'我司顺利通过“质量、安全及职业健康安全管理体系我体系我体系我体系我我司顺利通过“质量、安全及职业健康安全管理体系我体系我体系我体系我我司顺利通过“质量、安全及职业健康安全管理体系我体系我体系我体系我',
				}
			],
		},
		//底部导航栏
		{
			type:'uTabbar',
			data:[
				{text:'首页',icon:'home',openurl:'/pages/index/index',badge:0,dot:false},
				{text:'资讯中心',icon:'level',openurl:'/pages/list/list',badge:3,dot:false},
				{text:'工程案例',icon:'list-dot',openurl:'/pages/piclist/piclist',badge:0,dot:true},
				{text:'联系我们',icon:'chat-fill',openurl:'/pages/contact/contact',badge:0,dot:false},
			],
		}
	];
    export default {
		data() {
			return {
				pagedata:pagedata,
            }
        },
        ...
    }
</script>
```






























<br/><br/><br/><br/><br/><br/><br/>




## 【第三学期第1季课程】其它章节
### [章节1.课程介绍](/thirdless/w-a '章节1.课程介绍')
<!-- <LessList  /> -->
### [章节2.开发前环境搭建](/thirdless/w-a/02开发前环境搭建 '章节2.开发前环境搭建')
####  <a href="/thirdless/w-a/02开发前环境搭建.html#_1-安装开发工具" style="margin-left:40px;">1. 安装开发工具</a>
####  <a href="/thirdless/w-a/02开发前环境搭建.html#_2-安装插件并调试移动端页面" style="margin-left:40px;">2. 安装插件并调试移动端页面</a>
####  <a href="/thirdless/w-a/02开发前环境搭建.html#_3-调试安卓(Andriod)端手机app效果" style="margin-left:40px;">3. 调试安卓(Andriod)端手机app效果</a>
####  <a href="/thirdless/w-a/02开发前环境搭建.html#_4-调试苹果(IOS)手机app效果" style="margin-left:40px;">4. 调试苹果(IOS)手机app效果</a>
####  <a href="/thirdless/w-a/02开发前环境搭建.html#_5-调试微信小程序效果" style="margin-left:40px;">5. 调试微信小程序效果</a>
####  <a href="/thirdless/w-a/02开发前环境搭建.html#_6-调试支付宝小程序效果" style="margin-left:40px;">6. 调试支付宝小程序效果</a>
### [章节3.引入UI框架及进行全局配置](/thirdless/w-a/03引入UI框架及进行全局配置 '章节2.引入UI框架及进行全局配置')
####  <a href="/thirdless/w-a/03引入UI框架及进行全局配置.html#一、引入ui框架" style="margin-left:40px;">一、引入UI框架</a>
####  <a href="/thirdless/w-a/03引入UI框架及进行全局配置.html#二、项目配置" style="margin-left:40px;">二、项目配置</a>
####  <a href="/thirdless/w-a/03引入UI框架及进行全局配置.html#_1、-底部导航栏" style="margin-left:70px;">1、 底部导航栏</a>
#####  <a href="/thirdless/w-a/03引入UI框架及进行全局配置.html#_1-底部导航栏属性样式设置" style="margin-left:70px;">① 底部导航栏属性样式设置</a>
#####  <a href="/thirdless/w-a/03引入UI框架及进行全局配置.html#_2-底部导航栏事件" style="margin-left:70px;">② 底部导航栏事件</a>
####  <a href="/thirdless/w-a/03引入UI框架及进行全局配置.html#_2、顶部导航栏设置" style="margin-left:70px;">2、顶部导航栏设置</a>
### [章节4.首页开发](/thirdless/w-a/04首页开发 '章节4.首页开发')
####  <a href="/thirdless/w-a/04首页开发.html#一、swiper广告图" style="margin-left:40px;">一、swiper广告图</a>
####  <a href="/thirdless/w-a/04首页开发.html#_1-多种指示器形式样式展示" style="margin-left:70px;">① 多种指示器形式样式展示</a>
####  <a href="/thirdless/w-a/04首页开发.html#_2-带标题的轮播图" style="margin-left:70px;">② 带标题的轮播图</a>
####  <a href="/thirdless/w-a/04首页开发.html#_3-图片视频混合的轮播图" style="margin-left:70px;">③ 图片视频混合的轮播图</a>
####  <a href="/thirdless/w-a/04首页开发.html#_4-卡片式轮播图" style="margin-left:70px;">④ 卡片式轮播图</a>
####  <a href="/thirdless/w-a/04首页开发.html#二、消息滚动通知" style="margin-left:40px;">二、消息滚动通知</a>
####  <a href="/thirdless/w-a/04首页开发.html#三、引入公共样式-css样式库" style="margin-left:40px;">三、引入公共样式（css样式库）</a>
####  <a href="/thirdless/w-a/04首页开发.html#_1-公共样式-css样式库-详细代码及说明" style="margin-left:70px;">① 公共样式（css样式库）详细代码及说明</a>
####  <a href="/thirdless/w-a/04首页开发.html#_2-引入公共样式替换之前写的行内样式" style="margin-left:70px;">② 引入公共样式替换之前写的行内样式</a>
####  <a href="/thirdless/w-a/04首页开发.html#四、主要栏目展示" style="margin-left:40px;">四、主要栏目展示</a>
####  <a href="/thirdless/w-a/04首页开发.html#五、横向滚动【主营业务】展示" style="margin-left:40px;">五、横向滚动【主营业务】展示</a>
####  <a href="/thirdless/w-a/04首页开发.html#_1-横向滚动示例" style="margin-left:70px;">① 横向滚动示例</a>
####  <a href="/thirdless/w-a/04首页开发.html#_2-横向滚动【主营业务】" style="margin-left:70px;">② 横向滚动【主营业务】</a>
####  <a href="/thirdless/w-a/04首页开发.html#六、资讯中心【新闻中心】开发" style="margin-left:40px;">六、资讯中心【新闻中心】开发</a>
### [章节5.其它界面开发](/thirdless/w-a/05其它界面开发 '章节5.其它界面开发')
####  <a href="/thirdless/w-a/05其它界面开发.html#一、资讯中心【新闻中心】列表" style="margin-left:40px;">一、资讯中心【新闻中心】列表</a>
####  <a href="/thirdless/w-a/05其它界面开发.html#_1-导航栏部分" style="margin-left:70px;">① 导航栏部分</a>
####  <a href="/thirdless/w-a/05其它界面开发.html#_2-信息列表部分" style="margin-left:70px;">② 信息列表部分</a>
####  <a href="/thirdless/w-a/05其它界面开发.html#二、信息详情页" style="margin-left:40px;">二、信息详情页</a>
####  <a href="/thirdless/w-a/05其它界面开发.html#三、联系我们页面" style="margin-left:40px;">三、联系我们页面</a>
####  <a href="/thirdless/w-a/05其它界面开发.html#_1-联系方式展示及初步使用表单组件提交数据验证" style="margin-left:70px;">① 联系方式展示及初步使用表单组件提交数据验证</a>
####  <a href="/thirdless/w-a/05其它界面开发.html#_2-完成留言板界面和数据验证" style="margin-left:70px;">② 完成留言板界面和数据验证</a>
####  <a href="/thirdless/w-a/05其它界面开发.html#四、工程案例页面" style="margin-left:40px;">四、工程案例页面</a>
### [章节6.数据处理](/thirdless/w-a/06数据处理 '章节6.数据处理')