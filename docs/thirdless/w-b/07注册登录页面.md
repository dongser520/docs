---
navbar: true
sidebar: auto
title: 章节7.用户中心（注册登录页面）
---

## 一、注册登录页面
关于注册登录的说明：<br/>
1. 注册登录我们从最简单的开始讲起，即：`用户名和密码`开始讲起，后续我们会逐步讲解：`手机号验证码登录`、`本机一键登录`、`第三方登录如：微信、QQ、微博等`、`App扫码登录`；
2. 在最初开发注册登录的时候，就要加上`用户服务协议`、`用户隐私政策`（监管要求）。

### 1. 创建页面并打开页面
1. 新建页面 `/pages/loginCenter/loginCenter.vue`;
2. 在 `pages.json` 中配置:
```js
{
    "path" : "pages/loginCenter/loginCenter",
    "style" : 
    {
        "navigationBarTitleText" : "登录注册",
        "navigationStyle": "custom"
    }
}
```
3. 在 `/pages/wode/wode.nvue`页面点击头像打开注册登录页面
```js
    methods: {
        clickAvatarNickname(){
            uni.navigateTo({
                url: '/pages/loginCenter/loginCenter',
            });
        }
    }
```

### 2. 登录注册页面代码
由于我们已经引入了uViewUI框架，所以可以直接使用它的组件，如： <https://uviewui.com/components/input.html> <br/><br/>
在页面 `/pages/loginCenter/loginCenter.vue`

### ① 登录注册页面初步样式
```vue
<template>
	<view class="page">
		<!-- 导航栏 -->
		<chat-navbar  :fixed="true"
		:showPlus="false" :showUser="false"
		:showBack="true" navbarClass="navbar-bgColor"
		:h5WeiXinNeedNavbar="false">
		</chat-navbar>
		<!-- 表单部分 -->
		<view class="p-3">
			<!-- 用户名 -->
			<view class="mb-3">
				<u-input type="text" v-model="form.username"
				showWordLimit clearable
				:placeholder="form.username_placeHolder" :maxlength="20"
				:adjustPosition="false"
				customStyle="background-color:#ffffff;height:60rpx;">
				</u-input>
			</view>
			<!-- 密码 -->
			<view class="mb-5">
				<u-input type="password" v-model="form.password"
				showWordLimit clearable
				:placeholder="form.password_placeHolder" :maxlength="20"
				:adjustPosition="false"
				customStyle="background-color:#ffffff;height:60rpx;">
				</u-input>
			</view>
			<!-- 协议 -->
			<view class="flex align-center mb-5">
				<view style="width: 60rpx;">
					<checkbox-group>
						<checkbox value="tongyi" :checked="false" />
					</checkbox-group>
				</view> 
				<view class="flex align-center font-sm">
					<text class="text-light-muted">我已阅读并同意</text>
					<text class="text-primary ml-1">《用户服务协议》</text>
					<text class="text-primary ml-1">《用户隐私政策》</text>
				</view>
			</view>
			<!-- 提交按钮 -->
			<u-button type="primary" shape="circle">登 录</u-button>
		</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
				form:{
					username:'',
					password:'',
					username_placeHolder:'用户名',
					password_placeHolder:'密码',
				},
				page:{
					// 页面类型登录还是注册：默认登录
					type:"login", 
					// 默认登录方式：username 账号密码 phoneCode 验证码 等
					typeMode:'username', 
				},
			}
		},
		methods: {
			
		}
	}
</script>

<style>
/* 导航栏颜色 */
.navbar-bgColor{
	background-color: #ededed;
}
</style>

```

### ② 控制提交按钮样式及勾选协议条款动画
关于css动画库非常多，大家可以去网上找，这里提供一个 `Animate.css` 动画库 <https://animate-css.nodejs.cn/>
#### 1. 先将动画库引入到 `App.vue`中
把下载的动画库css名称为：`animate.min.css` 放入到项目的 `/common/css/animate.min.css`，然后引入
```vue
<style>
	/*每个页面公共css */
	...
	/* #ifndef APP-PLUS-NVUE */
	...
	@import '/common/css/animate.min.css';
	/* #endif */
</style>
```

#### 2. 控制提交按钮样式及勾选协议条款动画
在页面 `/pages/loginCenter/loginCenter.vue`
```vue
<template>
	<view class="page">
		<!-- 导航栏 -->
		...
		<!-- 表单部分 -->
		<view class="p-3">
			<!-- 用户名 -->
			...
			<!-- 密码 -->
			...
			<!-- 协议 -->
			<view class="flex align-center mb-5" :class="tiaokuanAnimateClass">
				<view style="width: 60rpx;">
					<checkbox-group @change="checkboxChange">
						<checkbox value="tongyi" :checked="false" />
					</checkbox-group>
				</view> 
				<view class="flex align-center font-sm">
					...
				</view>
			</view>
			<!-- 提交按钮 -->
			<u-button type="primary" shape="circle" :disabled="!submitAbled"
			@click="submit">登 录</u-button>
		</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
				form:{
					username:'',
					password:'',
					username_placeHolder:'用户名',
					password_placeHolder:'密码',
				},
				page:{
					// 页面类型登录还是注册：默认登录
					type:"login", 
					// 默认登录方式：username 账号密码 phoneCode 验证码 等
					typeMode:'username', 
				},
				other:{
					agreeTiaoKuan:false, // 是否同意条款协议
					tiaokuanAnimateCount:0,//提示条款动画计数器
				},
			}
		},
		computed:{
			//提交按钮是否可用
			submitAbled(){
				if(this.page.type == 'login'){
					//账号密码登录
					if(this.page.typeMode == 'username'){
						this.form.username_placeHolder = '用户名';
						this.form.password_placeHolder = '密码';
						// 账号小于4位 密码小于6位 提交按钮不可用
						if(this.form.username.length < 4 || this.form.password.length < 6){
							return false;
						}
						return true;
					}
					// 验证码登录
					// 其它登录方式
				}
			},
			// 没有勾选条款的动画处理
			tiaokuanAnimateClass(){
				if(this.other.tiaokuanAnimateCount == 0){
					return ``;
				}else if(this.other.tiaokuanAnimateCount > 0 && (this.other.tiaokuanAnimateCount % 2 == 1)){
					return `animate__animated animate__heartBeat`;
				}else if(this.other.tiaokuanAnimateCount > 0 && (this.other.tiaokuanAnimateCount % 2 == 0)){
					return `animate__animated animate__shakeX`;
				}
			},
		},
		methods: {
			// 提交数据
			submit(){
				if(!this.other.agreeTiaoKuan){
					this.other.tiaokuanAnimateCount += 1;
					console.log('提示用户要勾选协议，然后给点动画',this.other.tiaokuanAnimateCount);
					return;
				}
				console.log('提交数据',this.form);
			},
			//是否同意隐私政策
			checkboxChange(e){
				console.log('是否同意隐私政策',e);
				if(e.detail.value[0] == 'tongyi'){
					this.other.agreeTiaoKuan = true;
					this.other.tiaokuanAnimateCount = 0;
				}else{
					this.other.agreeTiaoKuan = false;
				}
			},
		}
	}
</script>
```

### ③ 登录注册切换
在页面 `/pages/loginCenter/loginCenter.vue`
```vue
<template>
	<view class="page">
		<!-- 导航栏 -->
		...
		<!-- 表单部分 -->
		<view class="p-3">
			<!-- 用户名 -->
			...
			<!-- 密码 -->
			...
			<!-- 条款协议 -->
			<view class="flex align-center mb-5" >
				...
			</view>
			<!-- 提交框 -->
			<u-button type="primary" shape="circle"
			@click="submit" :disabled="!submitAbled">{{page.pageTitle}}</u-button>
			<!-- 其它登录方式 注册登录切换 -->
			<view class="flex align-center justify-between py-5 mt-2">
				<view class="text-light-muted mx-2 font">手机号登录</view>
				<view class="text-light-muted mx-2 font" @click="changeType">
					{{page.type === 'login' ? '注册账号':'登录账号' }}
				</view>
			</view>
		</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
				form:{
					...
				},
				page:{
					// 页面类型登录还是注册：默认登录
					type:"login",					
					// 默认登录方式：username 用户名密码 phoneCode 验证码 等
                    typeMode:"username",
					// 页面标题
					pageTitle:'',
				},
				other:{
					...
				},
			}
		},
		computed:{
			// 提交按钮是否可用
			submitAbled(){
				if(this.page.type == 'login'){
					// 账号密码登录
					if(this.page.typeMode == 'username'){
						this.form.username_placeHolder = '用户名';
						this.form.password_placeHolder = '密码';
						// 账号输入小于4位  密码输入小于6位 提交按钮不可用
						if(this.form.username.length < 4 || this.form.password.length < 6){
							return false;
						}
						return true;
					}
					//验证码登录
					//其它登录方式
				}else if(this.page.type == 'reg'){
					this.form.username_placeHolder = '设置用户名4-20位(字母,数字,下划线)';
					this.form.password_placeHolder = '设置6-20位密码';
					if(this.form.username.length < 4 || this.form.password.length < 6){
						return false;
					}
					return true;
				}
			},
			...,
		},
		onLoad() {
			this.pageInit();
		},
		methods: {
			// type切换
			changeType(){
				this.page.type = this.page.type === 'login' ? 'reg' : 'login';
				this.pageInit();
			},
			// 页面标题及初始化
			pageInit(){
				// 重置输入内容
				this.form.username = '';
				this.form.password = '';
				// 页面导航栏标题
				if(this.page.type === 'login'){
					this.page.pageTitle = this.page.typeMode == 'username' ? 
					this.page.typeMode == 'phoneCode' ? 
					'手机验证码登录' : '账 号 登 录' : this.page.pageTitle;
				}else if(this.page.type === 'reg'){
					this.page.pageTitle = '注 册';
				}
				uni.setNavigationBarTitle({
					title:this.page.pageTitle
				});
			},
			// 提交数据
			submit(){
				if(!this.other.agreeTiaoKuan){
					this.other.tiaokuanAnimateCount += 1;
					console.log('提示用户要勾选条款，给他动画提示',this.other.tiaokuanAnimateCount);
					// #ifdef MP
					uni.showToast({
						title: '请勾选已阅读并同意服务协议和隐私政策',
						icon:'none'
					});
					// #endif
					return;
				}
				if(this.page.type == 'login'){
					console.log('提交登录数据',this.form);
				}else if(this.page.type === 'reg'){
					console.log('提交注册数据',this.form);
				}
				
			},
			...
		}
	}
</script>
```

说明：<br/>
本季课程，我们以`账号注册登录`为准，后续课程给大家讲解：`手机号验证码登录`、`本机一键登录`、第三方登录如：`微信`、`QQ`、`微博`等、`App扫码登录`；

## 二、关于注册登录功能实现的重要说明
从注册开始，我们需要进行前后端的交互操作了，如果对后端感兴趣的同学，可以有以下学习方式：<br/><br/>
1. `如果对后端完全不会的同学`，如果想从零开始学习后端知识，可以从我们的 <a href="/secondless/w-c.html#_1-第二学期第三季课程介绍" target="_blank">第二学期第三季</a>开始学起 ；<br/><br/>
2. 如果学习过我们 <a href="/secondless/w-c.html#_1-第二学期第三季课程介绍" target="_blank">第二学期第三季</a>课程的同学，可以去学习我们的全栈课程：<a href="/fourthless/w-a.html" target="_blank">第四学期第一季</a>，我们主讲后端知识，前6个章节主要是讲商城板块的后端功能，并且为了方便不同技术栈的同学学习，我们通过 `（thinkphp + mysql）` 和 `（egg.js + mysql）`两套技术栈给大家讲解后端知识和接口开发；<br/><br/>
3. 我们本季度课程后端部分，也是在我们<a href="/fourthless/w-a.html" target="_blank">第四学期第一季</a>课程中，之所以这样设定，主要是为了让同学们对后端开发有一整套的知识体系和代码的完整性开发，对后端感兴趣的同学，可以按照我们课程顺序将<a href="/fourthless/w-a.html" target="_blank">第四学期第一季</a>课程学习过来，我们本季课程后端在<a href="/fourthless/w-a.html" target="_blank">第四学期第一季</a>课程的 `第三学期第二季即时通讯后端内容讲解`板块；<br/><br/>
4. 关于即时通讯的 `登录、注册、退出登录` 接口，打开可以看 <a href="/fourthless/w-a/eggjs.即时通讯接口.html" target="_blank">eggjs即时通讯接口</a> ；<br/><br/>
5. 如果不想学习后端的同学，我给大家提供了一套线上接口，供大家使用，大家跟着老师的视频学习即可；<br/><br/>

## 三、注册功能实现
1. `本地接口`：大家可以去群里面下载本季课程`全部后端代码`，然后在本地运行，进行调试接口；<br/>
2. `线上接口`：线上接口网址是 `https://lesson07.51yrc.com`，大家跟着老师的视频进行调试接口；<br/><br/>
### 1. 注册功能接口文档
1. <a href="/fourthless/w-a/eggjs.即时通讯接口.html#一、用户注册" target="_blank">注册接口文档</a> <br/><br/>
2. 注册接口文档 （再次说明）
> 1. 请求方式：`post` `[用postman测试]`或者`[用Apipost测试]`
> 2. 接口示例：`http://127.0.0.1:7001/api/regChat`<br/>
>> ① 本地接口地址（去群里面下载本季课程`全部后端代码`，然后在本地运行）：<http://127.0.0.1:7001/api/regChat> <br/>
>> ② 线上接口地址：<https://lesson07.51yrc.com/api/regChat> <br/>
> 3. 请求参数 [body] -> [x-www-form-urlencoded]
>
> | 参数       |  是否必填    |  类型    |  长度                   | 说明     |
> | :---:      | :---:       |  :---:   | :---:                  |:---:     |
> | username   |  是         |  string  |  4-20位，字母数字下划线  |用户名（账号），如：`my01`  |
> | password   |  是         |  string  |  6-20位                 |密码，如：`123456`  |
> 5. 返回示例
>  ```js
>  {
>      "msg": "ok",
>      "data": {
>          "create_time": "2025-07-13 11:46:05",
>          "id": 6,
>          "uuid": "be047323-c8e3-4305-b014-3d8c7d24f300",
>          "username": "my01",
>          "nickname": "",
>          "avatar": "https://thinkphp-all.oss-cn-hangzhou.aliyuncs.com/public/67b3001b2aedd.png",
>          "mobile": null,
>          "email": null,
>          "status": 1,
>          "last_login": null,
>          "last_login_ip": null,
>          "register_time": "2025-07-13T03:46:05.000Z",
>          "register_ip": null,
>          "is_deleted": 0,
>          "wechat_openid": null,
>          "qq_openid": null,
>          "weibo_uid": null,
>          "role": "user",
>          "is_email_verified": 0,
>          "is_mobile_verified": 0,
>          "order": 50,
>          "update_time": "2025-07-13T03:46:05.000Z",
>          "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjcmVhdGVfdGltZSI6IjIwMjUtMDctMTMgMTE6NDY6MDUiLCJpZCI6NiwidXVpZCI6ImJlMDQ3MzIzLWM4ZTMtNDMwNS1iMDE0LTNkOGM3ZDI0ZjMwMCIsInVzZXJuYW1lIjoibXkwNiIsInBhc3N3b3JkIjoiOGQ5NjllZWY2ZWNhZDNjMjlhM2E2MjkyODBlNjg2Y2YwYzNmNWQ1YTg2YWZmM2NhMTIwMjBjOTIzYWRjNmM5MiIsIm5pY2tuYW1lIjoiIiwiYXZhdGFyIjoiaHR0cHM6Ly90aGlua3BocC1hbGwub3NzLWNuLWhhbmd6aG91LmFsaXl1bmNzLmNvbS9wdWJsaWMvNjdiMzAwMWIyYWVkZC5wbmciLCJtb2JpbGUiOm51bGwsImVtYWlsIjpudWxsLCJzdGF0dXMiOjEsImxhc3RfbG9naW4iOm51bGwsImxhc3RfbG9naW5faXAiOm51bGwsInJlZ2lzdGVyX3RpbWUiOiIyMDI1LTA3LTEzVDAzOjQ2OjA1LjAwMFoiLCJyZWdpc3Rlcl9pcCI6bnVsbCwiaXNfZGVsZXRlZCI6MCwid2VjaGF0X29wZW5pZCI6bnVsbCwicXFfb3BlbmlkIjpudWxsLCJ3ZWlib191aWQiOm51bGwsInJvbGUiOiJ1c2VyIiwiaXNfZW1haWxfdmVyaWZpZWQiOjAsImlzX21vYmlsZV92ZXJpZmllZCI6MCwib3JkZXIiOjUwLCJ1cGRhdGVfdGltZSI6IjIwMjUtMDctMTNUMDM6NDY6MDUuMDAwWiIsImlhdCI6MTc1MjM3ODM2NX0.M7fae1gBTqQO4ewAELqz51blbv_0kh27UVgDOVImwkU"
>      }
>  }
>  ```

