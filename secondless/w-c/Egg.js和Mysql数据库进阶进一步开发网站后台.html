<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>章节4.Egg.js和Mysql数据库进阶进一步开发网站后台 | 睿晨网</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/assets/img/favicon.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="#icon-pengyouquan" href="/icons/iconfont.svg" color="#3eaf7c">
    <meta name="description" content="睿晨网|睿晨编程|零基础学做网站、app、小程序就从这里开始">
    <meta name="keywords" content="睿晨网,睿晨编程,零基础学做网站,零基础学app,零基础学小程序">
    <meta name="author" content="睿晨网,睿晨编程,阿东老师">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.0c241f14.css" as="style"><link rel="preload" href="/assets/js/app.4c1fa2f2.js" as="script"><link rel="preload" href="/assets/js/10.a1858127.js" as="script"><link rel="preload" href="/assets/js/2.641709ae.js" as="script"><link rel="preload" href="/assets/js/111.ae05aad1.js" as="script"><link rel="preload" href="/assets/js/4.68f7b7e9.js" as="script"><link rel="prefetch" href="/assets/js/100.18619803.js"><link rel="prefetch" href="/assets/js/101.795bb579.js"><link rel="prefetch" href="/assets/js/102.b2af91e0.js"><link rel="prefetch" href="/assets/js/103.addaf7eb.js"><link rel="prefetch" href="/assets/js/104.9cadff90.js"><link rel="prefetch" href="/assets/js/105.78b9c2c5.js"><link rel="prefetch" href="/assets/js/106.2e311b0f.js"><link rel="prefetch" href="/assets/js/107.719537c8.js"><link rel="prefetch" href="/assets/js/108.ee801dcb.js"><link rel="prefetch" href="/assets/js/109.7be9e3da.js"><link rel="prefetch" href="/assets/js/11.e11c94df.js"><link rel="prefetch" href="/assets/js/110.bef17d75.js"><link rel="prefetch" href="/assets/js/112.348a918b.js"><link rel="prefetch" href="/assets/js/113.0377bb8f.js"><link rel="prefetch" href="/assets/js/114.7ce59f50.js"><link rel="prefetch" href="/assets/js/115.73763f96.js"><link rel="prefetch" href="/assets/js/116.8c4955c8.js"><link rel="prefetch" href="/assets/js/117.f57f0ca7.js"><link rel="prefetch" href="/assets/js/118.ac987a87.js"><link rel="prefetch" href="/assets/js/119.191506f9.js"><link rel="prefetch" href="/assets/js/12.77b4f171.js"><link rel="prefetch" href="/assets/js/120.a9d0f345.js"><link rel="prefetch" href="/assets/js/121.74ec567e.js"><link rel="prefetch" href="/assets/js/122.9e1dbf90.js"><link rel="prefetch" href="/assets/js/123.2ae10c73.js"><link rel="prefetch" href="/assets/js/124.1e2930d5.js"><link rel="prefetch" href="/assets/js/125.bd54db16.js"><link rel="prefetch" href="/assets/js/126.501951f4.js"><link rel="prefetch" href="/assets/js/127.78e8444c.js"><link rel="prefetch" href="/assets/js/128.4e853ac8.js"><link rel="prefetch" href="/assets/js/129.b8b424a4.js"><link rel="prefetch" href="/assets/js/13.06be6eff.js"><link rel="prefetch" href="/assets/js/130.97044db5.js"><link rel="prefetch" href="/assets/js/131.a16e7627.js"><link rel="prefetch" href="/assets/js/132.1de37703.js"><link rel="prefetch" href="/assets/js/133.d99212b9.js"><link rel="prefetch" href="/assets/js/134.92f94379.js"><link rel="prefetch" href="/assets/js/135.e4a78e00.js"><link rel="prefetch" href="/assets/js/136.4977877f.js"><link rel="prefetch" href="/assets/js/137.4c4703c5.js"><link rel="prefetch" href="/assets/js/138.c199cd62.js"><link rel="prefetch" href="/assets/js/139.3ae48ccb.js"><link rel="prefetch" href="/assets/js/14.f75e8140.js"><link rel="prefetch" href="/assets/js/140.41d910b1.js"><link rel="prefetch" href="/assets/js/141.c93ed5fd.js"><link rel="prefetch" href="/assets/js/142.a30bcabf.js"><link rel="prefetch" href="/assets/js/143.8b1aaf58.js"><link rel="prefetch" href="/assets/js/144.f9b2970c.js"><link rel="prefetch" href="/assets/js/145.7363c390.js"><link rel="prefetch" href="/assets/js/146.1d5c8a1d.js"><link rel="prefetch" href="/assets/js/147.e121f839.js"><link rel="prefetch" href="/assets/js/148.add78a99.js"><link rel="prefetch" href="/assets/js/149.f27cc0ff.js"><link rel="prefetch" href="/assets/js/15.f10318c8.js"><link rel="prefetch" href="/assets/js/150.ced8ecaa.js"><link rel="prefetch" href="/assets/js/151.0bf12333.js"><link rel="prefetch" href="/assets/js/152.40f21e31.js"><link rel="prefetch" href="/assets/js/153.b262de48.js"><link rel="prefetch" href="/assets/js/154.50c64325.js"><link rel="prefetch" href="/assets/js/155.426015ec.js"><link rel="prefetch" href="/assets/js/156.4b9bf962.js"><link rel="prefetch" href="/assets/js/157.95c0b8d1.js"><link rel="prefetch" href="/assets/js/158.74450c14.js"><link rel="prefetch" href="/assets/js/159.cc9c20a2.js"><link rel="prefetch" href="/assets/js/16.49a0cfe4.js"><link rel="prefetch" href="/assets/js/160.01c4a8c7.js"><link rel="prefetch" href="/assets/js/161.d4c19dfb.js"><link rel="prefetch" href="/assets/js/162.42a1c4fb.js"><link rel="prefetch" href="/assets/js/163.d3b4d63d.js"><link rel="prefetch" href="/assets/js/164.f9f007d4.js"><link rel="prefetch" href="/assets/js/165.9f7441e0.js"><link rel="prefetch" href="/assets/js/166.1d96f480.js"><link rel="prefetch" href="/assets/js/167.5856d771.js"><link rel="prefetch" href="/assets/js/168.dd367256.js"><link rel="prefetch" href="/assets/js/169.cf1362a6.js"><link rel="prefetch" href="/assets/js/17.9cf0aeef.js"><link rel="prefetch" href="/assets/js/170.aca266de.js"><link rel="prefetch" href="/assets/js/171.599ff2d4.js"><link rel="prefetch" href="/assets/js/172.9e0826cc.js"><link rel="prefetch" href="/assets/js/173.d30914b5.js"><link rel="prefetch" href="/assets/js/174.d7494b91.js"><link rel="prefetch" href="/assets/js/175.b32a1bb2.js"><link rel="prefetch" href="/assets/js/176.decc27de.js"><link rel="prefetch" href="/assets/js/177.c0b71cf9.js"><link rel="prefetch" href="/assets/js/178.4e28a1ff.js"><link rel="prefetch" href="/assets/js/179.f6a019b1.js"><link rel="prefetch" href="/assets/js/18.f506f436.js"><link rel="prefetch" href="/assets/js/180.f853a887.js"><link rel="prefetch" href="/assets/js/181.b2de00b7.js"><link rel="prefetch" href="/assets/js/182.22b42a53.js"><link rel="prefetch" href="/assets/js/183.4d3486a4.js"><link rel="prefetch" href="/assets/js/184.25831409.js"><link rel="prefetch" href="/assets/js/185.d01fcfd3.js"><link rel="prefetch" href="/assets/js/186.49c41f4f.js"><link rel="prefetch" href="/assets/js/187.34eb1a96.js"><link rel="prefetch" href="/assets/js/188.651bcdfa.js"><link rel="prefetch" href="/assets/js/189.e75e375d.js"><link rel="prefetch" href="/assets/js/19.f216d96e.js"><link rel="prefetch" href="/assets/js/190.1ec83dea.js"><link rel="prefetch" href="/assets/js/191.bbb68c4d.js"><link rel="prefetch" href="/assets/js/192.1e4bd575.js"><link rel="prefetch" href="/assets/js/193.c560196e.js"><link rel="prefetch" href="/assets/js/194.ea7c96fd.js"><link rel="prefetch" href="/assets/js/195.279e9c3a.js"><link rel="prefetch" href="/assets/js/196.79b5d677.js"><link rel="prefetch" href="/assets/js/197.78f10001.js"><link rel="prefetch" href="/assets/js/198.d665ee5a.js"><link rel="prefetch" href="/assets/js/199.37013295.js"><link rel="prefetch" href="/assets/js/20.c9849598.js"><link rel="prefetch" href="/assets/js/200.2347a83a.js"><link rel="prefetch" href="/assets/js/201.19063bbd.js"><link rel="prefetch" href="/assets/js/202.32e5ace2.js"><link rel="prefetch" href="/assets/js/203.1f87638d.js"><link rel="prefetch" href="/assets/js/204.03cf582a.js"><link rel="prefetch" href="/assets/js/205.80fe2051.js"><link rel="prefetch" href="/assets/js/206.a0d9b926.js"><link rel="prefetch" href="/assets/js/207.3502356e.js"><link rel="prefetch" href="/assets/js/208.a4c9af93.js"><link rel="prefetch" href="/assets/js/209.9511055d.js"><link rel="prefetch" href="/assets/js/21.7d11fd8e.js"><link rel="prefetch" href="/assets/js/210.dc1b8bd8.js"><link rel="prefetch" href="/assets/js/211.eec86519.js"><link rel="prefetch" href="/assets/js/212.e26acd4d.js"><link rel="prefetch" href="/assets/js/213.9a9ec01e.js"><link rel="prefetch" href="/assets/js/214.19bf4a95.js"><link rel="prefetch" href="/assets/js/215.ede08fd2.js"><link rel="prefetch" href="/assets/js/216.a9443bde.js"><link rel="prefetch" href="/assets/js/217.845fad4f.js"><link rel="prefetch" href="/assets/js/218.10a24507.js"><link rel="prefetch" href="/assets/js/219.582bf77f.js"><link rel="prefetch" href="/assets/js/22.a81c6dd1.js"><link rel="prefetch" href="/assets/js/220.75958238.js"><link rel="prefetch" href="/assets/js/221.25aa9b7d.js"><link rel="prefetch" href="/assets/js/23.e3f76b3b.js"><link rel="prefetch" href="/assets/js/24.53929924.js"><link rel="prefetch" href="/assets/js/25.6da15d03.js"><link rel="prefetch" href="/assets/js/26.208cb02b.js"><link rel="prefetch" href="/assets/js/27.0055f1bf.js"><link rel="prefetch" href="/assets/js/28.c22d8dbb.js"><link rel="prefetch" href="/assets/js/29.5274de73.js"><link rel="prefetch" href="/assets/js/3.a5ce401d.js"><link rel="prefetch" href="/assets/js/30.0c8e8d20.js"><link rel="prefetch" href="/assets/js/31.dabb2430.js"><link rel="prefetch" href="/assets/js/32.4b69344f.js"><link rel="prefetch" href="/assets/js/33.2a6fe3fa.js"><link rel="prefetch" href="/assets/js/34.b7d7a9a6.js"><link rel="prefetch" href="/assets/js/35.fc527240.js"><link rel="prefetch" href="/assets/js/36.96422d34.js"><link rel="prefetch" href="/assets/js/37.7cd0e507.js"><link rel="prefetch" href="/assets/js/38.adb87b54.js"><link rel="prefetch" href="/assets/js/39.142ea250.js"><link rel="prefetch" href="/assets/js/40.2d6a4bf1.js"><link rel="prefetch" href="/assets/js/41.6dc1c411.js"><link rel="prefetch" href="/assets/js/42.c8355471.js"><link rel="prefetch" href="/assets/js/43.eba2417f.js"><link rel="prefetch" href="/assets/js/44.cdafd4da.js"><link rel="prefetch" href="/assets/js/45.5dfd5868.js"><link rel="prefetch" href="/assets/js/46.4cde5b6f.js"><link rel="prefetch" href="/assets/js/47.1fa112a3.js"><link rel="prefetch" href="/assets/js/48.cc7fe259.js"><link rel="prefetch" href="/assets/js/49.3df09ad7.js"><link rel="prefetch" href="/assets/js/5.6ac3d9b4.js"><link rel="prefetch" href="/assets/js/50.419588dd.js"><link rel="prefetch" href="/assets/js/51.c48be90d.js"><link rel="prefetch" href="/assets/js/52.c461b61e.js"><link rel="prefetch" href="/assets/js/53.4f6ab812.js"><link rel="prefetch" href="/assets/js/54.3293f69e.js"><link rel="prefetch" href="/assets/js/55.4d866de2.js"><link rel="prefetch" href="/assets/js/56.31a53067.js"><link rel="prefetch" href="/assets/js/57.19c7e76e.js"><link rel="prefetch" href="/assets/js/58.d8dc7186.js"><link rel="prefetch" href="/assets/js/59.bdfff1b6.js"><link rel="prefetch" href="/assets/js/6.f6f62d21.js"><link rel="prefetch" href="/assets/js/60.17072b43.js"><link rel="prefetch" href="/assets/js/61.035209e3.js"><link rel="prefetch" href="/assets/js/62.0d160a8a.js"><link rel="prefetch" href="/assets/js/63.cf07039a.js"><link rel="prefetch" href="/assets/js/64.4ac28cb2.js"><link rel="prefetch" href="/assets/js/65.c4b56fcb.js"><link rel="prefetch" href="/assets/js/66.fe14252b.js"><link rel="prefetch" href="/assets/js/67.f5182f00.js"><link rel="prefetch" href="/assets/js/68.29ba900b.js"><link rel="prefetch" href="/assets/js/69.8e3c6d8f.js"><link rel="prefetch" href="/assets/js/7.5ecdfcdb.js"><link rel="prefetch" href="/assets/js/70.272781c2.js"><link rel="prefetch" href="/assets/js/71.ba3c0143.js"><link rel="prefetch" href="/assets/js/72.0036a802.js"><link rel="prefetch" href="/assets/js/73.6bd6be40.js"><link rel="prefetch" href="/assets/js/74.d81dedf2.js"><link rel="prefetch" href="/assets/js/75.757237b7.js"><link rel="prefetch" href="/assets/js/76.f5792d24.js"><link rel="prefetch" href="/assets/js/77.d8aadd25.js"><link rel="prefetch" href="/assets/js/78.e4843ab3.js"><link rel="prefetch" href="/assets/js/79.a1f0575e.js"><link rel="prefetch" href="/assets/js/8.f3b4934d.js"><link rel="prefetch" href="/assets/js/80.ea9aa602.js"><link rel="prefetch" href="/assets/js/81.2cd439e3.js"><link rel="prefetch" href="/assets/js/82.9af7b0cb.js"><link rel="prefetch" href="/assets/js/83.77ac7dfb.js"><link rel="prefetch" href="/assets/js/84.17214734.js"><link rel="prefetch" href="/assets/js/85.0775f854.js"><link rel="prefetch" href="/assets/js/86.569d43a8.js"><link rel="prefetch" href="/assets/js/87.74196356.js"><link rel="prefetch" href="/assets/js/88.fa5aad52.js"><link rel="prefetch" href="/assets/js/89.11b2daa6.js"><link rel="prefetch" href="/assets/js/9.4d480772.js"><link rel="prefetch" href="/assets/js/90.3140661f.js"><link rel="prefetch" href="/assets/js/91.3d978faa.js"><link rel="prefetch" href="/assets/js/92.41c51097.js"><link rel="prefetch" href="/assets/js/93.70f92b88.js"><link rel="prefetch" href="/assets/js/94.7d09f78c.js"><link rel="prefetch" href="/assets/js/95.d7859f94.js"><link rel="prefetch" href="/assets/js/96.104638ee.js"><link rel="prefetch" href="/assets/js/97.fa2e330a.js"><link rel="prefetch" href="/assets/js/98.e49c1821.js"><link rel="prefetch" href="/assets/js/99.c5e10809.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0c241f14.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">睿晨网</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/aboutless.html" class="nav-link">
  第一期企业网页开发
</a></div><div class="nav-item"><a href="/secondless/" class="nav-link router-link-active">
  第二期企业网站开发
</a></div><div class="nav-item"><a href="/thirdless/" class="nav-link">
  第三期移动端(H5/小程序/App)课程
</a></div><div class="nav-item"><a href="/fourthless/" class="nav-link">
  第四期web全栈课程
</a></div><div class="nav-item"><a href="/fiveless/" class="nav-link">
  第五期python课程
</a></div><div class="nav-item"><a href="/web/software/" class="nav-link">
  课程软件小案例
</a></div><div class="nav-item"><a href="/web/mysql/" class="nav-link">
  课程案例数据表
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="课程答疑汇总" class="dropdown-title"><span class="title">课程答疑</span> <span class="arrow down"></span></button> <button type="button" aria-label="课程答疑汇总" class="mobile-dropdown-title"><span class="title">课程答疑</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/answer/课程常见问题.html" class="nav-link">
  课程常见问题
</a></li><li class="dropdown-item"><!----> <a href="/deploy/" class="nav-link">
  项目部署
</a></li><li class="dropdown-item"><!----> <a href="/web/answer/免费部署SSL证书.html" class="nav-link">
  免费部署SSL证书
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="课程学习网站" class="dropdown-title"><span class="title">课程学习网站</span> <span class="arrow down"></span></button> <button type="button" aria-label="课程学习网站" class="mobile-dropdown-title"><span class="title">课程学习网站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          视频学习网站
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://study.163.com/provider/480000002289674/index.htm?share=2&amp;shareId=480000002289674" target="_blank" rel="noopener noreferrer" class="nav-link external">
  网易云课堂
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://space.bilibili.com/3493114067028034/pugv" target="_blank" rel="noopener noreferrer" class="nav-link external">
  B站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用菜单" class="dropdown-title"><span class="title">实用网站和方法</span> <span class="arrow down"></span></button> <button type="button" aria-label="实用菜单" class="mobile-dropdown-title"><span class="title">实用网站和方法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          实用方法
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/web/methods/定位相关.html" class="nav-link">
  定位相关
</a></li><li class="dropdown-subitem"><a href="/web/methods/地图相关.html" class="nav-link">
  地图相关
</a></li><li class="dropdown-subitem"><a href="/web/methods/树形结构数据转换.html" class="nav-link">
  树形结构数据转换
</a></li></ul></li><li class="dropdown-item"><h4>
          uni-app专栏
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/web/methods/uni-app专栏.html" class="nav-link">
  uni-app的UI框架
</a></li><li class="dropdown-subitem"><a href="/web/methods/uni-app如何引入库.html" class="nav-link">
  uni-app如何引入js库
</a></li></ul></li><li class="dropdown-item"><h4>
          Egg.js专栏
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/secondless/w-c/Egg.js.html" class="nav-link">
  Egg.js基础
</a></li><li class="dropdown-subitem"><a href="/secondless/w-c/egg.js基础总结.html" class="nav-link">
  Egg.js基础总结
</a></li><li class="dropdown-subitem"><a href="/secondless/w-c/egg.js重要知识详细文档.html" class="nav-link">
  Egg.js重要知识详细文档
</a></li><li class="dropdown-subitem"><a href="/secondless/w-c/ValParams API 说明.html" class="nav-link">
  Egg.js参数验证说明
</a></li><li class="dropdown-subitem"><a href="/web/mysql/Sequelize数据类型.html" class="nav-link">
  Egg.js迁移文件Sequelize数据类型
</a></li><li class="dropdown-subitem"><a href="/secondless/w-c/Egg.js接口安全防护方案.html" class="nav-link">
  Egg.js接口安全防护方案
</a></li><li class="dropdown-subitem"><a href="/web/answer/课程常见问题.html#_3-eggjs如何重置数据表-保证id每次从1开始计算" class="nav-link">
  Egg.js重置数据表每次ID为1
</a></li></ul></li><li class="dropdown-item"><h4>
          实用网站
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/web/methods/实用接口.html" class="nav-link">
  实用接口
</a></li><li class="dropdown-subitem"><a href="/web/css/" class="nav-link">
  css
</a></li><li class="dropdown-subitem"><a href="/web/vue.js/" class="nav-link">
  Vue.js
</a></li><li class="dropdown-subitem"><a href="/web/Vue3+ElementPlus/" class="nav-link">
  Vue3+ElementPlus系统
</a></li><li class="dropdown-subitem"><a href="/web/echarts/" class="nav-link">
  echarts图表
</a></li><li class="dropdown-subitem"><a href="/web/bootstrap/" class="nav-link">
  Bootstrap
</a></li><li class="dropdown-subitem"><a href="/web/IIS/" class="nav-link">
  IIS
</a></li><li class="dropdown-subitem"><a href="/web/github/" class="nav-link">
  Github
</a></li><li class="dropdown-subitem"><a href="/web/Vanta.js/" class="nav-link">
  Vanta.js网页3D背景
</a></li><li class="dropdown-subitem"><a href="/web/shop/" class="nav-link">
  商城系统推荐
</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/aboutless.html" class="nav-link">
  第一期企业网页开发
</a></div><div class="nav-item"><a href="/secondless/" class="nav-link router-link-active">
  第二期企业网站开发
</a></div><div class="nav-item"><a href="/thirdless/" class="nav-link">
  第三期移动端(H5/小程序/App)课程
</a></div><div class="nav-item"><a href="/fourthless/" class="nav-link">
  第四期web全栈课程
</a></div><div class="nav-item"><a href="/fiveless/" class="nav-link">
  第五期python课程
</a></div><div class="nav-item"><a href="/web/software/" class="nav-link">
  课程软件小案例
</a></div><div class="nav-item"><a href="/web/mysql/" class="nav-link">
  课程案例数据表
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="课程答疑汇总" class="dropdown-title"><span class="title">课程答疑</span> <span class="arrow down"></span></button> <button type="button" aria-label="课程答疑汇总" class="mobile-dropdown-title"><span class="title">课程答疑</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/answer/课程常见问题.html" class="nav-link">
  课程常见问题
</a></li><li class="dropdown-item"><!----> <a href="/deploy/" class="nav-link">
  项目部署
</a></li><li class="dropdown-item"><!----> <a href="/web/answer/免费部署SSL证书.html" class="nav-link">
  免费部署SSL证书
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="课程学习网站" class="dropdown-title"><span class="title">课程学习网站</span> <span class="arrow down"></span></button> <button type="button" aria-label="课程学习网站" class="mobile-dropdown-title"><span class="title">课程学习网站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          视频学习网站
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://study.163.com/provider/480000002289674/index.htm?share=2&amp;shareId=480000002289674" target="_blank" rel="noopener noreferrer" class="nav-link external">
  网易云课堂
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://space.bilibili.com/3493114067028034/pugv" target="_blank" rel="noopener noreferrer" class="nav-link external">
  B站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用菜单" class="dropdown-title"><span class="title">实用网站和方法</span> <span class="arrow down"></span></button> <button type="button" aria-label="实用菜单" class="mobile-dropdown-title"><span class="title">实用网站和方法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          实用方法
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/web/methods/定位相关.html" class="nav-link">
  定位相关
</a></li><li class="dropdown-subitem"><a href="/web/methods/地图相关.html" class="nav-link">
  地图相关
</a></li><li class="dropdown-subitem"><a href="/web/methods/树形结构数据转换.html" class="nav-link">
  树形结构数据转换
</a></li></ul></li><li class="dropdown-item"><h4>
          uni-app专栏
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/web/methods/uni-app专栏.html" class="nav-link">
  uni-app的UI框架
</a></li><li class="dropdown-subitem"><a href="/web/methods/uni-app如何引入库.html" class="nav-link">
  uni-app如何引入js库
</a></li></ul></li><li class="dropdown-item"><h4>
          Egg.js专栏
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/secondless/w-c/Egg.js.html" class="nav-link">
  Egg.js基础
</a></li><li class="dropdown-subitem"><a href="/secondless/w-c/egg.js基础总结.html" class="nav-link">
  Egg.js基础总结
</a></li><li class="dropdown-subitem"><a href="/secondless/w-c/egg.js重要知识详细文档.html" class="nav-link">
  Egg.js重要知识详细文档
</a></li><li class="dropdown-subitem"><a href="/secondless/w-c/ValParams API 说明.html" class="nav-link">
  Egg.js参数验证说明
</a></li><li class="dropdown-subitem"><a href="/web/mysql/Sequelize数据类型.html" class="nav-link">
  Egg.js迁移文件Sequelize数据类型
</a></li><li class="dropdown-subitem"><a href="/secondless/w-c/Egg.js接口安全防护方案.html" class="nav-link">
  Egg.js接口安全防护方案
</a></li><li class="dropdown-subitem"><a href="/web/answer/课程常见问题.html#_3-eggjs如何重置数据表-保证id每次从1开始计算" class="nav-link">
  Egg.js重置数据表每次ID为1
</a></li></ul></li><li class="dropdown-item"><h4>
          实用网站
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/web/methods/实用接口.html" class="nav-link">
  实用接口
</a></li><li class="dropdown-subitem"><a href="/web/css/" class="nav-link">
  css
</a></li><li class="dropdown-subitem"><a href="/web/vue.js/" class="nav-link">
  Vue.js
</a></li><li class="dropdown-subitem"><a href="/web/Vue3+ElementPlus/" class="nav-link">
  Vue3+ElementPlus系统
</a></li><li class="dropdown-subitem"><a href="/web/echarts/" class="nav-link">
  echarts图表
</a></li><li class="dropdown-subitem"><a href="/web/bootstrap/" class="nav-link">
  Bootstrap
</a></li><li class="dropdown-subitem"><a href="/web/IIS/" class="nav-link">
  IIS
</a></li><li class="dropdown-subitem"><a href="/web/github/" class="nav-link">
  Github
</a></li><li class="dropdown-subitem"><a href="/web/Vanta.js/" class="nav-link">
  Vanta.js网页3D背景
</a></li><li class="dropdown-subitem"><a href="/web/shop/" class="nav-link">
  商城系统推荐
</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>章节4.Egg.js和Mysql数据库进阶进一步开发网站后台</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#一、用户管理板块-以直播功能中的用户表liveuser表为例" class="sidebar-link">一、用户管理板块(以直播功能中的用户表liveuser表为例)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#二、礼物管理-以直播功能中的礼物表livegift表为例" class="sidebar-link">二、礼物管理(以直播功能中的礼物表livegift表为例)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#三、订单管理-以直播功能中的订单表liveorder表为例" class="sidebar-link">三、订单管理(以直播功能中的订单表liveorder表为例)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#初步理解关联关系" class="sidebar-link">初步理解关联关系</a></li></ul></li><li><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#四、直播间管理-以直播功能中的直播间表live表为例" class="sidebar-link">四、直播间管理(以直播功能中的直播间表live表为例)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#多模型关联查询实践" class="sidebar-link">多模型关联查询实践</a></li></ul></li><li><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#五、mysql语句进一步理解模型关联关系-mysql进阶" class="sidebar-link">五、mysql语句进一步理解模型关联关系（Mysql进阶）</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#六、企业网站栏目管理、内容管理" class="sidebar-link">六、企业网站栏目管理、内容管理</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#七、网站配置管理" class="sidebar-link">七、网站配置管理</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#八、后台初始化管理员登录逻辑" class="sidebar-link">八、后台初始化管理员登录逻辑</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#九、简单权限管理" class="sidebar-link">九、简单权限管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#_1-管理员栏目-超级管理员可以查看所有管理员-普通管理员只能看自己" class="sidebar-link">1. 管理员栏目：超级管理员可以查看所有管理员，普通管理员只能看自己</a></li><li class="sidebar-sub-header"><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#_2-权限分配" class="sidebar-link">2. 权限分配</a></li><li class="sidebar-sub-header"><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#_3-网站后台管理员简单权限分配功能实现" class="sidebar-link">3. 网站后台管理员简单权限分配功能实现</a></li></ul></li><li><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#【第二学期第3季课程】其它章节" class="sidebar-link">【第二学期第3季课程】其它章节</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#章节1-课程介绍" class="sidebar-link">章节1.课程介绍</a></li><li class="sidebar-sub-header"><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#章节2-egg-js基础" class="sidebar-link">章节2.Egg.js基础</a></li><li class="sidebar-sub-header"><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#章节3-响应式网页布局" class="sidebar-link">章节3.响应式网页布局</a></li><li class="sidebar-sub-header"><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#章节4-egg-js和mysql数据库进阶进一步开发网站后台" class="sidebar-link">章节4.Egg.js和Mysql数据库进阶进一步开发网站后台</a></li><li class="sidebar-sub-header"><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#章节5-企业网站前端部分" class="sidebar-link">章节5.企业网站前端部分</a></li></ul></li><li><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#其它学期课程" class="sidebar-link">其它学期课程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#第一学期-学习顺序-01" class="sidebar-link">第一学期（学习顺序：01）</a></li><li class="sidebar-sub-header"><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#第二学期【第1季】-学习顺序-02" class="sidebar-link">第二学期【第1季】（学习顺序：02）</a></li><li class="sidebar-sub-header"><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#第二学期【第2季】-学习顺序-03" class="sidebar-link">第二学期【第2季】（学习顺序：03）</a></li><li class="sidebar-sub-header"><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#第二学期【第3季】-学习顺序-04" class="sidebar-link">第二学期【第3季】（学习顺序：04）</a></li><li class="sidebar-sub-header"><a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0.html#第二学期【第4季】-学习顺序-05" class="sidebar-link">第二学期【第4季】（学习顺序：05）</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><blockquote><p><b>前言</b> <br><br>
基于同学们在上一章（第三章）对响应式网站后台的学习，以及我们第二章egg.js基础的学习，从本章节开始，我们将继续对网站后台进行扩展开发。
<br><br>
我们在上一章已经完成了网站后台的管理员登录、管理员板块、留言板板块的开发。那么作为普通的企业网站后台，还应该有发布新闻信息、发布产品信息、管理网站导航栏等等功能。由于接下来的这些栏目，各个栏目板块数据库表之间的关联关系，相比较于我们前面开发的管理员列表、留言板板块，会相对复杂一些，因此我们将它们放在第四章进行讲解。
<br><br>
由于考虑到我们会在后面的课程：关于小程序、APP的开发中涉及到直播功能、即时通讯功能、商城功能、高德百度腾讯地图功能、视频功能、网盘功能等等，以直播功能为例，直播功能依然需要后台对直播功能中的：用户、礼物、直播间等等板块做后台开发，因此我们借本章开发后台其它管理板块，一起给大家讲解一下关于直播的后台功能 <br><br><code>目的就是：让大家更深入的理解我们egg.js项目中的模型关联关系。</code></p></blockquote> <h2 id="一、用户管理板块-以直播功能中的用户表liveuser表为例"><a href="#一、用户管理板块-以直播功能中的用户表liveuser表为例" class="header-anchor">#</a> 一、用户管理板块(以直播功能中的用户表liveuser表为例)</h2> <blockquote><p>由于一般企业网站不存在用户管理，因此我们这里以大家感兴趣的‘直播’功能为例，讲一下用户管理板块<br>
具体查看：<a href="/secondless/w-c/直播功能中的用户表liveuser" target="_blank" title="点击查看课程文档">直播功能中的用户表liveuser</a></p></blockquote> <h2 id="二、礼物管理-以直播功能中的礼物表livegift表为例"><a href="#二、礼物管理-以直播功能中的礼物表livegift表为例" class="header-anchor">#</a> 二、礼物管理(以直播功能中的礼物表livegift表为例)</h2> <blockquote><p>具体查看：<a href="/secondless/w-c/直播功能中的礼物表livegift" target="_blank" title="点击查看课程文档">直播功能中的礼物表livegift</a></p></blockquote> <h2 id="三、订单管理-以直播功能中的订单表liveorder表为例"><a href="#三、订单管理-以直播功能中的订单表liveorder表为例" class="header-anchor">#</a> 三、订单管理(以直播功能中的订单表liveorder表为例)</h2> <h3 id="初步理解关联关系"><a href="#初步理解关联关系" class="header-anchor">#</a> 初步理解关联关系</h3> <blockquote><p>前面给大家已经讲了管理员表、留言表、用户表、礼物表，这四张表有个共同特点：就是它们每张表都是独立的，不跟其他表产生关联关系。<br>
那么不经有同学要问了：什么叫做关联关系？<br>
学习过我们上一季度（第二季）：<code>章节7.Node.js基础</code>，<code>章节9.Vue.js基础</code>的同学并不陌生，特别是最后我们举了一个案例：<code>node.js+vue.js 渲染企业网站</code>，如何来处理不同数据间的关联关系。<br>
回顾了一下我们之前讲的不同json文件数据间的关联关系之后，同学们很自然的想到，既然我们的mysql就是关系型数据库，那么它应该也可以处理表之前的关联关系吧。<br>
答案是：对的。我们的mysql数据库也可以处理表之间的关联关系。<br><br>
为了方便大家理解，我们接下来将由浅入深，逐步理解表之间的关联关系。因此，我们用直播中的订单表为例，方便大家理解。因为我们每个同学都会网购，网购购买商品都会产生订单，因此理解起来会容易一些。<br></p> <p>具体查看：<a href="/secondless/w-c/直播功能中的订单表liveorder" target="_blank" title="点击查看课程文档">直播功能中的订单表liveorder</a></p></blockquote> <h2 id="四、直播间管理-以直播功能中的直播间表live表为例"><a href="#四、直播间管理-以直播功能中的直播间表live表为例" class="header-anchor">#</a> 四、直播间管理(以直播功能中的直播间表live表为例)</h2> <h3 id="多模型关联查询实践"><a href="#多模型关联查询实践" class="header-anchor">#</a> 多模型关联查询实践</h3> <blockquote><p>我们在上节课开发后台订单列表功能中，大家已经初步感受了数据库表之间的关联关系，模型关联查询的功能。那么为了让大家深入理解模型关联查询，我们再讲解一个直播功能中的直播间功能，让大家更深入理解。
<br>
具体查看：<a href="/secondless/w-c/直播功能中的直播间表live" target="_blank" title="点击查看课程文档">直播功能中的直播间表live</a></p></blockquote> <h2 id="五、mysql语句进一步理解模型关联关系-mysql进阶"><a href="#五、mysql语句进一步理解模型关联关系-mysql进阶" class="header-anchor">#</a> 五、mysql语句进一步理解模型关联关系（Mysql进阶）</h2> <blockquote><p>我们在前面几节课分别完成了直播间订单管理、直播间管理中的观看记录、刷礼物记录、评论记录等功能，用到了模型关联关系 <code>belongsTo</code>(反向一对多) <br>
关于模型关联关系，更多的模型关联具体查看：
<a href="/secondless/w-c/egg.js重要知识详细文档.html#关联操作" target="_blank" title="点击查看课程文档">egg.js重要知识详细文档--关联操作</a> <br>
涉及的关联关系有：</p> <ol><li>一对一 hasOne (比如：一个用户对应一个用户资料)</li> <li>一对多 hasMany (比如：一个用户可以发布很多文章)</li> <li>反向一对多 belongsTo (比如：直播间观看记录关联用户模型，一个用户可以对应多个直播间观看记录，因为他可以进入多个直播间观看，用户对于观看记录就是一对多的关系，反过来观看记录属于用户belongsTo，就是反向一对多)</li> <li>多对多 belongsToMany (比如：一个用户可以关注很多用户，一个用户也可以被很多用户关注)
在这些模型关联中，反向一对多 <code>belongsTo</code> 用得最多，因此我们接下来以 模型关联中的 <code>belongsTo</code> 为例， 通过  <code>mysql语句</code> 来剖析这些关联关系，让大家对模型关联有个更深入的理解。</li></ol> <p>具体查看：<a href="/secondless/w-c/mysql数据库.html" target="_blank" title="点击查看课程文档">mysql数据库基础-三、mysql子查询和连表查询</a></p></blockquote> <h2 id="六、企业网站栏目管理、内容管理"><a href="#六、企业网站栏目管理、内容管理" class="header-anchor">#</a> 六、企业网站栏目管理、内容管理</h2> <blockquote><p>有了我们上节课的通过sql语句剖析模型关联关系的讲解，那么完成我们企业网站后台管理中的栏目管理、内容管理就是一件非常轻松的事情了。
<br><br>
如果要在后台管理（网站导航栏，栏目分类）的数据<br>
具体查看：<a href="/secondless/w-c/企业网站后台栏目管理" target="_blank" title="点击查看课程文档">企业网站后台栏目管理</a> <br><br>
如果要在后台管理网站的新闻、产品、内容等等信息，我们统称为：内容管理<br>
具体查看：<a href="/secondless/w-c/企业网站后台内容管理" target="_blank" title="点击查看课程文档">企业网站后台内容管理</a></p></blockquote> <h2 id="七、网站配置管理"><a href="#七、网站配置管理" class="header-anchor">#</a> 七、网站配置管理</h2> <blockquote><p>网站配置管理我们可以跟前面一样创建网站配置表，然后进行新增修改删除等，当然，由于网站配置比较简单，因此我们可以将配置放在json文件里面，进行操作即可。<br>
以下是一个配置示例样本，大家可根据自己的想法设计网站配置的json文件：<br></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;corporate_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;睿晨电网建设工程有限公司&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;corporate_short&quot;</span><span class="token operator">:</span> <span class="token string">&quot;睿晨电网&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;北京CBD帝国大厦999层-1001号&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;tel&quot;</span><span class="token operator">:</span> <span class="token string">&quot;010-8888-8888&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;mobile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;13858588888&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;serviceUser&quot;</span><span class="token operator">:</span> <span class="token string">&quot;张经理&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;QQ&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1582758589&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;weixin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;company_51yrc&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;weixinImg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;51yrc@126.com&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;pagetitle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;睿晨电网建设工程有限公司&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;睿晨电网建设工程有限公司成立由2021年，是一家集...&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token string">&quot;睿晨电网,电网建设,睿晨电网建设工程有限公司&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;domain&quot;</span><span class="token operator">:</span> <span class="token string">&quot;www.xxxx.com&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;copyright&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Copyright © 2024 睿晨电网建设工程有限公司 版权所有&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;icpNumber&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ICP 备案号 123456&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;cnzz&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;currentId&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>控制器 <code>app/controller/admin/config.js</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> log <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node:console'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node:fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node:path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//配置写入json文件</span>
<span class="token keyword">let</span> paths <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">dir</span><span class="token operator">:</span> <span class="token string">'./data'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">file</span><span class="token operator">:</span> <span class="token string">'./data/siteConfig.json'</span>
    <span class="token comment">//   dir:'./Appdata',</span>
    <span class="token comment">//   file:'./Appdata/data.json'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Controller <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'egg'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Controller<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ConfigController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span> <span class="token punctuation">{</span>
    <span class="token comment">// 配置列表</span>
    <span class="token keyword">async</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//读json文件</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx<span class="token punctuation">,</span> app <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getsiteConfigJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// console.log(typeof data);return;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> data <span class="token operator">==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// console.log('配置数据', JSON.stringify(data.data));</span>
            <span class="token comment">//渲染公共模版</span>
            <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">renderTemplate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'配置管理'</span><span class="token punctuation">,</span><span class="token comment">//现在网页title,面包屑导航title,页面标题</span>
                <span class="token literal-property property">data</span><span class="token operator">:</span> data<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
                <span class="token literal-property property">tempType</span><span class="token operator">:</span> <span class="token string">'table'</span><span class="token punctuation">,</span> <span class="token comment">//模板类型：table表格模板 ，form表单模板</span>
                <span class="token literal-property property">table</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token comment">//表格上方按钮,没有不要填buttons</span>
                    <span class="token literal-property property">buttons</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                        <span class="token punctuation">{</span>
                            <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/admin/config/create'</span><span class="token punctuation">,</span><span class="token comment">//新增路径</span>
                            <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'创建配置'</span><span class="token punctuation">,</span><span class="token comment">//新增 //按钮名称</span>
                            <span class="token comment">// icon: 'fa fa-plus fa-lg',//按钮图标</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">]</span><span class="token punctuation">,</span>
                    <span class="token comment">//表头</span>
                    <span class="token literal-property property">columns</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                        <span class="token punctuation">{</span>
                            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'配置信息'</span><span class="token punctuation">,</span>
                            <span class="token comment">// key: 'corporate_name',</span>
                            <span class="token keyword">class</span><span class="token operator">:</span> <span class="token string">'text-left'</span><span class="token punctuation">,</span><span class="token comment">//可选</span>
                            <span class="token comment">// width: '30%',</span>
                            <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token keyword">let</span> weixinImg <span class="token operator">=</span> item<span class="token punctuation">.</span>weixinImg<span class="token punctuation">;</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span>weixinImg<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.jpg'</span><span class="token punctuation">)</span> <span class="token operator">||</span> weixinImg<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.jpeg'</span><span class="token punctuation">)</span> <span class="token operator">||</span>
                                    weixinImg<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.png'</span><span class="token punctuation">)</span> <span class="token operator">||</span> weixinImg<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.gif'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                    <span class="token comment">// &lt;li&gt;微信二维码：${item.weixinImg}&lt;/li&gt;</span>
                                    weixinImg <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;li&gt;微信二维码：&lt;img src=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>weixinImg<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; style=&quot;width: 100px; height: 100px;&quot; /&gt;&lt;/li&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span>
                                <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
                                &lt;h5&gt;公司基本信息&lt;/h5&gt;
                                &lt;ul&gt;
                                    &lt;li&gt;公司名称：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>corporate_name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;
                                    &lt;li&gt;名称简写：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>corporate_short<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;
                                    &lt;li&gt;地址：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>address<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;
                                    &lt;li&gt;免费咨询电话：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>tel<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;
                                    &lt;li&gt;手机号：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>mobile<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;
                                    &lt;li&gt;联系人：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>serviceUser<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;
                                    &lt;li&gt;企业QQ：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span><span class="token constant">QQ</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;
                                    &lt;li&gt;联系微信号：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>weixin<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;
                                    </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>weixinImg<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
                                    &lt;li&gt;联系邮箱：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>email<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;
                                &lt;/ul&gt;
                                &lt;h5&gt;seo信息&lt;/h5&gt;
                                &lt;ul&gt;
                                    &lt;li&gt;网站主页标题：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>pagetitle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;
                                    &lt;li&gt;网页描述：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>description<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;
                                    &lt;li&gt;搜素关键字：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>keywords<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;
                                &lt;/ul&gt;
                                &lt;h5&gt;其它信息&lt;/h5&gt;
                                &lt;ul&gt;
                                    &lt;li&gt;官方网址：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>domain<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;
                                    &lt;li&gt;版权信息：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>copyright<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;
                                    &lt;li&gt;ICP 备案：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>icpNumber<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;
                                &lt;/ul&gt;
                            </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token punctuation">{</span>
                            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'操作'</span><span class="token punctuation">,</span>
                            <span class="token keyword">class</span><span class="token operator">:</span> <span class="token string">'text-right'</span><span class="token punctuation">,</span><span class="token comment">//可选</span>
                            <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'10%'</span><span class="token punctuation">,</span>
                            <span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                                <span class="token comment">//修改</span>
                                <span class="token function-variable function">edit</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/admin/config/edit/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                                <span class="token comment">//删除</span>
                                <span class="token function-variable function">delete</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/admin/config/delete/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//获取配置数据</span>
    <span class="token keyword">async</span> <span class="token function">getsiteConfigJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">//先判断是否存在这个json文件或者文件夹</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/admin/config/create'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// console.log(__dirname);//D:\【第二学期第3季】课程代码\myegg\app\controller</span>
            <span class="token comment">//D:\【第二学期第3季】课程代码\myegg\data\message.json</span>
            <span class="token comment">// console.log(path.resolve(__dirname,'../../','data/message.json'));</span>
            <span class="token comment">// let data = fs.readFileSync(path.resolve(__dirname, '../../../', 'data/siteConfig.json'), {</span>
            <span class="token comment">//   encoding: 'utf-8'</span>
            <span class="token comment">// });</span>
            <span class="token keyword">let</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>file<span class="token punctuation">,</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">encoding</span><span class="token operator">:</span> <span class="token string">'utf-8'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// console.log(JSON.parse(data).data);</span>
            <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 修改配置</span>
    <span class="token keyword">async</span> <span class="token function">edit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx<span class="token punctuation">,</span> app <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> id <span class="token operator">=</span> ctx<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
        <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getsiteConfigJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        data <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id <span class="token operator">==</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> ctx<span class="token punctuation">.</span><span class="token function">apiFail</span><span class="token punctuation">(</span><span class="token string">'该内容不存在'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">renderTemplate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            id<span class="token punctuation">,</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'修改配置'</span><span class="token punctuation">,</span><span class="token comment">//现在网页title,面包屑导航title,页面标题</span>
            <span class="token literal-property property">tempType</span><span class="token operator">:</span> <span class="token string">'form'</span><span class="token punctuation">,</span> <span class="token comment">//模板类型：table表格模板 ，form表单模板</span>
            <span class="token literal-property property">form</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">//修改配置提交地址</span>
                <span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token string">'/admin/config/update/'</span> <span class="token operator">+</span> id<span class="token punctuation">,</span>
                <span class="token comment">//  字段</span>
                <span class="token literal-property property">fields</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'公司名称'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'corporate_name'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入公司名称'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'名称简写'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'corporate_short'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入名称简写'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'地址'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'address'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入公司地址'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'免费咨询电话'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'tel'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入免费咨询电话'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'手机号'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'mobile'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入手机号'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'联系人'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'serviceUser'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入联系人'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'企业QQ'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'QQ'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入企业QQ'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'联系微信号'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'weixin'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入联系微信号'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'微信二维码'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'weixinImg'</span><span class="token punctuation">,</span>
                        <span class="token comment">//placeholder: '',</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'联系邮箱'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'email'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入联系邮箱'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'网站主页标题'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'pagetitle'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'网站主页标题'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'网页描述'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'textarea'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'description'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入网页描述'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'搜素关键字'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'keywords'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入搜素关键字，逗号隔开'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'官方网址'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'domain'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入官方网址'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'版权信息'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'copyright'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入版权信息'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'ICP 备案'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'icpNumber'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入ICP 备案号'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'cnzz统计代码'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'textarea'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'cnzz'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入cnzz统计代码'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token comment">//修改内容默认值</span>
                <span class="token literal-property property">data</span><span class="token operator">:</span> data<span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">//修改成功之后跳转到哪个页面</span>
            <span class="token literal-property property">successUrl</span><span class="token operator">:</span> <span class="token string">'/admin/config/index'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>


    <span class="token comment">// 修改配置写入json</span>
    <span class="token keyword">async</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx<span class="token punctuation">,</span> app <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token comment">//1.参数验证</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'int'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'配置id'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">corporate_name</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>  <span class="token comment">//参数类型</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//是否必须</span>
                <span class="token comment">// defValue: '', </span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'公司名称'</span> <span class="token comment">//字段含义</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">corporate_short</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'名称简写'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'地址'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">tel</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'免费咨询电话'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">mobile</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'手机号'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">serviceUser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'联系人'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token constant">QQ</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'企业QQ'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">weixin</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'联系微信号'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">weixinImg</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'微信二维码'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'联系邮箱'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">pagetitle</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'网站主页标题'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'网页描述'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">keywords</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'搜素关键字'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">domain</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'官方网址'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">copyright</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'版权信息'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">icpNumber</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'ICP 备案'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">cnzz</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'cnzz统计代码'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 参数</span>
        <span class="token keyword">const</span> id <span class="token operator">=</span> ctx<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
        <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getsiteConfigJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> index <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id <span class="token operator">==</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> ctx<span class="token punctuation">.</span><span class="token function">apiFail</span><span class="token punctuation">(</span><span class="token string">'该内容不存在'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">let</span> params <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
        params<span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'修改的数据'</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'修改json文件的数组元素索引'</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'原json文件数据'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        data<span class="token punctuation">.</span>data<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> params<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'写入json文件的最终所有数据'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>file<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'写入成功'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 创建配置界面</span>
    <span class="token keyword">async</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx<span class="token punctuation">,</span> app <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token comment">//渲染公共模版</span>
        <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">renderTemplate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'创建配置'</span><span class="token punctuation">,</span><span class="token comment">//现在网页title,面包屑导航title,页面标题</span>
            <span class="token literal-property property">tempType</span><span class="token operator">:</span> <span class="token string">'form'</span><span class="token punctuation">,</span> <span class="token comment">//模板类型：table表格模板 ，form表单模板</span>
            <span class="token literal-property property">form</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">//提交地址</span>
                <span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token string">&quot;/admin/config/save&quot;</span><span class="token punctuation">,</span>
                <span class="token comment">//  字段</span>
                <span class="token literal-property property">fields</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'公司名称'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'corporate_name'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入公司名称'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'名称简写'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'corporate_short'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入名称简写'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'地址'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'address'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入公司地址'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'免费咨询电话'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'tel'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入免费咨询电话'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'手机号'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'mobile'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入手机号'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'联系人'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'serviceUser'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入联系人'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'企业QQ'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'QQ'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入企业QQ'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'联系微信号'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'weixin'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入联系微信号'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'微信二维码'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'weixinImg'</span><span class="token punctuation">,</span>
                        <span class="token comment">//placeholder: '',</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'联系邮箱'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'email'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入联系邮箱'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'网站主页标题'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'pagetitle'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'网站主页标题'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'网页描述'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'textarea'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'description'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入网页描述'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'搜素关键字'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'keywords'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入搜素关键字，逗号隔开'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'官方网址'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'domain'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入官方网址'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'版权信息'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'copyright'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入版权信息'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'ICP 备案'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'icpNumber'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入ICP 备案号'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'cnzz统计代码'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'textarea'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'cnzz'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入cnzz统计代码'</span><span class="token punctuation">,</span>
                        <span class="token comment">// default:'默认值测试', //新增时候默认值，可选</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">//新增成功之后跳转到哪个页面</span>
            <span class="token literal-property property">successUrl</span><span class="token operator">:</span> <span class="token string">'/admin/config/index'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 创建配置提交数据</span>
    <span class="token keyword">async</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">//参数验证</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">corporate_name</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>  <span class="token comment">//参数类型</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//是否必须</span>
                <span class="token comment">// defValue: '', </span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'公司名称'</span> <span class="token comment">//字段含义</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">corporate_short</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'名称简写'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'地址'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">tel</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'免费咨询电话'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">mobile</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'手机号'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">serviceUser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'联系人'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token constant">QQ</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'企业QQ'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">weixin</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'联系微信号'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">weixinImg</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'微信二维码'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'联系邮箱'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">pagetitle</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'网站主页标题'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'网页描述'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">keywords</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'搜素关键字'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">domain</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'官方网址'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">copyright</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'版权信息'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">icpNumber</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'ICP 备案'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">cnzz</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">defValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'cnzz统计代码'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//写入数据</span>
        <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
        <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addconfig</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> paths<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//写入json文件前的处理</span>
    <span class="token keyword">async</span> <span class="token function">addconfig</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> paths</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//创建一个文件夹data</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>dir<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            fs<span class="token punctuation">.</span><span class="token function">mkdirSync</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">//判断json文件是否存在，存在说明之前写入过了，先读一下</span>
        <span class="token keyword">let</span> flag <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//存在先读取一下</span>
            <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">readconfig</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>file<span class="token punctuation">,</span> data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">//不存在，首次直接写</span>
            <span class="token keyword">let</span> ms <span class="token operator">=</span> data<span class="token punctuation">;</span>
            ms<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token comment">//加入时间,所在地等等</span>
            <span class="token comment">// ms.timestamp = new Date().getTime();</span>
            <span class="token comment">// console.log(ms);</span>
            <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            o<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            o<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token punctuation">;</span>
            o<span class="token punctuation">.</span>total <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            o<span class="token punctuation">.</span>currentId <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token comment">// console.log(o);</span>
            <span class="token comment">// console.log(JSON.stringify(o));</span>
            <span class="token comment">//写入内容,同步异步promise,以及可写流</span>
            <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">writeconfig</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>file<span class="token punctuation">,</span> o<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//存在先读取一下</span>
    <span class="token keyword">async</span> <span class="token function">readconfig</span><span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//读取内容,同步异步promise,以及可写流</span>
        fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">flag</span><span class="token operator">:</span> <span class="token string">'r'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">encoding</span><span class="token operator">:</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> oldmessage</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
            oldmessage <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>oldmessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oldmessage<span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//处理数据</span>
            data<span class="token punctuation">.</span>id <span class="token operator">=</span> oldmessage<span class="token punctuation">.</span>currentId <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token comment">//加入时间,所在地等等</span>
            <span class="token comment">// data.timestamp = new Date().getTime();</span>
            <span class="token comment">//大对象</span>
            oldmessage<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            oldmessage<span class="token punctuation">.</span>total <span class="token operator">=</span> oldmessage<span class="token punctuation">.</span>data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
            oldmessage<span class="token punctuation">.</span>currentId <span class="token operator">=</span> data<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oldmessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//写入内容,同步异步promise,以及可写流</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">writeconfig</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> oldmessage<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//写入json</span>
    <span class="token keyword">async</span> <span class="token function">writeconfig</span><span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'写入成功'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 删除配置</span>
    <span class="token keyword">async</span> <span class="token keyword">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//读json文件</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx<span class="token punctuation">,</span> app <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getsiteConfigJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'配置数据'</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> id <span class="token operator">=</span> ctx<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
        <span class="token keyword">let</span> index <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id <span class="token operator">==</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> ctx<span class="token punctuation">.</span><span class="token function">apiFail</span><span class="token punctuation">(</span><span class="token string">'该内容不存在'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        data<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        data<span class="token punctuation">.</span>total <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'删除之后即将重新写入json的数据'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">writeconfig</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>file<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//提示</span>
        ctx<span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">'删除配置成功'</span><span class="token punctuation">,</span> <span class="token string">'success'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//跳转</span>
        ctx<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/admin/config/index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> ConfigController<span class="token punctuation">;</span>

</code></pre></div><blockquote><p>路由</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 配置列表</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/admin/config/index'</span><span class="token punctuation">,</span> controller<span class="token punctuation">.</span>admin<span class="token punctuation">.</span>config<span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//修改配置</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/admin/config/edit/:id'</span><span class="token punctuation">,</span> controller<span class="token punctuation">.</span>admin<span class="token punctuation">.</span>config<span class="token punctuation">.</span>edit<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//修改配置写入json</span>
router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/admin/config/update/:id'</span><span class="token punctuation">,</span> controller<span class="token punctuation">.</span>admin<span class="token punctuation">.</span>config<span class="token punctuation">.</span>update<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建配置</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/admin/config/create'</span><span class="token punctuation">,</span> controller<span class="token punctuation">.</span>admin<span class="token punctuation">.</span>config<span class="token punctuation">.</span>create<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建配置提交数据</span>
router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/admin/config/save'</span><span class="token punctuation">,</span> controller<span class="token punctuation">.</span>admin<span class="token punctuation">.</span>config<span class="token punctuation">.</span>save<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//删除配置</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/admin/config/delete/:id'</span><span class="token punctuation">,</span> controller<span class="token punctuation">.</span>admin<span class="token punctuation">.</span>config<span class="token punctuation">.</span>delete<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="八、后台初始化管理员登录逻辑"><a href="#八、后台初始化管理员登录逻辑" class="header-anchor">#</a> 八、后台初始化管理员登录逻辑</h2> <blockquote><p>后台上线初期，数据库和json文件都是空的，没有任何数据（除非将开发环境的数据库和json文件拷贝到线上服务器），那么就意味着管理员表也是空的，无法进行登录，因此一般情况下，后台上线初期，需要手动添加一个超级管理员账号。<br><br>
给 <code>manager</code>表新增两个字段：status（状态：1：启用，0：禁用）和 super（是否超级管理员 1是，0：否）<br><br>
迁移文件 <code>database/migrations/-init-manager.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">INTEGER</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">allowNull</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">defaultValue</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">comment</span><span class="token operator">:</span> <span class="token string">'状态：1：启用，0：禁用'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token keyword">super</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">INTEGER</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">allowNull</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">defaultValue</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">comment</span><span class="token operator">:</span> <span class="token string">'是否超级管理员 1是，0：否'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>模型文件 <code>app/model/manager.js</code> 同上，加上这两个字段</p></blockquote> <p>注：迁移文件的修改不会影响到本项目（会在以后的项目中才会在<code>manager</code>表生效这两个字段），如果本项目要生效，需直接修改数据库manager表字段，新增这2个字段即可<br><br>
（或者数据库重新初始化）</p> <blockquote><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 升级数据库-创建数据表</span>
npx sequelize db<span class="token operator">:</span>migrate
<span class="token comment">// 如果有问题需要回滚，可以通过 `db:migrate:undo` 回退一个变更</span>
npx sequelize db<span class="token operator">:</span>migrate<span class="token operator">:</span>undo
<span class="token comment">// 可以通过 `db:migrate:undo:all` 回退到初始状态</span>
npx sequelize db<span class="token operator">:</span>migrate<span class="token operator">:</span>undo<span class="token operator">:</span>all
</code></pre></div></blockquote> <h4 id="后台初始化管理员登录逻辑"><a href="#后台初始化管理员登录逻辑" class="header-anchor">#</a> 后台初始化管理员登录逻辑</h4> <blockquote><p>这个时候需要考虑，当项目刚初始化的时候，由于数据库的所有表都没有内容，当然也包括管理员表没有管理员，此时可在管理员登录界面调整一下，初始化创建一个管理员，并且该管理员角色是：超级管理员<br></p></blockquote> <ol><li>控制器 <code>app/controller/admin/home.js</code></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//管理员登录页面---后台登录页面</span>
<span class="token keyword">async</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx<span class="token punctuation">,</span>app <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> toast <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>cookies<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'toast'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
        <span class="token literal-property property">encrypt</span><span class="token operator">:</span><span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    toast <span class="token operator">=</span> toast <span class="token operator">?</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>toast<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token comment">// 新增初始化逻辑，当没有管理员的时候新增一个超级管理员</span>
    <span class="token keyword">let</span> manager <span class="token operator">=</span> <span class="token keyword">await</span> app<span class="token punctuation">.</span>model<span class="token punctuation">.</span>Manager<span class="token punctuation">.</span><span class="token function">findAndCountAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> pageobj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>manager<span class="token punctuation">.</span>count <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// console.log('应该创建首个超级管理员');</span>
        pageobj<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'createSuperManager'</span><span class="token punctuation">;</span>
        pageobj<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'创建后台首个超级管理员账户'</span><span class="token punctuation">;</span>
        pageobj<span class="token punctuation">.</span>h1 <span class="token operator">=</span> <span class="token string">'创建超级管理员'</span><span class="token punctuation">;</span>
        pageobj<span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token string">'创建后台首个超级管理员账户'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token comment">// console.log('正常登录');</span>
        pageobj<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'login'</span><span class="token punctuation">;</span>
        pageobj<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'登录'</span><span class="token punctuation">;</span>
        pageobj<span class="token punctuation">.</span>h1 <span class="token operator">=</span> <span class="token string">'登 录'</span><span class="token punctuation">;</span>
        pageobj<span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token string">'后台管理中心欢迎您'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'admin/home/login.html'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
        toast<span class="token punctuation">,</span>
        pageobj
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 创建超级管理员账号</span>
<span class="token keyword">async</span> <span class="token function">createSuperManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx<span class="token punctuation">,</span>app <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token comment">//超级管理员是数据库没有管理员的时候才创建的</span>
    <span class="token keyword">let</span> manager <span class="token operator">=</span> <span class="token keyword">await</span> app<span class="token punctuation">.</span>model<span class="token punctuation">.</span>Manager<span class="token punctuation">.</span><span class="token function">findAndCountAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>manager<span class="token punctuation">.</span>count <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> ctx<span class="token punctuation">.</span><span class="token function">apiFail</span><span class="token punctuation">(</span><span class="token string">'非法操作，系统拒绝您的请求'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//1.参数验证</span>
    ctx<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>  <span class="token comment">//参数类型</span>
        <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//是否必须</span>
        <span class="token comment">// defValue: '', </span>
        <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'管理员账号'</span> <span class="token comment">//字段含义</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// defValue: '', </span>
        <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'管理员密码'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 拿参数</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> username<span class="token punctuation">,</span> password <span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>body<span class="token punctuation">;</span>

    <span class="token keyword">await</span> app<span class="token punctuation">.</span>model<span class="token punctuation">.</span>Manager<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        username<span class="token punctuation">,</span>
        password<span class="token punctuation">,</span>
        <span class="token literal-property property">status</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token keyword">super</span><span class="token operator">:</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token comment">//超级管理员</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    ctx<span class="token punctuation">.</span><span class="token function">apiSuccess</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>路由 <code>app/router/admin/admin.js</code></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建超级管理员</span>
router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/admin/createSuperManager'</span><span class="token punctuation">,</span> controller<span class="token punctuation">.</span>admin<span class="token punctuation">.</span>home<span class="token punctuation">.</span>createSuperManager<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>中间件加上创建超级管理员免登录</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 对中间件adminAuth进一步配置</span>
config<span class="token punctuation">.</span>adminAuth <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">ignore</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token operator">...</span>
        <span class="token string">&quot;/admin/createSuperManager&quot;</span><span class="token punctuation">,</span>
        <span class="token operator">...</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>模版 <code>app/view/admin/home/login.html</code></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;login-right&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;login-right-wrap&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>pageobj<span class="token punctuation">.</span>h1<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;account-subtitle&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>pageobj<span class="token punctuation">.</span>p<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Form <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>form<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-group&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-control&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
                    placeholder<span class="token operator">=</span><span class="token string">&quot;输入管理员账号...&quot;</span>
                    v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;form.username&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-group&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-control&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
                    placeholder<span class="token operator">=</span><span class="token string">&quot;输入管理员密码...&quot;</span>
                    v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;form.password&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-group&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button
                    <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn btn-primary btn-block&quot;</span>
                    type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span>
                    @click<span class="token punctuation">.</span>stop<span class="token punctuation">.</span>prevent<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token string">'登 录'</span>  <span class="token keyword">if</span> pageobj<span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token string">'login'</span> <span class="token keyword">else</span> <span class="token string">'创建超级管理员'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">...</span>
<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//console.log('提交登录',this.form);</span>
        <span class="token keyword">const</span> type <span class="token operator">=</span> <span class="token string">&quot;{{pageobj.type}}&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">// console.log('类型',type);</span>
        <span class="token keyword">const</span> url <span class="token operator">=</span> type <span class="token operator">==</span> <span class="token string">'createSuperManager'</span> <span class="token operator">?</span> 
        <span class="token string-property property">'/admin/createSuperManager?_csrf={{ctx.csrf|safe}}'</span> <span class="token operator">:</span> 
        <span class="token string">&quot;/admin/loginevent?_csrf={{ctx.csrf|safe}}&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">// console.log('提交地址',url);</span>
        <span class="token comment">// return;</span>
        $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span> 
            <span class="token literal-property property">url</span><span class="token operator">:</span>url<span class="token punctuation">,</span>
            <span class="token literal-property property">contentType</span><span class="token operator">:</span><span class="token string">'application/json;charset=UTF-8;'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response<span class="token punctuation">,</span> stutas<span class="token punctuation">,</span> xhr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
                <span class="token keyword">const</span> msg <span class="token operator">=</span> type <span class="token operator">==</span> <span class="token string">'createSuperManager'</span> <span class="token operator">?</span> <span class="token string">&quot;创建超级管理员成功&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;登录成功&quot;</span><span class="token punctuation">;</span>
                Vueapp<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>toast<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    msg<span class="token punctuation">,</span>
                    <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'success'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">delay</span><span class="token operator">:</span><span class="token number">1000</span><span class="token punctuation">,</span>
                    <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token comment">// 跳转到某个页面</span>
                        <span class="token keyword">const</span> href <span class="token operator">=</span> type <span class="token operator">==</span> <span class="token string">'createSuperManager'</span> <span class="token operator">?</span> <span class="token string">'/admin/login'</span> <span class="token operator">:</span> <span class="token string">&quot;/admin&quot;</span>
                        window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> href<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">error</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">// console.log(e)</span>
                Vueapp<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>toast<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">msg</span><span class="token operator">:</span>e<span class="token punctuation">.</span>responseJSON<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
                    <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'danger'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">delay</span><span class="token operator">:</span><span class="token number">3000</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="九、简单权限管理"><a href="#九、简单权限管理" class="header-anchor">#</a> 九、简单权限管理</h2> <h3 id="_1-管理员栏目-超级管理员可以查看所有管理员-普通管理员只能看自己"><a href="#_1-管理员栏目-超级管理员可以查看所有管理员-普通管理员只能看自己" class="header-anchor">#</a> 1. 管理员栏目：超级管理员可以查看所有管理员，普通管理员只能看自己</h3> <p><code>控制器 app/controller/admin/manager.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//创建管理员列表页面</span>
  <span class="token keyword">async</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>

    <span class="token comment">//超级管理员的特殊权限</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>session<span class="token punctuation">.</span>auth<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> buttons <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> columns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>session<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>super <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      buttons <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">buttons</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/admin/manager/create'</span><span class="token punctuation">,</span><span class="token comment">//新增路径</span>
            <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'新增管理员'</span><span class="token punctuation">,</span><span class="token comment">//新增 //按钮名称</span>
            <span class="token comment">// icon: 'fa fa-plus fa-lg',//按钮图标</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
      <span class="token comment">//禁用功能</span>
      columns <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'可用状态'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">'status'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span><span class="token comment">//可选</span>
            <span class="token keyword">class</span><span class="token operator">:</span> <span class="token string">'text-center'</span><span class="token punctuation">,</span><span class="token comment">//可选</span>
            <span class="token literal-property property">hidekeyData</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//是否隐藏key对应的数据</span>
            <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'可用状态里面每个item'</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'可用'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'禁用'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class=&quot;btn-group btn-group-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    str <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;button type=&quot;button&quot; class=&quot;btn btn-light&quot; data=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;
                    value=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;
                    @click=&quot;changeBtnStatus('status','btn-group-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,'manager','Manager')&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/button&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                str <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> str<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      data <span class="token operator">=</span> <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token string">'Manager'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> ctx<span class="token punctuation">.</span>session<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>id
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//渲染公共模版</span>
    <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">renderTemplate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'管理员列表'</span><span class="token punctuation">,</span><span class="token comment">//现在网页title,面包屑导航title,页面标题</span>
      data<span class="token punctuation">,</span>
      <span class="token literal-property property">tempType</span><span class="token operator">:</span> <span class="token string">'table'</span><span class="token punctuation">,</span> <span class="token comment">//模板类型：table表格模板 ，form表单模板</span>
      <span class="token literal-property property">table</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">//表格上方按钮,没有不要填buttons</span>
        <span class="token comment">// buttons: [</span>
        <span class="token comment">//   {</span>
        <span class="token comment">//     url: '/admin/manager/create',//新增路径</span>
        <span class="token comment">//     desc: '新增管理员',//新增 //按钮名称</span>
        <span class="token comment">//     // icon: 'fa fa-plus fa-lg',//按钮图标</span>
        <span class="token comment">//   }</span>
        <span class="token comment">// ],</span>
        <span class="token operator">...</span>buttons<span class="token punctuation">,</span>
        <span class="token comment">//表头</span>
        <span class="token literal-property property">columns</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token operator">...</span>
          <span class="token operator">...</span>columns<span class="token punctuation">,</span>
          <span class="token operator">...</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>


<span class="token comment">//创建管理员提交数据</span>
<span class="token keyword">async</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">//超级管理员的特殊权限</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>session<span class="token punctuation">.</span>auth<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>session<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>super <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">apiFail</span><span class="token punctuation">(</span><span class="token string">'您无权操作此项功能'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token operator">...</span>

<span class="token punctuation">}</span>


<span class="token comment">//删除管理员功能</span>
<span class="token keyword">async</span> <span class="token keyword">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx<span class="token punctuation">,</span> app <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> id <span class="token operator">=</span> ctx<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">;</span>

    <span class="token comment">//超级管理员的特殊权限，普通管理员只能删除自己</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>session<span class="token punctuation">.</span>auth<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>session<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>super <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>session<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>id <span class="token operator">==</span> id <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>session<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>super <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">await</span> app<span class="token punctuation">.</span>model<span class="token punctuation">.</span>Manager<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">where</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            id
        <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//提示</span>
        ctx<span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">'管理员删除成功'</span><span class="token punctuation">,</span> <span class="token string">'success'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//跳转</span>
        ctx<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/admin/manager/index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">apiFail</span><span class="token punctuation">(</span><span class="token string">'您无权操作此项功能'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token comment">//修改管理员数据功能</span>
<span class="token keyword">async</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>session<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>super <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>session<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>id <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">apiFail</span><span class="token punctuation">(</span><span class="token string">'您无权操作此项功能'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">...</span>
<span class="token punctuation">}</span>



</code></pre></div><h3 id="_2-权限分配"><a href="#_2-权限分配" class="header-anchor">#</a> 2. 权限分配</h3> <p><code>data/root.json</code> <br>
图标查找：<a href="https://fontawesome.dashgame.com/" target="_blank" rel="noopener noreferrer">https://fontawesome.dashgame.com/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">//初步</span>
<span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;主面板&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fe fe-home&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;管理员&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fe fe-user-plus&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/manager/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;留言板&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fe fe-document&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/message/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;直播用户&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-user-o&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/liveuser/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;直播礼物管理&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-user-o&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/livegift/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;直播订单管理&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-user-o&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/liveorder/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;直播间管理&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-user-o&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/live-/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;分类管理&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-user-o&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/category/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;新闻内容管理&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-user-o&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/news/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;配置管理&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-user-o&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/config/index&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token comment">//转成树形结构</span>
<span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;网站&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-chrome&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;主面板&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-pie-chart&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;管理员&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fe fe-user-plus&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/manager/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;留言板&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fe fe-document&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/message/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;分类管理&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-list&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/category/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;新闻内容管理&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-file-text-o&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/news/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;配置管理&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-wrench&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/config/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;直播&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-video-camera&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;直播用户&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-venus-mars&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/liveuser/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;直播礼物管理&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-gift&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/livegift/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;直播订单管理&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-credit-card&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/liveorder/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;直播间管理&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-tv&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/live-/index&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>中间件菜单 <code>app/middleware/admin_auth.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">option<span class="token punctuation">,</span> app</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">adminMenu</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// let menus = [</span>
        <span class="token comment">//     { name: '主面板', icon: 'fe fe-home', url: '/admin' },</span>
        <span class="token comment">//     { name: '管理员', icon: 'fe fe-user-plus', url: '/admin/manager/index' },</span>
        <span class="token comment">//     { name: '留言板', icon: 'fe fe-document', url: '/admin/message/index' },</span>
        <span class="token comment">//     { name: '直播用户', icon: 'fa fa-user-o', url: '/admin/liveuser/index' },</span>
        <span class="token comment">//     { name: '直播礼物管理', icon: 'fa fa-user-o', url: '/admin/livegift/index' },</span>
        <span class="token comment">//     { name: '直播订单管理', icon: 'fa fa-user-o', url: '/admin/liveorder/index' },</span>
        <span class="token comment">//     { name: '直播间管理', icon: 'fa fa-user-o', url: '/admin/live-/index' },</span>
        <span class="token comment">//     { name: '分类管理', icon: 'fa fa-user-o', url: '/admin/category/index' },</span>
        <span class="token comment">//     { name: '新闻内容管理', icon: 'fa fa-user-o', url: '/admin/news/index' },</span>
        <span class="token comment">//     { name: '配置管理', icon: 'fa fa-user-o', url: '/admin/config/index' },</span>
        <span class="token comment">// ];</span>
        <span class="token keyword">let</span> menus <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span><span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string-property property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;网站&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-chrome&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string-property property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;主面板&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-pie-chart&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string-property property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>  <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;管理员&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fe fe-user-plus&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/manager/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string-property property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>  <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;留言板&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fe fe-document&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/message/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string-property property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;分类管理&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-list&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/category/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string-property property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;新闻内容管理&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-file-text-o&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/news/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token string-property property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;配置管理&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-wrench&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/config/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string-property property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;直播&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-video-camera&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token string-property property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;直播用户&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-venus-mars&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/liveuser/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string-property property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;直播礼物管理&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-gift&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/livegift/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token string-property property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;直播订单管理&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-credit-card&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/liveorder/index&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token string-property property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;直播间管理&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fa fa-tv&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/admin/live-/index&quot;</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">// 和我们分页模版类似，通过ctx.locals对象挂载代码</span>
        ctx<span class="token punctuation">.</span>locals<span class="token punctuation">.</span>menus <span class="token operator">=</span> menus<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">//   console.log('当前请求地址', ctx.request.url)</span>
            <span class="token comment">//   console.log('遍历项地址', item.url)</span>
            <span class="token keyword">let</span> baseURL <span class="token operator">=</span> item<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'/index'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//   console.log('处理之后遍历项地址', baseURL);</span>
            <span class="token comment">//   console.log('判断',ctx.request.url.startsWith(baseURL));</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>url <span class="token operator">==</span> <span class="token string">'/admin'</span> <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>url <span class="token operator">==</span> <span class="token string">'/admin'</span><span class="token punctuation">)</span> <span class="token operator">||</span>
                <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>url <span class="token operator">!=</span> <span class="token string">'/admin'</span> <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>url <span class="token operator">!=</span> <span class="token string">'/admin'</span> <span class="token operator">&amp;&amp;</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>baseURL<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
            <span class="token punctuation">)</span> <span class="token punctuation">{</span>
                item<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token string">'active'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">{</span>
                item<span class="token punctuation">.</span>style <span class="token operator">=</span> <span class="token string">'text-indent:2em'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                item<span class="token punctuation">.</span>style <span class="token operator">=</span> <span class="token string">'cursor:default'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">return</span> item<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//    console.log(ctx.locals.menus);</span>

        <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>菜单模版 <code>app/view/admin/layout/_slider.html</code></p> <div class="language-html extra-class"><pre class="language-html"><code>{% for item in ctx.locals.menus %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{item.active}}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{item.url}}<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token punctuation">{</span><span class="token punctuation">{</span>item.style<span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{item.icon}}<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
{% endfor %}
</code></pre></div><h3 id="_3-网站后台管理员简单权限分配功能实现"><a href="#_3-网站后台管理员简单权限分配功能实现" class="header-anchor">#</a> 3. 网站后台管理员简单权限分配功能实现</h3> <blockquote><p>（由于内容较多，单独放在新页面讲解） 具体查看：<a href="/secondless/w-c/网站后台管理员简单权限分配功能实现" target="_blank" title="点击查看课程文档">网站后台管理员简单权限分配功能实现</a></p></blockquote> <p><br><br><br><br><br></p> <h2 id="【第二学期第3季课程】其它章节"><a href="#【第二学期第3季课程】其它章节" class="header-anchor">#</a> 【第二学期第3季课程】其它章节</h2> <h3 id="章节1-课程介绍"><a href="#章节1-课程介绍" class="header-anchor">#</a> <a href="/secondless/w-c" title="章节1.课程介绍">章节1.课程介绍</a></h3> <h3 id="章节2-egg-js基础"><a href="#章节2-egg-js基础" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js" title="章节2.Egg.js基础">章节2.Egg.js基础</a></h3> <h4 id="一、关于egg-js"><a href="#一、关于egg-js" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#一、关于egg-js" style="margin-left:40px;">一、关于Egg.js</a></h4> <h5 id="_1-安装egg-js项目"><a href="#_1-安装egg-js项目" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_1-安装egg-js项目" style="margin-left:70px;">① 安装Egg.js项目</a></h5> <h5 id="_2-写一个api接口进行测试"><a href="#_2-写一个api接口进行测试" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_2-写一个api接口进行测试" style="margin-left:70px;">② 写一个api接口进行测试</a></h5> <h5 id="_3-说明一下-关于调试课件代码的问题"><a href="#_3-说明一下-关于调试课件代码的问题" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_3-说明一下-关于调试课件代码的问题" style="margin-left:70px;">③ 说明一下，关于调试课件代码的问题</a></h5> <h5 id="_4-自定义创建一个控制器"><a href="#_4-自定义创建一个控制器" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_4-自定义创建一个控制器" style="margin-left:70px;">④ 自定义创建一个控制器</a></h5> <h4 id="二、eggjs中的get请求post请求处理"><a href="#二、eggjs中的get请求post请求处理" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#二、eggjs中的get请求post请求处理" style="margin-left:40px;">二、eggjs中的get请求post请求处理</a></h4> <h5 id="_1-get方式路由传参-带-获取参数-ctx-query-参数名-不带-获取参数-ctx-params-参数名"><a href="#_1-get方式路由传参-带-获取参数-ctx-query-参数名-不带-获取参数-ctx-params-参数名" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_1-get方式路由传参-带-获取参数-ctx-query-参数名-不带-获取参数-ctx-params-参数名" style="margin-left:70px;">① get方式路由传参：带?获取参数 ctx.query.参数名，不带?获取参数 ctx.params.参数名</a></h5> <h5 id="_2-设置响应状态码-ctx-status"><a href="#_2-设置响应状态码-ctx-status" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_2-设置响应状态码-ctx-status" style="margin-left:70px;">② 设置响应状态码： ctx.status</a></h5> <h5 id="_3-post请求参数处理"><a href="#_3-post请求参数处理" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_3-post请求参数处理" style="margin-left:70px;">③ post请求参数处理</a></h5> <h5 id="一、安装get-post等请求的调试工具-postman"><a href="#一、安装get-post等请求的调试工具-postman" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#一、安装get-post等请求的调试工具-postman" style="margin-left:70px;">一、安装get/post等请求的调试工具：postman</a></h5> <h5 id="_1-下载postman"><a href="#_1-下载postman" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_1-下载postman" style="margin-left:100px;">1. 下载postman</a></h5> <h5 id="_2-安装postman"><a href="#_2-安装postman" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_2-安装postman" style="margin-left:100px;">2. 安装postman</a></h5> <h5 id="二、post请求获取参数-ctx-request-body"><a href="#二、post请求获取参数-ctx-request-body" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#二、post请求获取参数-ctx-request-body" style="margin-left:70px;">二、post请求获取参数：ctx.request.body</a></h5> <h5 id="_1-关闭csrf功能开启跨域请求"><a href="#_1-关闭csrf功能开启跨域请求" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_1-关闭csrf功能开启跨域请求" style="margin-left:100px;">1. 关闭csrf功能开启跨域请求</a></h5> <h5 id="_2-eggjs中post请求-ctx-request-body"><a href="#_2-eggjs中post请求-ctx-request-body" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_2-eggjs中post请求-ctx-request-body" style="margin-left:100px;">2. eggjs中post请求：ctx.request.body</a></h5> <h4 id="三、案例-eggjs-postman测试工具完成留言数据写入json文件"><a href="#三、案例-eggjs-postman测试工具完成留言数据写入json文件" class="header-anchor">#</a> <a href="/secondless/w-c/eggjs+postman测试工具将留言写入json文件.html" style="margin-left:40px;">三、案例：eggjs + postman测试工具完成留言数据写入json文件</a></h4> <h4 id="四、mysql-mysql-数据库基础"><a href="#四、mysql-mysql-数据库基础" class="header-anchor">#</a> <a href="/secondless/w-c/mysql数据库.html" style="margin-left:40px;">四、mysql（MySQL）数据库基础</a></h4> <h4 id="五、eggjs项目中sequelize模型创建mysql数据库"><a href="#五、eggjs项目中sequelize模型创建mysql数据库" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#五、eggjs项目中sequelize模型创建mysql数据库" style="margin-left:40px;">五、eggjs项目中sequelize模型创建mysql数据库</a></h4> <h5 id="_1-安装egg-sequelize-插件"><a href="#_1-安装egg-sequelize-插件" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_1-安装egg-sequelize-插件" style="margin-left:70px;">1.安装egg-sequelize 插件</a></h5> <h5 id="_2-在config-plugin-js中引入-egg-sequelize-插件"><a href="#_2-在config-plugin-js中引入-egg-sequelize-插件" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_2-在config-plugin-js中引入-egg-sequelize-插件" style="margin-left:70px;">2. 在config/plugin.js中引入 egg-sequelize 插件</a></h5> <h5 id="_3-在config-config-default-js中配置数据库连接"><a href="#_3-在config-config-default-js中配置数据库连接" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_3-在config-config-default-js中配置数据库连接" style="margin-left:70px;">3. 在config/config.default.js中配置数据库连接</a></h5> <h5 id="_4-安装-sequelize-cli插件"><a href="#_4-安装-sequelize-cli插件" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_4-安装-sequelize-cli插件" style="margin-left:70px;">4. 安装 sequelize-cli插件</a></h5> <h5 id="_5-数据库-migrations-迁移文件相关的内容都放在database目录下"><a href="#_5-数据库-migrations-迁移文件相关的内容都放在database目录下" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_5-数据库-migrations-迁移文件相关的内容都放在database目录下" style="margin-left:70px;">5. 数据库 Migrations 迁移文件相关的内容都放在database目录下</a></h5> <h5 id="_6-初始化-migrations-配置文件和目录"><a href="#_6-初始化-migrations-配置文件和目录" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_6-初始化-migrations-配置文件和目录" style="margin-left:70px;">6. 初始化 Migrations 配置文件和目录</a></h5> <h5 id="_7-在生成的database-config-json-修改一下配置内容"><a href="#_7-在生成的database-config-json-修改一下配置内容" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_7-在生成的database-config-json-修改一下配置内容" style="margin-left:70px;">7. 在生成的database/config.json 修改一下配置内容</a></h5> <h5 id="_8-创建数据库"><a href="#_8-创建数据库" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_8-创建数据库" style="margin-left:70px;">8. 创建数据库</a></h5> <h5 id="_9-创建数据库迁移文件"><a href="#_9-创建数据库迁移文件" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_9-创建数据库迁移文件" style="margin-left:70px;">9. 创建数据库迁移文件</a></h5> <h5 id="_10-执行-migrate-进行数据库变更创建表"><a href="#_10-执行-migrate-进行数据库变更创建表" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_10-执行-migrate-进行数据库变更创建表" style="margin-left:70px;">10. 执行 migrate 进行数据库变更创建表</a></h5> <h4 id="六、egg-js项目中sequelize模型新增数据到数据库"><a href="#六、egg-js项目中sequelize模型新增数据到数据库" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#六、egg-js项目中sequelize模型新增数据到数据库" style="margin-left:40px;">六、egg.js项目中sequelize模型新增数据到数据库</a></h4> <h5 id="_1-创建模型文件"><a href="#_1-创建模型文件" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_1-创建模型文件" style="margin-left:70px;">1. 创建模型文件</a></h5> <h5 id="_2-编写模型文件"><a href="#_2-编写模型文件" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_2-编写模型文件" style="margin-left:70px;">2. 编写模型文件</a></h5> <h5 id="_3-插入一条数据到数据库-create方法"><a href="#_3-插入一条数据到数据库-create方法" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_3-插入一条数据到数据库-create方法" style="margin-left:70px;">3. 插入一条数据到数据库：create方法</a></h5> <h5 id="_3-1-定义路由"><a href="#_3-1-定义路由" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_3-1-定义路由" style="margin-left:100px;">3.1 定义路由</a></h5> <h5 id="_3-2-定义控制器"><a href="#_3-2-定义控制器" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_3-2-定义控制器" style="margin-left:100px;">3.2 定义控制器</a></h5> <h5 id="_4-批量插入数据到数据库-bulkcreate方法"><a href="#_4-批量插入数据到数据库-bulkcreate方法" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_4-批量插入数据到数据库-bulkcreate方法" style="margin-left:70px;">4. 批量插入数据到数据库：bulkCreate方法</a></h5> <h5 id="_5-修改器set-方法-数据插入到数据库前可自动修改成指定要求的数据"><a href="#_5-修改器set-方法-数据插入到数据库前可自动修改成指定要求的数据" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_5-修改器set-方法-数据插入到数据库前可自动修改成指定要求的数据" style="margin-left:70px;">5. 修改器set()方法：数据插入到数据库前可自动修改成指定要求的数据</a></h5> <h4 id="七、egg-js项目查询数据"><a href="#七、egg-js项目查询数据" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#七、egg-js项目查询数据" style="margin-left:40px;">七、egg.js项目查询数据</a></h4> <h5 id="_1-查询数据库中的单个数据-主键查询方法-findbypk-主键字段-、如果需要多个条件-可以使用findone方法"><a href="#_1-查询数据库中的单个数据-主键查询方法-findbypk-主键字段-、如果需要多个条件-可以使用findone方法" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_1-查询数据库中的单个数据-主键查询方法-findbypk-主键字段-、如果需要多个条件-可以使用findone方法" style="margin-left:70px;">1. 查询数据库中的单个数据：主键查询方法：findByPk(主键字段)、如果需要多个条件，可以使用findOne方法</a></h5> <h5 id="_2-查询数据库中的多个数据-查询多个findall-查询多个并统计条数findandcountall"><a href="#_2-查询数据库中的多个数据-查询多个findall-查询多个并统计条数findandcountall" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_2-查询数据库中的多个数据-查询多个findall-查询多个并统计条数findandcountall" style="margin-left:70px;">2. 查询数据库中的多个数据：查询多个findAll()，查询多个并统计条数findAndCountAll()</a></h5> <h5 id="_3-获取器get-方法-查询数据后可自动修改成指定要求的数据"><a href="#_3-获取器get-方法-查询数据后可自动修改成指定要求的数据" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_3-获取器get-方法-查询数据后可自动修改成指定要求的数据" style="margin-left:70px;">3. 获取器get()方法：查询数据后可自动修改成指定要求的数据</a></h5> <h4 id="八、egg-js项目sequelize模型where操作符"><a href="#八、egg-js项目sequelize模型where操作符" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#八、egg-js项目sequelize模型where操作符" style="margin-left:40px;">八、egg.js项目sequelize模型where操作符</a></h4> <h4 id="示例"><a href="#示例" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#示例" style="margin-left:70px;">示例</a></h4> <h5 id="_1-where操作符"><a href="#_1-where操作符" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_1-where操作符" style="margin-left:100px;">1. where操作符</a></h5> <h5 id="_2-where操作符范围选项"><a href="#_2-where操作符范围选项" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_2-where操作符范围选项" style="margin-left:100px;">2. where操作符范围选项</a></h5> <h4 id="九、egg-js项目sequelize模型查询结果指定字段、排序、分页"><a href="#九、egg-js项目sequelize模型查询结果指定字段、排序、分页" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#九、egg-js项目sequelize模型查询结果指定字段、排序、分页" style="margin-left:40px;">九、egg.js项目sequelize模型查询结果指定字段、排序、分页</a></h4> <h5 id="_1-attributes属性指定返回的字段-exclude属性指定排除的字段"><a href="#_1-attributes属性指定返回的字段-exclude属性指定排除的字段" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_1-attributes属性指定返回的字段-exclude属性指定排除的字段" style="margin-left:70px;">1. attributes属性指定返回的字段，exclude属性指定排除的字段</a></h5> <h5 id="_2-排序-order"><a href="#_2-排序-order" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_2-排序-order" style="margin-left:70px;">2. 排序：order</a></h5> <h5 id="_3-分页-limit指定每页返回多少条数据、offset指定偏移量"><a href="#_3-分页-limit指定每页返回多少条数据、offset指定偏移量" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_3-分页-limit指定每页返回多少条数据、offset指定偏移量" style="margin-left:70px;">3. 分页：limit指定每页返回多少条数据、offset指定偏移量</a></h5> <h5 id="示例-2"><a href="#示例-2" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#示例-2" style="margin-left:70px;">示例</a></h5> <h4 id="十、egg-js项目sequelize模型更新数据"><a href="#十、egg-js项目sequelize模型更新数据" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#十、egg-js项目sequelize模型更新数据" style="margin-left:40px;">十、egg.js项目sequelize模型更新数据</a></h4> <h5 id="_1-更新数据-save方法-指定修改字段fields属性"><a href="#_1-更新数据-save方法-指定修改字段fields属性" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_1-更新数据-save方法-指定修改字段fields属性" style="margin-left:70px;">1. 更新数据：save方法，指定修改字段fields属性</a></h5> <h5 id="_2-如果觉得save方法更新字段非常麻烦-可以使用update方法批量修改字段-第二个参数可指定修改字段"><a href="#_2-如果觉得save方法更新字段非常麻烦-可以使用update方法批量修改字段-第二个参数可指定修改字段" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_2-如果觉得save方法更新字段非常麻烦-可以使用update方法批量修改字段-第二个参数可指定修改字段" style="margin-left:70px;">2. 如果觉得save方法更新字段非常麻烦，可以使用update方法批量修改字段，第二个参数可指定修改字段</a></h5> <h4 id="十一、egg-js项目sequelize模删除、批量删除数据-destroy方法"><a href="#十一、egg-js项目sequelize模删除、批量删除数据-destroy方法" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#十一、egg-js项目sequelize模删除、批量删除数据-destroy方法" style="margin-left:40px;">十一、egg.js项目sequelize模删除、批量删除数据：destroy方法</a></h4> <h4 id="十二、错误和异常统一处理"><a href="#十二、错误和异常统一处理" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#十二、错误和异常统一处理" style="margin-left:40px;">十二、错误和异常统一处理</a></h4> <h4 id="十三、中间件配置"><a href="#十三、中间件配置" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#十三、中间件配置" style="margin-left:40px;">十三、中间件配置</a></h4> <h4 id="十四、参数验证"><a href="#十四、参数验证" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#十四、参数验证" style="margin-left:40px;">十四、参数验证</a></h4> <h5 id="_1-安装插件"><a href="#_1-安装插件" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_1-安装插件" style="margin-left:70px;">1. 安装插件</a></h5> <h5 id="_2-配置插件-config-plugin-js"><a href="#_2-配置插件-config-plugin-js" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_2-配置插件-config-plugin-js" style="margin-left:70px;">2. 配置插件 config/plugin.js</a></h5> <h5 id="_3-配置-config-config-default-js"><a href="#_3-配置-config-config-default-js" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_3-配置-config-config-default-js" style="margin-left:70px;">3. 配置 config/config.default.js</a></h5> <h5 id="_4-控制器举例"><a href="#_4-控制器举例" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_4-控制器举例" style="margin-left:70px;">4. 控制器举例</a></h5> <h5 id="_5-参数验证的错误提示在中间件中设置一下"><a href="#_5-参数验证的错误提示在中间件中设置一下" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_5-参数验证的错误提示在中间件中设置一下" style="margin-left:70px;">5. 参数验证的错误提示在中间件中设置一下</a></h5> <h5 id="_6-valparams-api-说明"><a href="#_6-valparams-api-说明" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_6-valparams-api-说明" style="margin-left:70px;">6.ValParams API 说明</a></h5> <h4 id="十五、路由分组"><a href="#十五、路由分组" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#十五、路由分组" style="margin-left:40px;">十五、路由分组</a></h4> <h5 id="_1-新建-app-router目录-在该目录下新建对应控制器名文件"><a href="#_1-新建-app-router目录-在该目录下新建对应控制器名文件" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_1-新建-app-router目录-在该目录下新建对应控制器名文件" style="margin-left:70px;">1. 新建 app/router目录，在该目录下新建对应控制器名文件</a></h5> <h5 id="_2-在app-router-message-js中写路由"><a href="#_2-在app-router-message-js中写路由" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_2-在app-router-message-js中写路由" style="margin-left:70px;">2. 在app/router/message.js中写路由</a></h5> <h5 id="_3-在app-router-js中按控制器指定分组"><a href="#_3-在app-router-js中按控制器指定分组" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_3-在app-router-js中按控制器指定分组" style="margin-left:70px;">3.在app/router.js中按控制器指定分组</a></h5> <h4 id="十六、模版引擎"><a href="#十六、模版引擎" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#十六、模版引擎" style="margin-left:40px;">十六、模版引擎</a></h4> <h5 id="_1-安装模版渲染插件"><a href="#_1-安装模版渲染插件" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_1-安装模版渲染插件" style="margin-left:70px;">1. 安装模版渲染插件</a></h5> <h5 id="_2-在config-plugin-js中配置插件"><a href="#_2-在config-plugin-js中配置插件" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_2-在config-plugin-js中配置插件" style="margin-left:70px;">2. 在config/plugin.js中配置插件</a></h5> <h5 id="_3-在config-config-default-js中配置模版引擎"><a href="#_3-在config-config-default-js中配置模版引擎" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_3-在config-config-default-js中配置模版引擎" style="margin-left:70px;">3. 在config/config.default.js中配置模版引擎</a></h5> <h5 id="_4-vscode安装一下nunjucks模版引擎扩展-方便代码提示"><a href="#_4-vscode安装一下nunjucks模版引擎扩展-方便代码提示" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_4-vscode安装一下nunjucks模版引擎扩展-方便代码提示" style="margin-left:70px;">4. vscode安装一下nunjucks模版引擎扩展，方便代码提示</a></h5> <h5 id="_5-新建-app-view目录-以后所有模版放这个目录里面"><a href="#_5-新建-app-view目录-以后所有模版放这个目录里面" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_5-新建-app-view目录-以后所有模版放这个目录里面" style="margin-left:70px;">5. 新建 app/view目录，以后所有模版放这个目录里面</a></h5> <h5 id="_6-控制器-app-controller-home-js-写一个方法"><a href="#_6-控制器-app-controller-home-js-写一个方法" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_6-控制器-app-controller-home-js-写一个方法" style="margin-left:70px;">6. 控制器 app/controller/home.js 写一个方法</a></h5> <h5 id="_7-重启项目-访问路由即可看到网页内容"><a href="#_7-重启项目-访问路由即可看到网页内容" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#_7-重启项目-访问路由即可看到网页内容" style="margin-left:70px;">7. 重启项目，访问路由即可看到网页内容</a></h5> <h4 id="egg-js基础课程总结"><a href="#egg-js基础课程总结" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js.html#egg-js基础课程总结" style="margin-left:40px;">egg.js基础课程总结</a></h4> <h3 id="章节3-响应式网页布局"><a href="#章节3-响应式网页布局" class="header-anchor">#</a> <a href="/secondless/w-c/%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BD%91%E9%A1%B5%E5%B8%83%E5%B1%80" title="章节3.响应式网页布局">章节3.响应式网页布局</a></h3> <h4 id="一、响应式网页布局是什么"><a href="#一、响应式网页布局是什么" class="header-anchor">#</a> <a href="/secondless/w-c/响应式网页布局.html#_1-响应式网页布局是什么" style="margin-left:40px;">一、响应式网页布局是什么</a></h4> <h4 id="二、响应式网页布局的实现方法"><a href="#二、响应式网页布局的实现方法" class="header-anchor">#</a> <a href="/secondless/w-c/响应式网页布局.html#_2-响应式网页布局的实现方法" style="margin-left:40px;">二、响应式网页布局的实现方法</a></h4> <h4 id="三、简单的响应式页面案例"><a href="#三、简单的响应式页面案例" class="header-anchor">#</a> <a href="/secondless/w-c/响应式网页布局.html#_3-简单的响应式页面案例" style="margin-left:40px;">三、简单的响应式页面案例</a></h4> <h4 id="四、bootstrap框架"><a href="#四、bootstrap框架" class="header-anchor">#</a> <a href="/secondless/w-c/响应式网页布局.html#_4-bootstrap框架" style="margin-left:40px;">四、Bootstrap框架</a></h4> <h4 id="五、响应式后台管理系统-egg-js-bootstrap"><a href="#五、响应式后台管理系统-egg-js-bootstrap" class="header-anchor">#</a> <a href="/secondless/w-c/响应式网页布局.html#_5-响应式后台管理系统-egg-js-bootstrap" style="margin-left:40px;">五、响应式后台管理系统（egg.js + Bootstrap）</a></h4> <h5 id="_1-搭建界面引入模版html文件"><a href="#_1-搭建界面引入模版html文件" class="header-anchor">#</a> <a href="/secondless/w-c/响应式后台管理系统.html" style="margin-left:70px;">① 搭建界面引入模版html文件</a></h5> <h5 id="_2-创建管理员-页面、创建数据库表及提交数据"><a href="#_2-创建管理员-页面、创建数据库表及提交数据" class="header-anchor">#</a> <a href="/secondless/w-c/响应式后台管理系统.html#二、创建管理员-页面、创建数据库表及提交数据" style="margin-left:70px;">② 创建管理员（页面、创建数据库表及提交数据）</a></h5> <h5 id="_3-管理员列表"><a href="#_3-管理员列表" class="header-anchor">#</a> <a href="/secondless/w-c/响应式后台管理系统.html#三、管理员列表" style="margin-left:70px;">③ 管理员列表</a></h5> <h5 id="_4-管理员列表分页功能"><a href="#_4-管理员列表分页功能" class="header-anchor">#</a> <a href="/secondless/w-c/响应式后台管理系统.html#四、管理员列表分页功能" style="margin-left:70px;">④ 管理员列表分页功能</a></h5> <h5 id="_5-公共模板开发"><a href="#_5-公共模板开发" class="header-anchor">#</a> <a href="/secondless/w-c/响应式后台管理系统.html#五、公共模板开发" style="margin-left:70px;">⑤ 公共模板开发</a></h5> <h5 id="_6-后台管理员登录"><a href="#_6-后台管理员登录" class="header-anchor">#</a> <a href="/secondless/w-c/响应式后台管理员登录.html" style="margin-left:70px;">⑥ 后台管理员登录</a></h5> <h5 id="_7-后台用户留言板管理板块"><a href="#_7-后台用户留言板管理板块" class="header-anchor">#</a> <a href="/secondless/w-c/响应式后台用户留言板管理.html" style="margin-left:70px;">⑦ 后台用户留言板管理板块</a></h5> <h5 id="_8-优化公共模版表格能够显示头像"><a href="#_8-优化公共模版表格能够显示头像" class="header-anchor">#</a> <a href="/secondless/w-c/响应式后台管理系统.html#八、优化公共模版表格能够显示头像" style="margin-left:70px;">⑧ 优化公共模版表格能够显示头像</a></h5> <h5 id="_9-后台左侧菜单栏"><a href="#_9-后台左侧菜单栏" class="header-anchor">#</a> <a href="/secondless/w-c/响应式后台管理系统.html#九、后台左侧菜单栏" style="margin-left:70px;">⑨ 后台左侧菜单栏</a></h5> <h5 id="_10-上传文件"><a href="#_10-上传文件" class="header-anchor">#</a> <a href="/secondless/w-c/上传文件.html" style="margin-left:70px;">⑩ 上传文件</a></h5> <h5 id="_11-上传或修改管理员头像"><a href="#_11-上传或修改管理员头像" class="header-anchor">#</a> <a href="/secondless/w-c/响应式后台管理系统.html#十一、上传或修改管理员头像" style="margin-left:70px;">⑪ 上传或修改管理员头像</a></h5> <h3 id="章节4-egg-js和mysql数据库进阶进一步开发网站后台"><a href="#章节4-egg-js和mysql数据库进阶进一步开发网站后台" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js%E5%92%8CMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E9%98%B6%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99%E5%90%8E%E5%8F%B0" title="章节4.Egg.js和Mysql数据库进阶进一步开发网站后台">章节4.Egg.js和Mysql数据库进阶进一步开发网站后台</a></h3> <h4 id="一、用户管理板块-以直播功能中的用户表liveuser表为例-2"><a href="#一、用户管理板块-以直播功能中的用户表liveuser表为例-2" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js和Mysql数据库进阶进一步开发网站后台.html#一、用户管理板块-以直播功能中的用户表liveuser表为例" style="margin-left:40px;">一、用户管理板块(以直播功能中的用户表liveuser表为例)</a></h4> <h5 id="_1-用户管理板块说明"><a href="#_1-用户管理板块说明" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js和Mysql数据库进阶进一步开发网站后台.html#一、用户管理板块-以直播功能中的用户表liveuser表为例" style="margin-left:70px;">① 用户管理板块说明</a></h5> <h5 id="_2-具体实现过程"><a href="#_2-具体实现过程" class="header-anchor">#</a> <a href="/secondless/w-c/直播功能中的用户表liveuser.html" target="_blank" style="margin-left:70px;">② 具体实现过程</a></h5> <h4 id="二、礼物管理-以直播功能中的礼物表livegift表为例-2"><a href="#二、礼物管理-以直播功能中的礼物表livegift表为例-2" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js和Mysql数据库进阶进一步开发网站后台.html#二、礼物管理-以直播功能中的礼物表livegift表为例" style="margin-left:40px;">二、礼物管理(以直播功能中的礼物表livegift表为例)</a></h4> <h5 id="_1-礼物管理板块说明"><a href="#_1-礼物管理板块说明" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js和Mysql数据库进阶进一步开发网站后台.html#二、礼物管理-以直播功能中的礼物表livegift表为例" style="margin-left:70px;">① 礼物管理板块说明</a></h5> <h5 id="_2-具体实现过程-2"><a href="#_2-具体实现过程-2" class="header-anchor">#</a> <a href="/secondless/w-c/直播功能中的礼物表livegift.html" target="_blank" style="margin-left:70px;">② 具体实现过程</a></h5> <h4 id="三、订单管理-以直播功能中的订单表liveorder表为例-2"><a href="#三、订单管理-以直播功能中的订单表liveorder表为例-2" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js和Mysql数据库进阶进一步开发网站后台.html#三、订单管理-以直播功能中的订单表liveorder表为例" style="margin-left:40px;">三、订单管理(以直播功能中的订单表liveorder表为例)</a></h4> <h5 id="_1-初步理解关联关系"><a href="#_1-初步理解关联关系" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js和Mysql数据库进阶进一步开发网站后台.html#三、订单管理-以直播功能中的订单表liveorder表为例" style="margin-left:70px;">① 初步理解关联关系</a></h5> <h5 id="_2-具体实现过程-3"><a href="#_2-具体实现过程-3" class="header-anchor">#</a> <a href="/secondless/w-c/直播功能中的订单表liveorder.html" target="_blank" style="margin-left:70px;">② 具体实现过程</a></h5> <h4 id="四、直播间管理-以直播功能中的直播间表live表为例-2"><a href="#四、直播间管理-以直播功能中的直播间表live表为例-2" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js和Mysql数据库进阶进一步开发网站后台.html#四、直播间管理-以直播功能中的直播间表live表为例" style="margin-left:40px;">四、直播间管理(以直播功能中的直播间表live表为例)</a></h4> <h5 id="_1-多模型关联查询实践"><a href="#_1-多模型关联查询实践" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js和Mysql数据库进阶进一步开发网站后台.html#四、直播间管理-以直播功能中的直播间表live表为例" style="margin-left:70px;">① 多模型关联查询实践</a></h5> <h5 id="_2-具体实现过程-4"><a href="#_2-具体实现过程-4" class="header-anchor">#</a> <a href="/secondless/w-c/直播功能中的直播间表live.html" target="_blank" style="margin-left:70px;">② 具体实现过程</a></h5> <h4 id="五、mysql语句进一步理解模型关联关系-mysql进阶-2"><a href="#五、mysql语句进一步理解模型关联关系-mysql进阶-2" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js和Mysql数据库进阶进一步开发网站后台.html#五、mysql语句进一步理解模型关联关系-mysql进阶" style="margin-left:40px;">五、mysql语句进一步理解模型关联关系（Mysql进阶）</a></h4> <h5 id="_1-关联关系进一步说明"><a href="#_1-关联关系进一步说明" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js和Mysql数据库进阶进一步开发网站后台.html#五、mysql语句进一步理解模型关联关系-mysql进阶" style="margin-left:70px;">① 关联关系进一步说明</a></h5> <h5 id="_2-mysql数据库基础-三、mysql子查询和连表查询-文档搜索-mysql子查询和连表查询"><a href="#_2-mysql数据库基础-三、mysql子查询和连表查询-文档搜索-mysql子查询和连表查询" class="header-anchor">#</a> <a href="/secondless/w-c/mysql数据库.html#三、mysql子查询和连表查询" target="_blank" style="margin-left:70px;">② mysql数据库基础-三、mysql子查询和连表查询（文档搜索：mysql子查询和连表查询）</a></h5> <h4 id="六、企业网站栏目管理、内容管理-2"><a href="#六、企业网站栏目管理、内容管理-2" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js和Mysql数据库进阶进一步开发网站后台.html#六、企业网站栏目管理、内容管理" style="margin-left:40px;">六、企业网站栏目管理、内容管理</a></h4> <h5 id="_1-企业网站栏目管理、内容管理说明"><a href="#_1-企业网站栏目管理、内容管理说明" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js和Mysql数据库进阶进一步开发网站后台.html#六、企业网站栏目管理、内容管理" style="margin-left:70px;">① 企业网站栏目管理、内容管理说明</a></h5> <h5 id="_2-企业网站后台栏目管理具体实现"><a href="#_2-企业网站后台栏目管理具体实现" class="header-anchor">#</a> <a href="/secondless/w-c/企业网站后台栏目管理.html" target="_blank" style="margin-left:70px;">② 企业网站后台栏目管理具体实现</a></h5> <h5 id="_3-企业网站后台内容管理具体实现"><a href="#_3-企业网站后台内容管理具体实现" class="header-anchor">#</a> <a href="/secondless/w-c/企业网站后台内容管理.html" target="_blank" style="margin-left:70px;">③ 企业网站后台内容管理具体实现</a></h5> <h4 id="七、网站配置管理-2"><a href="#七、网站配置管理-2" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js和Mysql数据库进阶进一步开发网站后台.html#七、网站配置管理" style="margin-left:40px;">七、网站配置管理</a></h4> <h5 id="_1-网站配置管理代码实现"><a href="#_1-网站配置管理代码实现" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js和Mysql数据库进阶进一步开发网站后台.html#七、网站配置管理" style="margin-left:70px;">① 网站配置管理代码实现</a></h5> <h4 id="八、后台初始化管理员登录逻辑-2"><a href="#八、后台初始化管理员登录逻辑-2" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js和Mysql数据库进阶进一步开发网站后台.html#八、后台初始化管理员登录逻辑" style="margin-left:40px;">八、后台初始化管理员登录逻辑</a></h4> <h5 id="_1-登录逻辑代码实现"><a href="#_1-登录逻辑代码实现" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js和Mysql数据库进阶进一步开发网站后台.html#八、后台初始化管理员登录逻辑" style="margin-left:70px;">① 登录逻辑代码实现</a></h5> <h4 id="九、简单权限管理-2"><a href="#九、简单权限管理-2" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js和Mysql数据库进阶进一步开发网站后台.html#九、简单权限管理" style="margin-left:40px;">九、简单权限管理</a></h4> <h5 id="_1-管理员栏目-超级管理员可以查看所有管理员-普通管理员只能看自己-2"><a href="#_1-管理员栏目-超级管理员可以查看所有管理员-普通管理员只能看自己-2" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js和Mysql数据库进阶进一步开发网站后台.html#九、简单权限管理" style="margin-left:70px;">① 管理员栏目：超级管理员可以查看所有管理员，普通管理员只能看自己</a></h5> <h5 id="_2-权限分配-2"><a href="#_2-权限分配-2" class="header-anchor">#</a> <a href="/secondless/w-c/Egg.js和Mysql数据库进阶进一步开发网站后台.html#_2-权限分配" style="margin-left:70px;">② 权限分配</a></h5> <h5 id="_3-网站后台管理员简单权限分配功能实现-2"><a href="#_3-网站后台管理员简单权限分配功能实现-2" class="header-anchor">#</a> <a href="/secondless/w-c/网站后台管理员简单权限分配功能实现.html" target="_blank" style="margin-left:70px;">③ 网站后台管理员简单权限分配功能实现</a></h5> <h3 id="章节5-企业网站前端部分"><a href="#章节5-企业网站前端部分" class="header-anchor">#</a> <a href="/secondless/w-c/%E4%BC%81%E4%B8%9A%E7%BD%91%E7%AB%99%E5%89%8D%E7%AB%AF%E9%83%A8%E5%88%86" title="章节5.企业网站前端部分">章节5.企业网站前端部分</a></h3> <p><br><br></p> <h2 id="其它学期课程"><a href="#其它学期课程" class="header-anchor">#</a> 其它学期课程</h2> <h3 id="第一学期-学习顺序-01"><a href="#第一学期-学习顺序-01" class="header-anchor">#</a> <a href="/aboutless.html" title="第一学期课程">第一学期（学习顺序：01）</a></h3> <blockquote><p>第一学期课程专为零基础的学员定制录制的，纯html+css做企业网站的网页，主讲html和css的相关基础知识，flex布局相关知识，封装css基础样式库，引入字体图标及网页开发基础布局思维，完成企业网站网页的开发过程。<br><br> <b><a href="https://study.163.com/course/courseMain.htm?courseId=1213374826&amp;share=2&amp;shareId=480000002289674" target="_blank">[第一学期学习视频]</a></b></p></blockquote> <h3 id="第二学期【第1季】-学习顺序-02"><a href="#第二学期【第1季】-学习顺序-02" class="header-anchor">#</a> <a href="/secondless/w-a" title="第二学期第1季课程">第二学期【第1季】（学习顺序：02）</a></h3> <blockquote><p>主讲JavaScript的基础，建议所有学员观看。<br> <b><a href="/secondless/w-a.html" target="_blank">[第1季学习文档]</a> <a href="https://study.163.com/course/courseMain.htm?share=2&amp;shareId=480000002289674&amp;courseId=1213550818" target="_blank" style="margin-left:20px;">[第1季学习视频]</a></b></p></blockquote> <h3 id="第二学期【第2季】-学习顺序-03"><a href="#第二学期【第2季】-学习顺序-03" class="header-anchor">#</a> <a href="/secondless/w-b" title="第二学期第2季课程">第二学期【第2季】（学习顺序：03）</a></h3> <blockquote><p>JavaScript中的面向对象，类，ajax，封装js库过渡到jQuery， vue.js基础配置网站页面，建议所有学员观看。<br> <b><a href="/secondless/w-b.html" target="_blank">[第2季学习文档]</a> <a href="https://study.163.com/course/courseMain.htm?share=2&amp;shareId=480000002289674&amp;courseId=1213781850" target="_blank" style="margin-left:20px;">[第2季学习视频]</a></b></p></blockquote> <h3 id="第二学期【第3季】-学习顺序-04"><a href="#第二学期【第3季】-学习顺序-04" class="header-anchor">#</a> <a href="/secondless/w-c" title="第二学期第3季课程">第二学期【第3季】（学习顺序：04）</a></h3> <blockquote><p>egg.js基础，响应式网页布局，Bootstrap框架，响应式后台系统管理，完整企业网站前后台开发，建议所有学员观看。<br> <b><a href="/secondless/w-c.html" target="_blank">[第3季学习文档]</a> <a href="https://study.163.com/course/courseMain.htm?share=2&amp;shareId=480000002289674&amp;courseId=1213780858" target="_blank" style="margin-left:20px;">[第3季学习视频]</a></b></p></blockquote> <h3 id="第二学期【第4季】-学习顺序-05"><a href="#第二学期【第4季】-学习顺序-05" class="header-anchor">#</a> <a href="/secondless/w-d" title="第二学期第4季课程">第二学期【第4季】（学习顺序：05）</a></h3> <blockquote><p>主要对第三季，同学们开发的企业网站，进行一个完整的上线运维流程的一个讲解，同学们将网站开发完成之后，如何进行上线运维，将项目交付给客户。<br> <b><a href="/secondless/w-d.html" target="_blank">[第4季学习文档]</a> <a href="https://study.163.com/course/courseMain.htm?courseId=1213794887&amp;share=2&amp;shareId=480000002289674" target="_blank" style="margin-left:20px;">[第4季学习视频]</a></b></p></blockquote></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2024年11月19日星期二中午11点54分</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.4c1fa2f2.js" defer></script><script src="/assets/js/10.a1858127.js" defer></script><script src="/assets/js/2.641709ae.js" defer></script><script src="/assets/js/111.ae05aad1.js" defer></script><script src="/assets/js/4.68f7b7e9.js" defer></script>
  </body>
</html>
