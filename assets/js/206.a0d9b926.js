(window.webpackJsonp=window.webpackJsonp||[]).push([[206],{609:function(t,a,s){"use strict";s.r(a);var e=s(24),r=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"rolecategory-表说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rolecategory-表说明"}},[t._v("#")]),t._v(" rolecategory 表说明")]),t._v(" "),a("h2",{attrs:{id:"一、rolecategory-表字段设计"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、rolecategory-表字段设计"}},[t._v("#")]),t._v(" 一、rolecategory 表字段设计")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("字段名")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("数据类型及描述")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("空")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[a("p",{staticStyle:{width:"150px"}},[t._v("默认值 ")])]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[a("p",{staticStyle:{width:"100px"}},[t._v("字段含义 ")])])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("b",[t._v("id ")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("span",[t._v("int(20) ")]),a("br"),t._v(" "),a("span",{staticStyle:{"font-size":"12px"}},[t._v("主键、自增长、UNSIGNED无符号 ")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("主键id")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("b",[t._v("name ")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("varchar(30)")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("角色名称")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("b",[t._v("desc ")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("varchar(255)")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("是")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("角色描述，对角色的简单介绍")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("b",[t._v("showurl ")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("varchar(255)")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("是")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("浏览地址")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("b",[t._v(" create_time ")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("datetime")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("CURRENT_TIMESTAMP")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("数据创建时间")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("b",[t._v(" update_time ")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("datetime")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("CURRENT_TIMESTAMP")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("数据更新时间")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("b",[t._v(" status ")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("int(1)")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("管理员可用状态：0禁用1启用")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("额外说明："),a("code",[t._v("mysql每行最大只能存65535个字节。假设是utf-8编码，每个字符占3个字节。varchar存储最大字符数为(65535-2-1)/3=21844字符长度")])])]),t._v(" "),a("h2",{attrs:{id:"二、创建角色表rolecategory"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、创建角色表rolecategory"}},[t._v("#")]),t._v(" 二、创建角色表rolecategory")]),t._v(" "),a("h3",{attrs:{id:"_1、技术栈php-thinkphp-同学"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、技术栈php-thinkphp-同学"}},[t._v("#")]),t._v(" 1、技术栈php(thinkphp)同学")]),t._v(" "),a("blockquote",[a("p",[t._v("直接在"),a("code",[t._v("phpMyAdmin")]),t._v("中根据表字段设计创建表，或者通过数据库插件写sql语句创建表。")])]),t._v(" "),a("h3",{attrs:{id:"_2、技术栈node-egg-js-同学"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、技术栈node-egg-js-同学"}},[t._v("#")]),t._v(" 2、技术栈node(egg.js)同学")]),t._v(" "),a("blockquote",[a("ol",[a("li",[t._v("直接在"),a("code",[t._v("phpMyAdmin")]),t._v("中根据表字段设计创建表，或者通过数据库插件写sql语句创建表。"),a("br")]),t._v(" "),a("li",[t._v("通过迁移命名创建rolecategory表：")])]),t._v(" "),a("blockquote",[a("p",[a("span",{staticStyle:{"text-decoration":"underline",color:"green"}},[t._v(" 注意：需要先将分类表 "),a("code",[t._v("category")]),t._v("先删除，"),a("code",[t._v("先创建rolecategory表")]),t._v("，"),a("code",[t._v("再创建管理员表category")]),t._v("。")]),a("br"),a("br"),t._v("\n为什么要先删除分类表 "),a("code",[t._v("category")]),t._v("？主要原因是，通过迁移命令创建，"),a("code",[t._v("会按照迁移文件创建顺序创建表")]),t._v("，如果先创建分类表 "),a("code",[t._v("category")]),t._v("，再创建角色表 "),a("code",[t._v("rolecategory")]),t._v("，那么在创建分类表 "),a("code",[t._v("category")]),t._v("时，会自动创建关联关系，而此时分类角色表 "),a("code",[t._v("rolecategory")]),t._v("还未创建，就会导致创建失败，大家大概知道一下就行，反正你只需要记住一点："),a("code",[t._v("如果你是通过迁移命令创建表，如果这个表里面有外键关联另外一张表，那么关联的另外一张表，必须在它的前面创建，这样按照迁移文件创建顺序创建表就不会报错")]),t._v("，记住这个就行了，如果是在"),a("code",[t._v("phpMyAdmin")]),t._v("中根据表字段设计创建表，这个就无所谓了。")])]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("具体步骤如下：")])]),t._v(" "),a("blockquote",[a("ol",[a("li",[t._v("删除分类表 "),a("code",[t._v("category")]),t._v("，只需要执行一次回滚命令(很显然回退一次不够，我们直接回退到初始状态或者多回退几次)：")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果有问题需要回滚，可以通过 `db:migrate:undo` 回退一个变更")]),t._v("\nnpx sequelize db"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("migrate"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("undo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可以通过 `db:migrate:undo:all` 回退到初始状态")]),t._v("\nnpx sequelize db"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("migrate"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("undo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("all\n")])])]),a("p",[a("code",[t._v("记得把迁移文件也删除掉")]),t._v("。"),a("br"),a("br"),t._v("\n2. 创建迁移文件 命令：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("npx sequelize migration"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("generate "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("rolecategory\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("创建迁移文件 "),a("code",[t._v("rolecategory.js")]),t._v("，内容如下："),a("br")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'use strict'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** @type {import('sequelize-cli').Migration} */")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("up")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("queryInterface"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Sequelize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("INTEGER")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STRING")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DATE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ENUM")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TEXT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("BIGINT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Sequelize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建表 --- 类似我们sql语句定义表结构")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" queryInterface"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createTable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rolecategory'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("INTEGER")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("UNSIGNED")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("primaryKey")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("autoIncrement")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("comment")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'角色表主键id'")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STRING")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("allowNull")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("defaultValue")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("comment")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'角色名称'")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("desc")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STRING")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("allowNull")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("defaultValue")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("comment")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'角色描述，对角色的简单介绍'")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("showurl")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STRING")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("allowNull")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("defaultValue")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("comment")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'浏览地址'")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("status")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("INTEGER")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("allowNull")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("defaultValue")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("comment")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'状态：1：启用，0：禁用'")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// sex: { type: ENUM, values: ['男','女','保密'], allowNull: true, defaultValue: '保密', comment: '留言用户性别'},")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("create_time")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DATE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("allowNull")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("defaultValue")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("Sequelize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NOW'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("update_time")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DATE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("allowNull")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("defaultValue")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("Sequelize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NOW'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("down")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("queryInterface"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Sequelize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" queryInterface"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dropTable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rolecategory'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("执行迁移文件命令生成数据库表：")]),t._v(" "),a("blockquote",[a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建数据库")]),t._v("\nnpx sequelize db"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("migrate\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果有问题需要回滚，可以通过 `db:migrate:undo` 回退一个变更")]),t._v("\nnpx sequelize db"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("migrate"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("undo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可以通过 `db:migrate:undo:all` 回退到初始状态")]),t._v("\nnpx sequelize db"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("migrate"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("undo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("all\n")])])])])])]),t._v(" "),a("p",[t._v("说明：由于我们新增了分类表"),a("code",[t._v("category")]),t._v("的角色表 "),a("code",[t._v("rolecategory")]),t._v("，如果两个表要产生联系，那么应该在分类表"),a("code",[t._v("category")]),t._v("里面新增一个外键字段"),a("code",[t._v("rolecategory_id")]),t._v("，并写上模型关联，这个我们在后面讲这部分后台的时候再给大家统一讲一下，这里为了保证我们课程同步，照顾到通过迁移文件创建表的同学，我们本节课以创建这张表主要。")])])}),[],!1,null,null,null);a.default=r.exports}}]);