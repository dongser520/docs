(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{421:function(t,s,a){"use strict";a.r(s);var e=a(24),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"vite项目上线部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vite项目上线部署"}},[t._v("#")]),t._v(" Vite项目上线部署")]),t._v(" "),s("h2",{attrs:{id:"解析一个域名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解析一个域名"}},[t._v("#")]),t._v(" 解析一个域名")]),t._v(" "),s("blockquote",[s("p",[t._v("在阿里云或腾讯云，域名管理中，解析一个域名到线上服务器，本次演示域名： "),s("code",[t._v("vitevue3.html.shop.51yrc.com")]),t._v("，轻量应用服务器在域名栏目绑定域名。"),s("br"),t._v("\n后端地址："),s("code",[t._v("http://vitevue3.shop.51yrc.com")]),t._v(" "),s("a",{attrs:{href:"http://vitevue3.shop.51yrc.com/api/index_category/data",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://vitevue3.shop.51yrc.com/api/index_category/data"),s("OutboundLink")],1),t._v(" "),s("br"),t._v("\n前端地址："),s("code",[t._v("http://vitevue3.html.shop.51yrc.com")]),s("br")])]),t._v(" "),s("h2",{attrs:{id:"配置设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置设置"}},[t._v("#")]),t._v(" 配置设置")]),t._v(" "),s("blockquote",[s("ol",[s("li",[t._v("群文件下载源码 （或私信老师获取源码）、解压后拖入vscode"),s("br")]),t._v(" "),s("li",[t._v("配置环境：")])]),t._v(" "),s("blockquote",[s("p",[t._v("新增开发环境文件： "),s("code",[t._v(".env.development")]),s("br"),t._v("\n由于开发环境即调试环境，我们在 "),s("code",[t._v("vite.config.js")]),t._v(" 有开启代理 "),s("code",[t._v("/api")]),t._v(",因此这么写：")]),t._v(" "),s("blockquote",[s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VITE_APP_BASE_API")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/api'")]),t._v("\n")])])])]),t._v(" "),s("p",[t._v("新增生产环境即上线环境文件： "),s("code",[t._v(".env.production")]),s("br"),t._v("\n直接写线上域名即可：")]),t._v(" "),s("blockquote",[s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VITE_APP_BASE_API")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://vitevue3.shop.51yrc.com'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//换成后端的网址")]),t._v("\n")])])])])]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("如果源代码没有node_modules文件，需要初始化node_modules文件，可以：")])]),t._v(" "),s("blockquote",[s("p",[t._v("键盘shift+鼠标右键，"),s("code",[t._v("此处打开Powershell")]),t._v("然后输入命令："),s("code",[t._v("npm install")]),t._v("安装依赖"),s("br"),t._v("\n或者在vscode中，"),s("code",[t._v("终端")]),t._v("-"),s("code",[t._v("新建终端")]),t._v("，"),s("code",[t._v("找到项目")]),t._v("运行命令："),s("code",[t._v("npm install")]),s("br")])]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("测试一下新增的环境文件有没有生效：")])]),t._v(" "),s("blockquote",[s("p",[t._v("根目录 "),s("code",[t._v("src/App.vue")]),t._v("打开，在"),s("code",[t._v("<script setup>")]),t._v("中加入：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可写在页面顶部")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script setup"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("meta"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//然后运行一下项目看看：`npm run dev`")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//页面中控台会有：VITE_APP_BASE_API: "/api"这个属性，')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//如果是线上环境，打包之后就会变成网址")]),t._v("\n")])])])]),t._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[t._v("根目录 "),s("code",[t._v("src/axios.js")]),t._v("打开,注意以下代码：")])]),t._v(" "),s("blockquote",[s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" service "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" axios"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("baseURL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("meta"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VITE_APP_BASE_API")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//这里换成环境变量")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),s("ol",{attrs:{start:"6"}},[s("li",[t._v("根目录 "),s("code",[t._v("src/api/image.js")]),t._v("打开,注意以下代码：")])]),t._v(" "),s("blockquote",[s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//最后一行")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" uploadImageAction "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("meta"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VITE_APP_BASE_API")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/admin/image/upload"')]),t._v("\n")])])])]),t._v(" "),s("ol",{attrs:{start:"7"}},[s("li",[t._v("根目录 "),s("code",[t._v("src/api/sysconfig.js")]),t._v("打开,注意以下代码：")])]),t._v(" "),s("blockquote",[s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//最后一行")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" uploadAction "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("meta"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VITE_APP_BASE_API")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/admin/sysconfig/upload"')]),t._v("\n")])])])]),t._v(" "),s("ol",{attrs:{start:"8"}},[s("li",[t._v("根目录 "),s("code",[t._v("vite.config.js")]),t._v("打开,注意以下代码：")])]),t._v(" "),s("blockquote",[s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("server")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("proxy")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'/api'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("target")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://vitevue3.shop.51yrc.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//换成后端的网址")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("changeOrigin")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("rewrite")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("^\\/api")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])])]),t._v(" "),s("ol",{attrs:{start:"9"}},[s("li",[t._v("打包代码："),s("code",[t._v("npm run build")]),t._v("，代码放在了"),s("code",[t._v("dist")]),t._v("文件夹中，打开"),s("code",[t._v("dist")]),t._v("文件夹，把里面的文件打包上传服务器即可。")])])]),t._v(" "),s("h2",{attrs:{id:"服务器面板操作-以宝塔面板为例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务器面板操作-以宝塔面板为例"}},[t._v("#")]),t._v(" 服务器面板操作（以宝塔面板为例）")]),t._v(" "),s("h3",{attrs:{id:"创建网站-前端地址-http-vitevue3-html-shop-51yrc-com"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建网站-前端地址-http-vitevue3-html-shop-51yrc-com"}},[t._v("#")]),t._v(" 创建网站，前端地址："),s("code",[t._v("http://vitevue3.html.shop.51yrc.com")])]),t._v(" "),s("blockquote",[s("ol",[s("li",[s("code",[t._v("网站")]),t._v("-"),s("code",[t._v("PHP项目")]),t._v("-"),s("code",[t._v("添加站点")]),t._v("-"),s("code",[t._v("传统项目")]),t._v(" "),s("br")])]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("域名")]),t._v("：vitevue3.html.shop.51yrc.com "),s("br"),t._v(" "),s("code",[t._v("备注")]),t._v("：vitevue3.html.shop.51yrc.com (自动生成)"),s("br"),t._v(" "),s("code",[t._v("根目录")]),t._v("：/www/wwwroot/vitevue3.html.shop.51yrc.com  (自动生成)"),s("br"),t._v(" "),s("code",[t._v("FTP")]),t._v("：不创建"),s("br"),t._v(" "),s("code",[t._v("数据库")]),t._v("：不创建"),s("br"),t._v(" "),s("code",[t._v("PHP版本")]),t._v("：纯静态"),s("br"),t._v(" "),s("code",[t._v("网站分类")]),t._v("：默认分类"),s("br"),t._v("\n确定--\x3e 点击域名看默认站点是否可以打开: "),s("a",{attrs:{href:"http://vitevue3.html.shop.51yrc.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://vitevue3.html.shop.51yrc.com"),s("OutboundLink")],1)])])]),t._v(" "),s("h3",{attrs:{id:"上传打包文件到服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传打包文件到服务器"}},[t._v("#")]),t._v(" 上传打包文件到服务器")]),t._v(" "),s("blockquote",[s("p",[t._v("打开"),s("code",[t._v("dist")]),t._v("文件夹，全部选中，右键，"),s("code",[t._v("添加到压缩文件")]),t._v("--"),s("code",[t._v("zip")]),t._v("--"),s("code",[t._v("确定")]),t._v(" --打包好了代码 "),s("code",[t._v("dist.zip")]),t._v(" "),s("br"),t._v("\n上传到网站根目录--\x3e解压即可访问。"),s("br"),t._v("\n若解压之后，文件不在根目录，则指定目录即可："),s("code",[t._v("对应网站")]),t._v("->"),s("code",[t._v("设置")]),t._v("->"),s("code",[t._v("网站目录")]),t._v("->"),s("code",[t._v("网站目录")]),t._v("（注意"),s("code",[t._v("不是设置运行目录")]),t._v("，运行目录是在thinkphp用到指向public）->指定网站目录->"),s("code",[t._v("保存")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);