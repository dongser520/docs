(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{421:function(v,_,e){"use strict";e.r(_);var o=e(24),t=Object(o.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"thinkphp商城后台管理系统上线部署"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#thinkphp商城后台管理系统上线部署"}},[v._v("#")]),v._v(" thinkphp商城后台管理系统上线部署")]),v._v(" "),_("h2",{attrs:{id:"解析一个域名"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#解析一个域名"}},[v._v("#")]),v._v(" 解析一个域名")]),v._v(" "),_("blockquote",[_("p",[v._v("在阿里云或腾讯云，域名管理中，解析一个域名到线上服务器，本次演示域名： "),_("code",[v._v("vuecli.shop.51yrc.com")]),v._v("，轻量应用服务器在域名栏目绑定域名。")])]),v._v(" "),_("h2",{attrs:{id:"服务器面板操作-以宝塔面板为例"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#服务器面板操作-以宝塔面板为例"}},[v._v("#")]),v._v(" 服务器面板操作（以宝塔面板为例）")]),v._v(" "),_("h3",{attrs:{id:"_1-创建网站"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建网站"}},[v._v("#")]),v._v(" 1. 创建网站")]),v._v(" "),_("blockquote",[_("ol",[_("li",[_("code",[v._v("网站")]),v._v("-"),_("code",[v._v("PHP项目")]),v._v("-"),_("code",[v._v("添加站点")]),v._v("-"),_("code",[v._v("传统项目")]),v._v(" "),_("br")])]),v._v(" "),_("blockquote",[_("p",[_("code",[v._v("域名")]),v._v("：vuecli.shop.51yrc.com "),_("br"),v._v(" "),_("code",[v._v("备注")]),v._v("：vuecli.shop.51yrc.com (自动生成)"),_("br"),v._v(" "),_("code",[v._v("根目录")]),v._v("：/www/wwwroot/vuecli.shop.51yrc.com  (自动生成)"),_("br"),v._v(" "),_("code",[v._v("FTP")]),v._v("：不创建"),_("br"),v._v(" "),_("code",[v._v("数据库")]),v._v("：MySQL---字符集：utf8mb4（存表情包），数据库账号、密码自动生成"),_("br"),v._v(" "),_("code",[v._v("PHP版本")]),v._v("：PHP-72"),_("br"),v._v(" "),_("code",[v._v("网站分类")]),v._v("：默认分类"),_("br"),v._v("\n确定--\x3e 点击域名看默认站点是否可以打开")])])]),v._v(" "),_("h3",{attrs:{id:"_2-部署项目后端"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-部署项目后端"}},[v._v("#")]),v._v(" 2.部署项目后端")]),v._v(" "),_("blockquote",[_("ol",[_("li",[v._v("群文件下载源码 （或私信老师获取源码）"),_("br")]),v._v(" "),_("li",[v._v("上传源码到服务器网站对应根目录/www/wwwroot/vuecli.shop.51yrc.com ， 解压源码"),_("br")]),v._v(" "),_("li",[v._v("网站--\x3e对应网站--\x3e"),_("code",[v._v("设置")]),v._v("，"),_("code",[v._v("网站目录")]),v._v("->"),_("code",[v._v("运行目录")]),v._v("->选择 "),_("code",[v._v("/public")]),v._v("->"),_("code",[v._v("保存")]),_("br")]),v._v(" "),_("li",[v._v("配置伪静态："),_("code",[v._v("伪静态")]),v._v("->"),_("code",[v._v("thinkphp")]),v._v(",->"),_("code",[v._v("保存")]),_("br")]),v._v(" "),_("li",[v._v("修改数据库相关配置(可新开一个数据库窗口):"),_("br")])]),v._v(" "),_("blockquote",[_("p",[v._v("根目录找到.env文件->"),_("code",[v._v("编辑")]),_("br")]),v._v(" "),_("blockquote",[_("p",[v._v("DATABASE = 数据库账号 "),_("br"),v._v("\nUSERNAME = 数据库账号 "),_("br"),v._v("\nPASSWORD = 数据库密码 "),_("br")])])]),v._v(" "),_("ol",{attrs:{start:"6"}},[_("li",[v._v("导入数据库（若跟源码放一起，可下载来再导入）-> "),_("code",[v._v("上传")]),v._v(" -> "),_("code",[v._v("导入")]),v._v(" ->"),_("code",[v._v("确定覆盖输入验证结果")]),v._v("-> "),_("code",[v._v("导入成功")]),_("br")]),v._v(" "),_("li",[v._v("修改配置文件："),_("code",[v._v("config/cms.php")]),v._v("(具体看视频说明，改一些核心的申请的appkey)"),_("br")]),v._v(" "),_("li",[v._v("安装redis及扩展"),_("br")])]),v._v(" "),_("blockquote",[_("p",[v._v("来到软件商店--\x3e 搜索 "),_("code",[v._v("Redis")]),v._v(" --\x3e "),_("code",[v._v("安装")]),v._v("--\x3e"),_("code",[v._v("最新版安装（大约需要2分钟）")]),_("br"),v._v(" "),_("code",[v._v("已安装")]),v._v("->找到面板目前已安装的PHP版本如"),_("code",[v._v("PHP 7.2.33")]),v._v(", -> "),_("code",[v._v("设置")]),v._v(" -> "),_("code",[v._v("安装扩展")]),v._v("-> "),_("code",[v._v("redis")]),v._v(" -> "),_("code",[v._v("安装确定")]),v._v("（1分钟装好）"),_("br"),v._v("\n测试前端api接口："),_("a",{attrs:{href:"http://vuecli.shop.51yrc.com/api/index_category/data",target:"_blank",rel:"noopener noreferrer"}},[v._v("http://vuecli.shop.51yrc.com/api/index_category/data"),_("OutboundLink")],1),_("br"),v._v("\n测试后端api接口："),_("a",{attrs:{href:"http://vuecli.shop.51yrc.com/admin/imageclass/1",target:"_blank",rel:"noopener noreferrer"}},[v._v("http://vuecli.shop.51yrc.com/admin/imageclass/1"),_("OutboundLink")],1),_("br")])]),v._v(" "),_("ol",{attrs:{start:"9"}},[_("li",[v._v("开启任务队列（若配置了支付部分，且要调试支付部分，如订单支付板块等，需要开启任务队列）"),_("br")])]),v._v(" "),_("blockquote",[_("p",[v._v("来到项目根目录 -> 打开终端 -> 输入 "),_("code",[v._v("php think queue:work")]),v._v(" ，若提示函数禁用了，在来到宝塔面板"),_("br"),v._v(" "),_("code",[v._v("软件商店")]),v._v("-> "),_("code",[v._v("已安装")]),v._v("-> "),_("code",[v._v("PHP 7.2.33")]),v._v("-> "),_("code",[v._v("设置")]),v._v("-> "),_("code",[v._v("禁用函数")]),v._v("-> "),_("code",[v._v("pcntl_signal、pcntl_alarm")]),v._v("-> "),_("code",[v._v("删除")]),v._v("-> 然后再到终端试一下 "),_("code",[v._v("php think queue:work")]),v._v("看报错不，如果还报错，看一下是哪个函数就删除哪个函数")])])]),v._v(" "),_("h3",{attrs:{id:"_3-部署项目前端vuecli页面部分"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-部署项目前端vuecli页面部分"}},[v._v("#")]),v._v(" 3.部署项目前端vuecli页面部分")]),v._v(" "),_("blockquote",[_("ol",[_("li",[v._v("群文件下载源码 （或私信老师获取源码）--【完整】vuecli商城后台【兼容node18】"),_("br")]),v._v(" "),_("li",[v._v("修改代理配置，后端地址："),_("code",[v._v("vue.config.js")]),v._v("->"),_("code",[v._v("target")]),v._v("："),_("code",[v._v("http://vuecli.shop.51yrc.com/admin")]),_("br")]),v._v(" "),_("li",[v._v("打包项目，项目里面没有node_modules文件，需要初始化node_modules文件，")])]),v._v(" "),_("blockquote",[_("p",[v._v("键盘shift+鼠标右键，"),_("code",[v._v("此处打开Powershell")]),v._v("然后输入命令："),_("code",[v._v("npm install")]),v._v("安装依赖"),_("br"),v._v("\n然后输入打包命令："),_("code",[v._v("npm run build")]),v._v("打包，成功之后，项目根目录多出 "),_("code",[v._v("dist")]),v._v("文件夹    "),_("br"),v._v("\n打开"),_("code",[v._v("dist")]),v._v("文件夹，全部选中，右键，"),_("code",[v._v("添加到压缩文件")]),v._v("--"),_("code",[v._v("zip")]),v._v("--"),_("code",[v._v("确定")]),v._v(" --打包好了代码 "),_("code",[v._v("dist.zip")]),v._v(" "),_("br")])]),v._v(" "),_("ol",{attrs:{start:"4"}},[_("li",[v._v("在解析一个域名，用于展示后台界面用的，如："),_("code",[v._v("vuecli.html.shop")])]),v._v(" "),_("li",[v._v("在宝塔面板中，网站--\x3e添加网站--\x3e"),_("code",[v._v("PHP项目")])])]),v._v(" "),_("blockquote",[_("p",[_("code",[v._v("添加站点")]),v._v("--》"),_("code",[v._v("传统项目")]),v._v("--》"),_("code",[v._v("域名")]),v._v("："),_("code",[v._v("vuecli.html.shop.51yrc.com")]),v._v(" "),_("code",[v._v("备注")]),v._v("："),_("code",[v._v("vuecli.html.shop.51yrc.com")]),v._v(" "),_("code",[v._v("根目录")]),v._v("："),_("code",[v._v("/www/wwwroot/vuecli.html.shop.51yrc.com")]),v._v(" "),_("code",[v._v("FTP")]),v._v("：不创建\n"),_("code",[v._v("数据库")]),v._v("：不创建\n"),_("code",[v._v("PHP版本")]),v._v("："),_("code",[v._v("纯静态")]),v._v(" "),_("code",[v._v("网站分类")]),v._v("：默认分类\n确定--\x3e点击域名看默认站点是否可以打开")])]),v._v(" "),_("ol",{attrs:{start:"6"}},[_("li",[v._v("网站根目录，上传之前的打包代码"),_("code",[v._v("dist.zip")]),v._v(" --\x3e "),_("code",[v._v("解压")]),v._v(",之后可以访问："),_("a",{attrs:{href:"http://vuecli.html.shop.51yrc.com",target:"_blank",rel:"noopener noreferrer"}},[v._v("http://vuecli.html.shop.51yrc.com"),_("OutboundLink")],1),_("br")]),v._v(" "),_("li",[v._v("输入"),_("code",[v._v("admin-admin")]),v._v("，"),_("code",[v._v("发现报错")]),v._v("：原因是："),_("code",[v._v("views/login/index.vue里面写代码的时候直接访问 /admin/login 即前端地址")]),_("br")]),v._v(" "),_("li",[v._v("因此，需要在宝塔面板nginx配置一下代理地址："),_("br")])]),v._v(" "),_("blockquote",[_("p",[v._v("来到对应网站"),_("code",[v._v("vuecli.html.shop.51yrc.com")]),v._v("-> "),_("code",[v._v("设置")]),v._v(" -> "),_("code",[v._v("配置文件")]),v._v(" 加一段在 "),_("code",[v._v("#禁止访问的文件或目录#")]),v._v("上面"),_("br")]),v._v(" "),_("div",{staticClass:"language-js extra-class"},[_("pre",{pre:!0,attrs:{class:"language-js"}},[_("code",[v._v("location "),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("/")]),v._v("admin "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("{")]),v._v(" "),_("span",{pre:!0,attrs:{class:"token comment"}},[v._v("//如果用户访问的是admin ")]),v._v("\n  proxy_pass http"),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v(":")]),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("/")]),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("/")]),v._v("vuecli"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(".")]),v._v("shop"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(".")]),v._v("51yrc"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(".")]),v._v("com"),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("/")]),v._v("admin"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(";")]),v._v(" "),_("span",{pre:!0,attrs:{class:"token comment"}},[v._v("//代理到后端地址 ")]),v._v("\n"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("}")]),v._v("\n")])])])]),v._v(" "),_("ol",{attrs:{start:"9"}},[_("li",[v._v("重新访问"),_("a",{attrs:{href:"http://vuecli.html.shop.51yrc.com",target:"_blank",rel:"noopener noreferrer"}},[v._v("http://vuecli.html.shop.51yrc.com"),_("OutboundLink")],1),v._v(" 测试登录 "),_("code",[v._v("admin-admin")]),_("br")])])])])}),[],!1,null,null,null);_.default=t.exports}}]);