(window.webpackJsonp=window.webpackJsonp||[]).push([[190],{591:function(t,s,a){"use strict";a.r(s);var n=a(24),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"一、uni-app引入uuid库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、uni-app引入uuid库"}},[t._v("#")]),t._v(" 一、uni-app引入uuid库")]),t._v(" "),s("p",[t._v("以 uuid库 为例，其它库可以参照这种方式")]),t._v(" "),s("h3",{attrs:{id:"方法一-使用npm-推荐-会点node知识-或者学习过我们第二学期课程的同学可使用这种方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方法一-使用npm-推荐-会点node知识-或者学习过我们第二学期课程的同学可使用这种方式"}},[t._v("#")]),t._v(" 方法一：使用npm（推荐）(会点node知识，或者学习过我们第二学期课程的同学可使用这种方式)")]),t._v(" "),s("p",[t._v("HBuilderX创建的uni-app项目默认是支持npm的，但需要先初始化npm（如果还没有package.json），然后安装uuid。"),s("br"),s("br"),t._v("\n步骤如下：")]),t._v(" "),s("ol",[s("li",[t._v("打开终端，进入项目根目录（如果使用HBuilderX，可以右键项目根目录，选择"),s("code",[t._v("使用命令行窗口打开")]),t._v("）。"),s("br")]),t._v(" "),s("li",[t._v("初始化npm（如果项目还没有package.json）："),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" init "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v("\n")])])])]),t._v(" "),s("li",[t._v("安装uuid库："),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" uuid\n")])])])]),t._v(" "),s("li",[t._v("在需要使用uuid的页面或组件中，通过import引入："),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" v4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" uuidv4 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'uuid'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 或者 const { v4: uuidv4 } = require('uuid'); // 使用CommonJS方式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 生成一个uuid")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uuidv4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ⇨ '9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d'")]),t._v("\n")])])])])]),t._v(" "),s("p",[t._v("注意：uni-app默认支持ES6模块，所以使用import即可。"),s("br"),t._v("\n但是，uni-app在编译到小程序时，可能会遇到npm模块不支持的情况。因此，我们需要在HBuilderX中配置："),s("br")]),t._v(" "),s("ul",[s("li",[t._v("在项目根目录下找到（或创建）"),s("code",[t._v("vue.config.js")]),t._v("文件，添加以下配置（如果没有的话）："),s("br"),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("transpileDependencies")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'uuid'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 关键配置：让uni-app编译uuid")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),t._v("这样，uni-app在编译时会处理uuid的依赖。"),s("br"),t._v("\n另外，也可以使用HBuilderX的菜单"),s("code",[t._v("工具")]),t._v("->"),s("code",[t._v("外部命令")]),t._v("->"),s("code",[t._v("npm install")]),t._v("来安装。"),s("br")])]),t._v(" "),s("h3",{attrs:{id:"方法二-直接引入js文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方法二-直接引入js文件"}},[t._v("#")]),t._v(" 方法二：直接引入js文件")]),t._v(" "),s("p",[t._v("如果不想使用npm，可以到uuid的GitHub仓库（"),s("a",{attrs:{href:"https://github.com/uuidjs/uuid",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/uuidjs/uuid"),s("OutboundLink")],1),t._v("）下载uuid的完整版（或者使用CDN链接），然后将文件放在项目的静态资源目录（如"),s("code",[t._v("static")]),t._v("目录）中。"),s("br")]),t._v(" "),s("h3",{attrs:{id:"_1-在线uuid获取"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-在线uuid获取"}},[t._v("#")]),t._v(" 1. 在线uuid获取")]),t._v(" "),s("p",[t._v("获取方式很多，给大家推荐一个地址：")]),t._v(" "),s("ol",[s("li",[t._v("v1版本："),s("a",{attrs:{href:"https://cdn.jsdelivr.net/npm/uuid@latest/dist/umd/uuidv1.min.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cdn.jsdelivr.net/npm/uuid@latest/dist/umd/uuidv1.min.js"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("v3版本："),s("a",{attrs:{href:"https://cdn.jsdelivr.net/npm/uuid@latest/dist/umd/uuidv3.min.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cdn.jsdelivr.net/npm/uuid@latest/dist/umd/uuidv3.min.js"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("v4版本："),s("a",{attrs:{href:"https://cdn.jsdelivr.net/npm/uuid@latest/dist/umd/uuidv4.min.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cdn.jsdelivr.net/npm/uuid@latest/dist/umd/uuidv4.min.js"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("v5版本："),s("a",{attrs:{href:"https://cdn.jsdelivr.net/npm/uuid@latest/dist/umd/uuidv5.min.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cdn.jsdelivr.net/npm/uuid@latest/dist/umd/uuidv5.min.js"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("各版本区别和使用参考："),s("a",{attrs:{href:"https://www.jsdelivr.com/package/npm/uuidjs",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.jsdelivr.com/package/npm/uuidjs"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"_2-引入流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-引入流程"}},[t._v("#")]),t._v(" 2. 引入流程")]),t._v(" "),s("ol",[s("li",[t._v("下载uuid的浏览器版本（例如，从"),s("a",{attrs:{href:"https://cdn.jsdelivr.net/npm/uuid@latest/dist/umd/uuid.min.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cdn.jsdelivr.net/npm/uuid@latest/dist/umd/uuid.min.js"),s("OutboundLink")],1),t._v(" 下载）")]),t._v(" "),s("li",[t._v("将下载的文件（如"),s("code",[t._v("uuid.min.js")]),t._v("）放在项目的"),s("code",[t._v("static/js")]),t._v("目录（可以自己创建js目录）。")]),t._v(" "),s("li",[t._v("在需要使用uuid的页面中，通过相对路径引入："),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引入uuid")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" uuid "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/static/js/uuid.min.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 或者使用require")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// const uuid = require('@/static/js/uuid.min.js');")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注意：引入整个文件后，uuid可能是一个对象，具体结构需要看文件内容")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通常，我们可以这样使用：")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// v4方法生成一个随机uuid")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" uuid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("v4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])])]),t._v(" "),s("p",[t._v("但是请注意，这种方式引入的uuid库可能是全局的，而且需要确保该库在uni-app环境中能够运行（尤其是非H5端）。")]),t._v(" "),s("h3",{attrs:{id:"注意事项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[t._v("#")]),t._v(" 注意事项")]),t._v(" "),s("ul",[s("li",[t._v("在小程序环境中，直接使用npm包可能会遇到问题，因此"),s("code",[t._v("方法一")]),t._v("中的"),s("code",[t._v("transpileDependencies")]),t._v("配置很重要。")]),t._v(" "),s("li",[t._v("如果使用下载的js文件，需要注意该文件是否支持commonjs或es6模块导出，以及是否支持非浏览器环境（因为小程序和App环境都不是浏览器环境）。")])]),t._v(" "),s("h3",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("推荐使用"),s("code",[t._v("方法一（npm安装）")]),t._v("，因为这是最常用的方式，而且uuid库本身是支持多环境的。如果遇到问题，再考虑"),s("code",[t._v("方法二")]),t._v("。"),s("br"),t._v("\n如果使用npm安装后运行到小程序报错，可以尝试在"),s("code",[t._v("vue.config.js")]),t._v("中配置transpileDependencies，或者检查是否需要在小程序开发工具中构建npm（如果是使用微信小程序开发工具单独打开项目，需要构建npm；但HBuilderX直接运行到微信小程序工具一般会自动构建）。\n另外，uni-app从2.2.1+版本开始支持使用npm，所以确保你的HBuilderX版本较新。")]),t._v(" "),s("h3",{attrs:{id:"uuid在uni-app项目中的实战案例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uuid在uni-app项目中的实战案例"}},[t._v("#")]),t._v(" uuid在uni-app项目中的实战案例")]),t._v(" "),s("p",[t._v("具体查看："),s("a",{attrs:{href:"/thirdless/w-b/07注册登录页面.html#_2-给游客-未登录用户-一个身份标识",target:"_blank"}},[t._v("uuid在uni-app项目中的实战案例：2. 给游客（未登录用户）一个身份标识")])]),t._v(" "),s("p",[s("br"),s("br"),s("br")]),t._v(" "),s("h2",{attrs:{id:"二、uni-app引入加密库-如cryptojs-来实现sha256加密"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、uni-app引入加密库-如cryptojs-来实现sha256加密"}},[t._v("#")]),t._v(" 二、uni-app引入加密库（如CryptoJS）来实现SHA256加密")]),t._v(" "),s("p",[t._v("由于uni-app兼容多端，我们需要选择一个支持多端的加密库。CryptoJS是一个常用的选择，但要注意其体积较大，可能影响小程序包大小。考虑到多端兼容性（H5、小程序、App），我们可以使用CryptoJS，但需要将其放在项目中并正确引入。"),s("br")]),t._v(" "),s("h3",{attrs:{id:"方法一-使用npm-推荐-会点node知识-或者学习过我们第二学期课程的同学可使用这种方式-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方法一-使用npm-推荐-会点node知识-或者学习过我们第二学期课程的同学可使用这种方式-2"}},[t._v("#")]),t._v(" 方法一：使用npm（推荐）(会点node知识，或者学习过我们第二学期课程的同学可使用这种方式)")]),t._v(" "),s("p",[t._v("HBuilderX创建的uni-app项目默认是支持npm的，但需要先初始化npm（如果还没有package.json），然后安装"),s("code",[t._v("crypto-js")]),t._v("。"),s("br"),s("br"),t._v("\n步骤如下：")]),t._v(" "),s("ol",[s("li",[t._v("打开终端，进入项目根目录（如果使用HBuilderX，可以右键项目根目录，选择"),s("code",[t._v("使用命令行窗口打开")]),t._v("）。"),s("br")]),t._v(" "),s("li",[t._v("初始化npm（如果项目还没有package.json）："),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" init "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v("\n")])])])]),t._v(" "),s("li",[t._v("安装crypto-js库："),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" crypto-js\n")])])])]),t._v(" "),s("li",[t._v("在需要使用uuid的页面或组件中，通过import引入："),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" sha256 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'crypto-js/sha256'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" encHex "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'crypto-js/enc-hex'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//使用")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hash "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sha256")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xxxxx'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'APP_SECRET'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" hash"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("encHex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回十六进制字符串")]),t._v("\n")])])])])]),t._v(" "),s("p",[t._v("注意：")]),t._v(" "),s("ol",[s("li",[t._v("如果使用npm安装，构建到小程序时，可能会将整个crypto-js都打包进去，导致体积过大。"),s("br"),t._v("因此，可以考虑按需引入，但"),s("code",[t._v("crypto-js")]),t._v("已经支持按需引入（如"),s("code",[t._v("import sha256 from 'crypto-js/sha256'")]),t._v("），这样只会引入相关代码。"),s("br")]),t._v(" "),s("li",[t._v("如果遇到npm包在小程序中不支持的问题，可以尝试在项目的"),s("code",[t._v("transpileDependencies")]),t._v("中配置（在vue.config.js中），但uni-app默认会处理"),s("code",[t._v("node_modules")]),t._v("的编译。"),s("br"),s("br")])]),t._v(" "),s("h3",{attrs:{id:"方法二-直接引入js文件-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方法二-直接引入js文件-2"}},[t._v("#")]),t._v(" 方法二：直接引入js文件")]),t._v(" "),s("p",[t._v("下载CryptoJS的库文件并放入项目的"),s("code",[t._v("common/js")]),t._v("目录中，然后引入。")]),t._v(" "),s("h3",{attrs:{id:"示例1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例1"}},[t._v("#")]),t._v(" 示例1")]),t._v(" "),s("ol",[s("li",[t._v("为了完整性和方便，建议下载整个crypto-js然后只提取需要的文件，或者直接使用完整的"),s("code",[t._v("crypto-js.min.js")]),t._v("。"),s("br"),t._v("\n下载 "),s("code",[t._v("crypto-js")]),s("br")])]),t._v(" "),s("blockquote",[s("ol",[s("li",[t._v("你可以从CryptoJS的GitHub仓库下载："),s("a",{attrs:{href:"https://github.com/brix/crypto-js",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/brix/crypto-js"),s("OutboundLink")],1),t._v(" "),s("br")]),t._v(" "),s("li",[t._v("也可以使用cdn网站的库，如:"),s("a",{attrs:{href:"https://cdnjs.com/libraries/crypto-js",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cdnjs.com/libraries/crypto-js"),s("OutboundLink")],1),s("br")])])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("引入：")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" CryptoJS "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/common/js/crypto-js.min.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 然后使用CryptoJS.SHA256")]),t._v("\n\n   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用CryptoJS.SHA256")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hash "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" CryptoJS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SHA256")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sortedStr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'APP_SECRET'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" hash"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CryptoJS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("enc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Hex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回十六进制字符串")]),t._v("\n")])])]),s("h3",{attrs:{id:"示例2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例2"}},[t._v("#")]),t._v(" 示例2")]),t._v(" "),s("h4",{attrs:{id:"示例2-1-h5端你可以这么做"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例2-1-h5端你可以这么做"}},[t._v("#")]),t._v(" 示例2-1. H5端你可以这么做")]),t._v(" "),s("ol",[s("li",[t._v("纯JS实现的SHA256库："),s("a",{attrs:{href:"https://cdnjs.cloudflare.com/ajax/libs/js-sha256/0.9.0/sha256.min.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cdnjs.cloudflare.com/ajax/libs/js-sha256/0.9.0/sha256.min.js"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("将上述CDN内容保存为本地文件："),s("code",[t._v("/common/js/sha256.min.js")])])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在generateSign函数之前引入")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" sha256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// #ifdef H5")]),t._v("\n   sha256 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/common/js/sha256.min.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sha256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// #endif")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// #ifndef H5")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 其他平台（小程序、App）如何处理？需要另外的方案")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// #endif")]),t._v("\n")])])]),s("h4",{attrs:{id:"示例2-2-复制纯js实现的sha256库到项目中-多端兼容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例2-2-复制纯js实现的sha256库到项目中-多端兼容"}},[t._v("#")]),t._v(" 示例2-2. 复制纯JS实现的sha256库到项目中（多端兼容）")]),t._v(" "),s("p",[t._v("由于uni-app支持条件编译，我们可以"),s("br")]),t._v(" "),s("ul",[s("li",[t._v("H5使用"),s("code",[t._v("crypto-js")]),t._v("（通过CDN引入）"),s("br")]),t._v(" "),s("li",[t._v("小程序使用"),s("code",[t._v("js-sha256")]),t._v("（通过小程序npm支持或直接复制代码）"),s("br")]),t._v(" "),s("li",[t._v("App使用原生加密模块（性能更好）"),s("br"),t._v("\n但为了简化，我们可以统一使用一个纯JS实现的sha256库，并将其源码直接放入项目中。"),s("br"),t._v("\n具体操作："),s("br")])]),t._v(" "),s("ol",[s("li",[t._v("访问 "),s("a",{attrs:{href:"https://cdn.jsdelivr.net/npm/js-sha256@0.9.0/build/sha256.min.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cdn.jsdelivr.net/npm/js-sha256@0.9.0/build/sha256.min.js"),s("OutboundLink")],1),t._v(" 原地址：[https://github.com/emn178/js-sha256]")]),t._v(" "),s("li",[t._v("复制全部代码")]),t._v(" "),s("li",[t._v("在"),s("code",[t._v("/common/js")]),t._v("目录下创建"),s("code",[t._v("sha256.min.js")]),t._v("文件，粘贴代码")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引入本地的sha256库")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" sha256 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/common/js/sha256.min.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 计算签名（注意：这里我们使用hex格式）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sha256")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xxxxx'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'APP_SECRET'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 该库默认返回hex字符串")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);