(window.webpackJsonp=window.webpackJsonp||[]).push([[183],{586:function(_,v,e){"use strict";e.r(v);var t=e(24),s=Object(t.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h2",{attrs:{id:"一、https协议【ssl证书】说明"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#一、https协议【ssl证书】说明"}},[_._v("#")]),_._v(" 一、https协议【SSL证书】说明")]),_._v(" "),v("p",[_._v("搭建https协议的网站，需要申请SSL证书证书，申请证书有两种方式："),v("br")]),_._v(" "),v("h3",{attrs:{id:"_1-付费证书-花钱买"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-付费证书-花钱买"}},[_._v("#")]),_._v(" 1. 付费证书（花钱买）")]),_._v(" "),v("ul",[v("li",[_._v("付费证书很容易理解，就是花钱买证书，以阿里云为例，阿里云的付费证书有：DV、OV、EV三种，其中EV证书是最高级别的，价格也最高，一般企业才会申请EV证书，个人网站申请DV证书即可，OV证书介于两者之间，价格也介于两者之间（可去阿里云看价格），如果你不缺钱可以用这个；（"),v("code",[_._v("【重要】根据CA/B最新的投票结果，自2026年03月15日起，证书签发有效期将计划缩短至200天；")]),_._v("） "),v("br")]),_._v(" "),v("li",[v("ul",[v("li",[_._v("到期后（"),v("code",[_._v("一年，2026年03月15日起，缩短至200天")]),_._v("）再去申请，等签发（半个小时），再到服务器去更换；")])])])]),_._v(" "),v("h3",{attrs:{id:"_2-免费证书-不想花钱"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-免费证书-不想花钱"}},[_._v("#")]),_._v(" 2. 免费证书（不想花钱）")]),_._v(" "),v("h4",{attrs:{id:"_2-1-阿里云提供的免费证书"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-阿里云提供的免费证书"}},[_._v("#")]),_._v(" 2.1 阿里云提供的免费证书")]),_._v(" "),v("ul",[v("li",[_._v("一年20个，每3个月到期一个【也就是一个域名（一个网站一年要用4个证书，最多可以给5个网站使用）】，到期之后，需要重新申请签发，等签发（半个小时），再到服务器去更换；")])]),_._v(" "),v("h4",{attrs:{id:"_2-2-通过技术手段-自动申请免费证书-永远过期"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-通过技术手段-自动申请免费证书-永远过期"}},[_._v("#")]),_._v(" 2.2 通过技术手段，自动申请免费证书（永远过期）")]),_._v(" "),v("ul",[v("li",[_._v("自动部署证书，默认90天，到期后，会自动续签，不需要人工干预；")])]),_._v(" "),v("h2",{attrs:{id:"二、自动化部署流程"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#二、自动化部署流程"}},[_._v("#")]),_._v(" 二、自动化部署流程")]),_._v(" "),v("p",[_._v("我们采用 "),v("code",[_._v("ALLinSSL")]),_._v("开源免费的SSL证书自动化管理平台部署SSL证书， 官方网站："),v("a",{attrs:{href:"https://allinssl.com/",target:"_blank",rel:"noopener noreferrer"}},[_._v("https://allinssl.com/"),v("OutboundLink")],1),_._v(" "),v("br")]),_._v(" "),v("p",[_._v("具体查看视频，"),v("a",{attrs:{href:"https://www.bilibili.com/video/BV1qz7ZzXEJv/?spm_id_from=333.1387.homepage.video_card.click&vd_source=9a6ee0d7e6c1657e4a7381c1f8f18f4b",target:"_blank"}},[_._v(" 自动化部署流程视频查看[B站] ")])]),_._v(" "),v("h3",{attrs:{id:"_1-系统及准备工作"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-系统及准备工作"}},[_._v("#")]),_._v(" 1. 系统及准备工作")]),_._v(" "),v("blockquote",[v("ol",[v("li",[_._v("操作系统： Linux (推荐 CentOS 7.x，Ubuntu 18.04+，Debian 9+) / Windows / MacOS")]),_._v(" "),v("li",[_._v("硬件要求： 至少1核CUP, 512M内存, 1G磁盘空间")]),_._v(" "),v("li",[_._v("域名： 在阿里云或者腾讯云购买了一个域名 (目前"),v("code",[_._v("ALLinSSL")]),_._v("仅支持"),v("code",[_._v("阿里云")]),_._v("和"),v("code",[_._v("腾讯云")]),_._v("的域名，后续其他云服务商会陆续支持)")]),_._v(" "),v("li",[_._v("网络： 需要链接网络下载依赖和申请证书")])])]),_._v(" "),v("h3",{attrs:{id:"_2-关于宝塔面板安装及配置网站或者系统"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-关于宝塔面板安装及配置网站或者系统"}},[_._v("#")]),_._v(" 2. 关于宝塔面板安装及配置网站或者系统")]),_._v(" "),v("p",[_._v("关于宝塔面板安装及配置网站或者系统上线，如果有不会的同学，可以直接去看我们"),v("code",[_._v("第二学期第四季")]),_._v("的课程：")]),_._v(" "),v("blockquote",[v("ol",[v("li",[_._v("B站： "),v("a",{attrs:{href:"https://www.bilibili.com/cheese/play/ss61008",target:"_blank",rel:"noopener noreferrer"}},[_._v("https://www.bilibili.com/cheese/play/ss61008"),v("OutboundLink")],1)])]),_._v(" "),v("blockquote",[v("p",[v("b",[v("a",{attrs:{href:"/secondless/w-d.html",target:"_blank"}},[_._v("[第四季课程文档]")])])])]),_._v(" "),v("ol",{attrs:{start:"2"}},[v("li",[_._v("网易云课堂："),v("a",{attrs:{href:"https://study.163.com/course/courseMain.htm?courseId=1213794887&share=2&shareId=480000002289674",target:"_blank",rel:"noopener noreferrer"}},[_._v("https://study.163.com/course/courseMain.htm?courseId=1213794887&share=2&shareId=480000002289674"),v("OutboundLink")],1),_._v(" "),v("br")])]),_._v(" "),v("blockquote",[v("p",[v("b",[v("a",{attrs:{href:"/secondless/w-d.html",target:"_blank"}},[_._v("[第四季课程文档]")]),_._v(" "),v("a",{staticStyle:{"margin-left":"20px"},attrs:{href:"https://study.163.com/course/courseMain.htm?courseId=1213794887&share=2&shareId=480000002289674",target:"_blank"}},[_._v("[第四季课程视频]")])])])])]),_._v(" "),v("h3",{attrs:{id:"_3-部署ssl证书"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-部署ssl证书"}},[_._v("#")]),_._v(" 3. 部署SSL证书")]),_._v(" "),v("h4",{attrs:{id:"_1-复制安装命令"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-复制安装命令"}},[_._v("#")]),_._v(" 1. 复制安装命令")]),_._v(" "),v("p",[_._v("来到 "),v("code",[_._v("ALLinSSL")]),_._v("官网 "),v("a",{attrs:{href:"https://allinssl.com/",target:"_blank",rel:"noopener noreferrer"}},[_._v("https://allinssl.com/"),v("OutboundLink")],1),_._v("，"),v("code",[_._v("快速上手")]),_._v(" "),v("a",{attrs:{href:"https://allinssl.com/guide/getting-started.html",target:"_blank",rel:"noopener noreferrer"}},[_._v("https://allinssl.com/guide/getting-started.html"),v("OutboundLink")],1),_._v(" 找到 "),v("code",[_._v("安装 -> 使用二进制安装命令 (推荐) -> 复制安装命令")])]),_._v(" "),v("div",{staticClass:"language-js extra-class"},[v("pre",{pre:!0,attrs:{class:"language-js"}},[v("code",[_._v("curl "),v("span",{pre:!0,attrs:{class:"token operator"}},[_._v("-")]),_._v("sSO http"),v("span",{pre:!0,attrs:{class:"token operator"}},[_._v(":")]),v("span",{pre:!0,attrs:{class:"token operator"}},[_._v("/")]),v("span",{pre:!0,attrs:{class:"token operator"}},[_._v("/")]),_._v("download"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(".")]),_._v("allinssl"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(".")]),_._v("com"),v("span",{pre:!0,attrs:{class:"token operator"}},[_._v("/")]),_._v("install_allinssl"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(".")]),_._v("sh "),v("span",{pre:!0,attrs:{class:"token operator"}},[_._v("&&")]),_._v(" bash install_allinssl"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(".")]),_._v("sh allinssl\n")])])]),v("h4",{attrs:{id:"_2-安装及登录-allinssl"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装及登录-allinssl"}},[_._v("#")]),_._v(" 2. 安装及登录 "),v("code",[_._v("ALLinSSL")])]),_._v(" "),v("p",[_._v("方式一："),v("br")]),_._v(" "),v("blockquote",[v("p",[_._v("可直接在 "),v("code",[_._v("宝塔面板")]),_._v(" ->  "),v("code",[_._v("Docker")]),_._v(" -> "),v("code",[_._v("应用商店")]),_._v(" -> "),v("code",[_._v("应用搜索")]),_._v(" -> "),v("code",[_._v("allinssl")]),_._v("，然后 "),v("code",[_._v("安装")]),_._v(" -> "),v("code",[_._v("确定")]),_._v("（大约需要2-3分钟，等待安装即可，成功后点击 "),v("code",[_._v("详情")]),_._v(" -> 复制 "),v("code",[_._v("web端口")]),_._v(" -> 然后在浏览器输入：宝塔面板网址+刚刚复制的 "),v("code",[_._v("web端口")]),_._v("就可以在服务器打开"),v("code",[_._v("ALLinSSL")]),_._v("管理平台，然后输入详情里面展示的"),v("code",[_._v("用户名")]),_._v("和"),v("code",[_._v("密码")]),_._v("就可以登录"),v("code",[_._v("ALLinSSL")]),_._v("平台） "),v("br"),v("br")])]),_._v(" "),v("p",[_._v("方式二："),v("br")]),_._v(" "),v("blockquote",[v("p",[_._v("如果宝塔面板"),v("code",[_._v("Docker")]),_._v("中搜索不到"),v("code",[_._v("ALLinSSL")]),_._v("，或者不是用宝塔面板部署的网站或者系统， 则在服务器上安装 "),v("code",[_._v("allinssl")]),_._v("："),v("br"),_._v("\n常用的服务器是 "),v("code",[_._v("阿里云")]),_._v(" "),v("code",[_._v("腾讯云")]),_._v("， 我们以"),v("code",[_._v("阿里云")]),_._v("服务器为例"),v("br")]),_._v(" "),v("blockquote",[v("ol",[v("li",[_._v("来到阿里云控制台，找到服务器控制台（ECS或者轻量应用服务器） -> "),v("code",[_._v("远程连接")]),_._v(" （关于远程连接，在"),v("code",[_._v("第二学期第四季")]),_._v("的课程都详解讲过了）"),v("br")]),_._v(" "),v("li",[_._v("粘贴命令： "),v("code",[_._v("鼠标右键")]),_._v(" -> "),v("code",[_._v("粘贴")]),_._v(" -> "),v("code",[_._v("粘贴")]),_._v(" -> "),v("code",[_._v("回车")]),_._v(" -> 提示的时候，输入"),v("code",[_._v("y")]),_._v(" -> 然后等待它安装，安装完成后，会告诉你 "),v("code",[_._v("ALLinSSL")]),_._v(" 的访问地址，账户名和密码（"),v("code",[_._v("当然你可以拿记事本记一下下次用")]),_._v("），然后根据"),v("code",[_._v("ALLinSSL")]),_._v(" 的访问地址，账户名和密码登录 "),v("code",[_._v("ALLinSSL")]),_._v("平台 "),v("br")]),_._v(" "),v("li",[_._v("[重点] "),v("code",[_._v("授权API管理")])])])])]),_._v(" "),v("ol",{attrs:{start:"3"}},[v("li",[_._v("重点说一下： "),v("code",[_._v("授权API管理")]),_._v(" "),v("br")])]),_._v(" "),v("blockquote",[v("p",[_._v("第一次 "),v("code",[_._v("添加授权API")]),_._v("，主要是授权 "),v("code",[_._v("DNS供应商")]),_._v(" ：")]),_._v(" "),v("blockquote",[v("ol",[v("li",[_._v("名称： 随便填，比如 "),v("code",[_._v("AllInSSL")])]),_._v(" "),v("li",[_._v("类型: "),v("code",[_._v("阿里云")]),_._v("（如果你的域名是腾讯云购买的，则选择 "),v("code",[_._v("腾讯云")]),_._v("）当然后续"),v("code",[_._v("ALLinSSL")]),_._v("也会提供更多服务商")]),_._v(" "),v("li",[v("code",[_._v("AccessKeyId 和 AccessKeySecret")]),_._v("；")])]),_._v(" "),v("blockquote",[v("ol",[v("li",[_._v("如果你的域名是"),v("code",[_._v("腾讯云")]),_._v("购买的，则来到"),v("code",[_._v("腾讯云控制台")]),_._v("搜索 "),v("code",[_._v("访问管理")]),_._v(" -> "),v("code",[_._v("API密钥管理")]),_._v(" -> "),v("code",[_._v("新建密钥")]),_._v(" -> "),v("code",[_._v("复制ScretId和ScretKey到这里即可")]),_._v(" "),v("br")]),_._v(" "),v("li",[_._v("如果你的域名是"),v("code",[_._v("阿里云")]),_._v("购买：来到阿里云 "),v("code",[_._v("密钥管理页面")]),_._v(" "),v("a",{attrs:{href:"https://ram.console.aliyun.com/profile/access-keys",target:"_blank",rel:"noopener noreferrer"}},[_._v("https://ram.console.aliyun.com/profile/access-keys"),v("OutboundLink")],1),_._v(" , 但是建议 "),v("code",[_._v("使用RAM用户AccessKey")]),_._v("，不建议使用云账号 AccessKey "),v("br")])]),_._v(" "),v("blockquote",[v("ol",[v("li",[_._v("创建用户 "),v("br")])]),_._v(" "),v("blockquote",[v("ol",[v("li",[_._v("登录名称: 随便填，比如："),v("code",[_._v("AllInSSL")]),_._v(" "),v("br")]),_._v(" "),v("li",[_._v("访问方式: 选择 "),v("code",[_._v("使用永久 AccessKey 访问")]),_._v(", 然后 "),v("code",[_._v("确定")]),_._v("， 然后 把 "),v("code",[_._v("AccessKey ID")]),_._v(" 和 "),v("code",[_._v("AccessKey Secret")]),_._v(" 复制保存到记事本并填写到 "),v("code",[_._v("ALLinSSL")]),_._v(" 的"),v("code",[_._v("授权API管理")]),_._v("里面"),v("br")])])]),_._v(" "),v("ol",{attrs:{start:"2"}},[v("li",[_._v("给创建的用户授权")])]),_._v(" "),v("blockquote",[v("ol",[v("li",[v("code",[_._v("添加权限")]),_._v(" -> "),v("code",[_._v("权限策略")]),_._v("搜索 "),v("code",[_._v("dns")]),_._v(", 把搜索结果全部勾选上，然后 "),v("code",[_._v("确认新增权限")]),_._v(" "),v("br")])])])])])]),_._v(" "),v("p",[_._v("第二次 "),v("code",[_._v("添加授权API")]),_._v("，主要是配置需要部署证书的服务器 ：")]),_._v(" "),v("blockquote",[v("ol",[v("li",[_._v("名称： 随便填，比如 "),v("code",[_._v("AllInSSL")])]),_._v(" "),v("li",[_._v("类型: "),v("code",[_._v("宝塔面板")])]),_._v(" "),v("li",[_._v("面板URL:")])]),_._v(" "),v("blockquote",[v("ol",[v("li",[_._v("来到宝塔面板-> "),v("code",[_._v("面板设置")]),_._v(" -> "),v("code",[_._v("API接口(API接口配置)")])])]),_._v(" "),v("blockquote",[v("ol",[v("li",[_._v("API接口： 打开")]),_._v(" "),v("li",[_._v("接口密钥： 复制一下")]),_._v(" "),v("li",[_._v("IP白名单(每行一个)： 127.0.0.1")]),_._v(" "),v("li",[_._v("保存\n最后面板URL:  "),v("code",[_._v("https://127.0.0.1:面板端口/")])])])])]),_._v(" "),v("ol",{attrs:{start:"4"}},[v("li",[_._v("API密钥：刚才复制的接口密钥")]),_._v(" "),v("li",[_._v("忽略 SSL/TLS证书错误： 可打开")])])])]),_._v(" "),v("ol",{attrs:{start:"4"}},[v("li",[_._v("来到 "),v("code",[_._v("AllInSSL")]),_._v(" 自动化部署")])]),_._v(" "),v("blockquote",[v("ol",[v("li",[v("code",[_._v("新增自动化部署")]),_._v(" -> "),v("code",[_._v("新建工作流")]),_._v(" -> "),v("code",[_._v("快速部署模版")])]),_._v(" "),v("li",[v("code",[_._v("申请证书")]),_._v("：")])]),_._v(" "),v("blockquote",[v("ol",[v("li",[_._v("域名：填写你要部署的https服务的域名，如："),v("code",[_._v("www.51yrc.com")]),_._v(", 多个用逗号隔开 "),v("code",[_._v("51yrc.com,*.51yrc.com,lesson06wap.51yrc.com,lesson06.51yrc.com")])]),_._v(" "),v("li",[_._v("邮箱：填写你的邮箱，用于接收通知")]),_._v(" "),v("li",[_._v("DNS提供商 ： "),v("code",[_._v("阿里云")]),_._v("（如果你的域名是腾讯云购买的，则选择 "),v("code",[_._v("腾讯云")]),_._v("）")]),_._v(" "),v("li",[_._v("续签间隔(天) ：默认30天")])])]),_._v(" "),v("ol",{attrs:{start:"3"}},[v("li",[v("code",[_._v("部署")]),_._v(" -> "),v("code",[_._v("宝塔面板网站")])])]),_._v(" "),v("blockquote",[v("ol",[v("li",[_._v("主机提供商: "),v("code",[_._v("宝塔面板AllinSSL")])]),_._v(" "),v("li",[_._v("证书来源: "),v("code",[_._v("申请证书")])]),_._v(" "),v("li",[_._v("站点名称: "),v("code",[_._v("你的网站名称")])])])]),_._v(" "),v("ol",{attrs:{start:"4"}},[v("li",[v("code",[_._v("通知任务")]),_._v("可删除")]),_._v(" "),v("li",[v("code",[_._v("保存")])]),_._v(" "),v("li",[v("code",[_._v("执行")])]),_._v(" "),v("li",[v("code",[_._v("查看执行历史")])])])]),_._v(" "),v("h2",{attrs:{id:"三、自动化部署流程视频查看"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#三、自动化部署流程视频查看"}},[_._v("#")]),_._v(" 三、自动化部署流程视频查看")]),_._v(" "),v("p",[_._v("具体查看视频，"),v("a",{attrs:{href:"https://www.bilibili.com/video/BV1qz7ZzXEJv/?spm_id_from=333.1387.homepage.video_card.click&vd_source=9a6ee0d7e6c1657e4a7381c1f8f18f4b",target:"_blank"}},[_._v(" 自动化部署流程视频查看 ")])]),_._v(" "),v("h2",{attrs:{id:"四、关于allinssl无法访问的解决方案"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#四、关于allinssl无法访问的解决方案"}},[_._v("#")]),_._v(" 四、关于"),v("code",[_._v("AllInSSL")]),_._v("无法访问的解决方案")]),_._v(" "),v("blockquote",[v("p",[_._v("如果一段时间之后，无法访问"),v("code",[_._v("AllInSSL")]),_._v("，可能是"),v("code",[_._v("AllinSSL")]),_._v(" 服务当前没有运行，按照如下步骤解决： "),v("br")])]),_._v(" "),v("h3",{attrs:{id:"_1-确认服务是否运行"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-确认服务是否运行"}},[_._v("#")]),_._v(" 1. 确认服务是否运行")]),_._v(" "),v("blockquote",[v("div",{staticClass:"language-bash extra-class"},[v("pre",{pre:!0,attrs:{class:"language-bash"}},[v("code",[_._v("   "),v("span",{pre:!0,attrs:{class:"token function"}},[_._v("ps")]),_._v(" aux "),v("span",{pre:!0,attrs:{class:"token operator"}},[_._v("|")]),_._v(" "),v("span",{pre:!0,attrs:{class:"token function"}},[_._v("grep")]),_._v(" allinssl\n")])])]),v("p",[_._v("返回类似：")]),_._v(" "),v("div",{staticClass:"language-bash extra-class"},[v("pre",{pre:!0,attrs:{class:"language-bash"}},[v("code",[_._v("root        "),v("span",{pre:!0,attrs:{class:"token number"}},[_._v("5264")]),_._v("  "),v("span",{pre:!0,attrs:{class:"token number"}},[_._v("0.0")]),_._v("  "),v("span",{pre:!0,attrs:{class:"token number"}},[_._v("0.1")]),_._v("   "),v("span",{pre:!0,attrs:{class:"token number"}},[_._v("6332")]),_._v("  "),v("span",{pre:!0,attrs:{class:"token number"}},[_._v("2016")]),_._v(" pts/0    S+   "),v("span",{pre:!0,attrs:{class:"token number"}},[_._v("17")]),_._v(":42   "),v("span",{pre:!0,attrs:{class:"token number"}},[_._v("0")]),_._v(":00 "),v("span",{pre:!0,attrs:{class:"token function"}},[_._v("grep")]),_._v(" allinssl\n")])])]),v("p",[_._v("说明："),v("code",[_._v("AllinSSL")]),_._v(" 服务当前没有运行，这里只有 grep allinssl 进程（即你刚执行的查询命令），没有真正的 AllinSSL 服务进程。这表明服务已停止运行。")])]),_._v(" "),v("h3",{attrs:{id:"_2-重启-allinssl-服务"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-重启-allinssl-服务"}},[_._v("#")]),_._v(" 2. 重启 AllinSSL 服务")]),_._v(" "),v("blockquote",[v("ol",[v("li",[v("p",[_._v("进入安装目录\n"),v("code",[_._v("cd /www/allinssl")])])]),_._v(" "),v("li",[v("p",[_._v("启动服务\n"),v("code",[_._v("./allinssl start")])])]),_._v(" "),v("li",[v("p",[_._v("检查是否启动成功\n"),v("code",[_._v("./allinssl status")])])])])])])}),[],!1,null,null,null);v.default=s.exports}}]);